 new xs__ITaskId = 72;
new xs__ITaskParam[1033] =
{
	72, 97, 109, 70, 105, 108, 116, 101, 114, 0, 0, 0, 0, -1048576000, -1048576000, -1047527424, 1098907648, 1098907648, 1107296256, 0, 0, 1094713344, 115, 97, 121, 32, 47, 37, 115, 0, 115, 97, 121, 32, 46, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 47, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 46, 37, 115, 0, 47, 37, 115, 0, 46, 37, 115, 0, 115, 97, 121, 32, 47, 37, 115, 0, 115, 97, 121, 32, 46, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 47, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 46, 37, 115, 0, 0, 0, 0, 119, 101, 97, 112, 111, 110, 95, 0, 119, 101, 97, 112, 111, 110, 95, 0, 99, 108, 97, 115, 115, 110, 97, 109, 101, 0, 0, 0, 0, 37, 48, 50, 100, 58, 37, 48, 50, 100, 0, 37, 100, 58, 37, 48, 50, 100, 0, 0, 37, 115, 46, 37, 48, 49, 100, 0, 37, 115, 46, 37, 48, 50, 100, 0, 37, 115, 46, 37, 48, 51, 100, 0, 108, 111, 111, 112, 98, 97, 99, 107, 0, 49, 50, 55, 46, 48, 46, 48, 46, 49, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 99, 104, 0, 16, 16, 52, 60, 0, 84, 69, 82, 82, 79, 82, 73, 83, 84, 0, 67, 84, 0, 83, 80, 69, 67, 84, 65, 84, 79, 82, 0, 0, 0, 0, 83, 97, 121, 84, 101, 120, 116, 0, 0, 0, 84, 101, 97, 109, 73, 110, 102, 111, 0, 0, 33, 76, 65, 83, 84, 95, 75, 90, 95, 68, 69, 77, 79, 0, 33, 76, 65, 83, 84, 95, 76, 74, 95, 68, 69, 77, 79, 0, 107, 122, 114, 101, 99, 111, 114, 100, 115, 0, 107, 122, 116, 111, 112, 0, 97, 120, 110, 95, 109, 97, 112, 115, 46, 116, 120, 116, 0, 115, 105, 108, 101, 110, 116, 95, 109, 97, 112, 115, 46, 116, 120, 116, 0, 114, 101, 99, 111, 114, 100, 115, 46, 105, 110, 105, 0, 107, 122, 95, 100, 101, 109, 111, 46, 99, 102, 103, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 124, 148, 172, 196, 220, 244, 268, 292, 316, 340, 364, 388, 412, 436, 460, 484, 508, 532, 556, 580, 604, 628, 652, 676, 700, 1496, 2292, 3088, 3884, 4680, 5476, 6272, 7068, 7864, 8660, 9456, 10252, 11048, 11844, 12640, 13436, 14232, 15028, 15824, 16620, 17416, 18212, 19008, 19804, 20600, 21396, 22192, 22988, 23784, 24580, 25376, 26172, 26968, 27764, 28560, 29356, 30152, 30948, 31744, 32540, 33336, 34132, 34928, 35724, 36520, 37316, 38112, 38908, 39704, 40500, 41296, 42092, 42888, 43684, 44480, 45276, 46072, 46868, 47664, 48460, 49256, 50052, 50848, 51644, 52440, 53236, 54032, 54828, 55624, 56420, 57216, 58012, 58808, 59604, 60400, 61196, 61992, 62788, 63584, 64380, 65176, 65972, 66768, 67564, 68360, 69156, 69952, 70748, 71544, 72340, 73136, 73932, 74728, 75524, 76320, 77116, 77912, 78708, 79504, 80300, 81096, 81892, 82688, 83484, 84280, 85076, 85872, 86668, 87464, 88260, 89056, 89852, 90648, 91444, 92240, 93036, 93832, 94628, 95424, 96220, 97016, 97812, 98608, 99404, 100200, 100996, 101792, 102588, 103384, 104180, 104976, 105772, 106568, 107364, 108160, 108956, 109752, 110548, 111344, 112140, 112936, 113732, 114528, 115324, 116120, 116916, 117712, 118508, 119304, 120100, 120896, 121692, 122488, 123284, 124080, 124876, 125672, 126468, 127264, 128060, 128856, 129652, 130448, 131244, 132040, 132836, 133632, 134428, 135224, 136020, 136816, 137612, 138408, 139204, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
};
new xs__TaskFlags[5] =
{
	72, 97, 109, 70, 105
};
new xs__TaskFunc[48] =
{
	72, 97, 109, 70, 105, 108, 116, 101, 114, 0, 0, 0, 0, -1048576000, -1048576000, -1047527424, 1098907648, 1098907648, 1107296256, 0, 0, 1094713344, 115, 97, 121, 32, 47, 37, 115, 0, 115, 97, 121, 32, 46, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 47
};
new xs__TaskId = 72;
new Float:xs__TaskInterval = 72;
new xs__TaskParam[1033] =
{
	72, 97, 109, 70, 105, 108, 116, 101, 114, 0, 0, 0, 0, -1048576000, -1048576000, -1047527424, 1098907648, 1098907648, 1107296256, 0, 0, 1094713344, 115, 97, 121, 32, 47, 37, 115, 0, 115, 97, 121, 32, 46, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 47, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 46, 37, 115, 0, 47, 37, 115, 0, 46, 37, 115, 0, 115, 97, 121, 32, 47, 37, 115, 0, 115, 97, 121, 32, 46, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 47, 37, 115, 0, 115, 97, 121, 95, 116, 101, 97, 109, 32, 46, 37, 115, 0, 0, 0, 0, 119, 101, 97, 112, 111, 110, 95, 0, 119, 101, 97, 112, 111, 110, 95, 0, 99, 108, 97, 115, 115, 110, 97, 109, 101, 0, 0, 0, 0, 37, 48, 50, 100, 58, 37, 48, 50, 100, 0, 37, 100, 58, 37, 48, 50, 100, 0, 0, 37, 115, 46, 37, 48, 49, 100, 0, 37, 115, 46, 37, 48, 50, 100, 0, 37, 115, 46, 37, 48, 51, 100, 0, 108, 111, 111, 112, 98, 97, 99, 107, 0, 49, 50, 55, 46, 48, 46, 48, 46, 49, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 99, 104, 0, 16, 16, 52, 60, 0, 84, 69, 82, 82, 79, 82, 73, 83, 84, 0, 67, 84, 0, 83, 80, 69, 67, 84, 65, 84, 79, 82, 0, 0, 0, 0, 83, 97, 121, 84, 101, 120, 116, 0, 0, 0, 84, 101, 97, 109, 73, 110, 102, 111, 0, 0, 33, 76, 65, 83, 84, 95, 75, 90, 95, 68, 69, 77, 79, 0, 33, 76, 65, 83, 84, 95, 76, 74, 95, 68, 69, 77, 79, 0, 107, 122, 114, 101, 99, 111, 114, 100, 115, 0, 107, 122, 116, 111, 112, 0, 97, 120, 110, 95, 109, 97, 112, 115, 46, 116, 120, 116, 0, 115, 105, 108, 101, 110, 116, 95, 109, 97, 112, 115, 46, 116, 120, 116, 0, 114, 101, 99, 111, 114, 100, 115, 46, 105, 110, 105, 0, 107, 122, 95, 100, 101, 109, 111, 46, 99, 102, 103, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100, 124, 148, 172, 196, 220, 244, 268, 292, 316, 340, 364, 388, 412, 436, 460, 484, 508, 532, 556, 580, 604, 628, 652, 676, 700, 1496, 2292, 3088, 3884, 4680, 5476, 6272, 7068, 7864, 8660, 9456, 10252, 11048, 11844, 12640, 13436, 14232, 15028, 15824, 16620, 17416, 18212, 19008, 19804, 20600, 21396, 22192, 22988, 23784, 24580, 25376, 26172, 26968, 27764, 28560, 29356, 30152, 30948, 31744, 32540, 33336, 34132, 34928, 35724, 36520, 37316, 38112, 38908, 39704, 40500, 41296, 42092, 42888, 43684, 44480, 45276, 46072, 46868, 47664, 48460, 49256, 50052, 50848, 51644, 52440, 53236, 54032, 54828, 55624, 56420, 57216, 58012, 58808, 59604, 60400, 61196, 61992, 62788, 63584, 64380, 65176, 65972, 66768, 67564, 68360, 69156, 69952, 70748, 71544, 72340, 73136, 73932, 74728, 75524, 76320, 77116, 77912, 78708, 79504, 80300, 81096, 81892, 82688, 83484, 84280, 85076, 85872, 86668, 87464, 88260, 89056, 89852, 90648, 91444, 92240, 93036, 93832, 94628, 95424, 96220, 97016, 97812, 98608, 99404, 100200, 100996, 101792, 102588, 103384, 104180, 104976, 105772, 106568, 107364, 108160, 108956, 109752, 110548, 111344, 112140, 112936, 113732, 114528, 115324, 116120, 116916, 117712, 118508, 119304, 120100, 120896, 121692, 122488, 123284, 124080, 124876, 125672, 126468, 127264, 128060, 128856, 129652, 130448, 131244, 132040, 132836, 133632, 134428, 135224, 136020, 136816, 137612, 138408, 139204, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
};
new xs__TaskRepeat = 72;
new xs__global_null = 72;
new xs__internalseed = 72;
new xs__logtypenames[6][0] =
{
	{
		1107296256, ...
	},
	{
		788529152, ...
	},
	{
		1929379840, ...
	},
	{
		0, ...
	},
	{
		1627389952, ...
	},
	{
		121, ...
	}
};
new xs__maxnum = 72;
new String:xs__replace_buf[12288] = "HamFilter";
new Float:VEC_NULL[3];
new g_iDHudProperties[9];
new Team_Name[4][0] =
{
	{
		0, ...
	},
	{
		84, ...
	},
	{
		67, ...
	},
	{
		83, ...
	}
};
new CvarFlagString[9][0] =
{
	{
		0, ...
	},
	{
		1140850688, ...
	},
	{
		76, ...
	},
	{
		1593835520, ...
	},
	{
		17664, ...
	},
	{
		77, ...
	},
	{
		31232, ...
	},
	{
		19712, ...
	},
	{
		7471104, ...
	}
};
new g_iRecFrame;
new String:g_szTempName[56] = "!LAST_KZ_DEMO";
new String:g_szTempLJName[56] = "!LAST_LJ_DEMO";
new String:g_szRecFolder[40] = "kzrecords";
new String:g_szTopFolder[24] = "kztop";
new String:g_szAxnMapFile[52] = "axn_maps.txt";
new String:g_szSilentMapsFile[64] = "silent_maps.txt";
new String:g_szCommRecordsFile[48] = "records.ini";
new String:g_szCvarsFile[48] = "kz_demo.cfg";
new g_szPrefix[32];
new g_szDemoFiles[25][7][200];
new g_iCommRecordsNum[25];
new Float:g_flCommRecordTime[25][4];
new g_szCommRecordTime[25][4][14];
new g_szCommExt[25][4][20];
new g_szCommRecordPlayer[25][4][32];
new g_szCommCP[25][4][10];
new g_szCommGC[25][4][10];
new g_szDemosBuffer[25000];
new g_szRecDir[128];
new g_szMapStartPath[128];
new g_szNubFile[128];
new g_szProFile[128];
new g_szDemoName[128];
new g_szDemoFolder[64];
new g_bHealsOnMap;
new g_szMapName[34];
new Float:g_flMapDelay;
new bool:g_bDemoRecording;
new g_iDemoAttempts;
new bool:g_bNeedDefResp;
new Trie:g_tStarts;
new Trie:g_tStops;
new Trie:g_tStartSounds;
new Trie:g_tPlayerCvars;
new Trie:g_tCommunities;
new Float:g_flOldMaxSpeed;
new OrpheuStruct:g_ppmove;
new g_orpheuGameRules;
new g_bAxnBhop;
new g_bIsSteam[33];
new g_bJoinedCT[33];
new bool:g_bGodmode;
new g_hBeamSprite;
new g_szPlayerCvars[7][27] =
{
	{
		99, 108, 95, 102, 105, 108, 116, 101, 114, 115, 116, 117, 102, 102, 99, 109, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
	},
	{
		100, 101, 118, 101, 108, 111, 112, 101, 114, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 48, 46, 48, 0, 0, 0
	},
	{
		99, 108, 95, 115, 105, 100, 101, 115, 112, 101, 101, 100, 0, 0, 0, 0, 0, 0, 0, 0, 3, 52, 48, 48, 46, 48, 0
	},
	{
		99, 108, 95, 98, 97, 99, 107, 115, 112, 101, 101, 100, 0, 0, 0, 0, 0, 0, 0, 0, 3, 52, 48, 48, 46, 48, 0
	},
	{
		99, 108, 95, 102, 111, 114, 119, 97, 114, 100, 115, 112, 101, 101, 100, 0, 0, 0, 0, 0, 3, 52, 48, 48, 46, 48, 0
	},
	{
		99, 108, 95, 109, 111, 118, 101, 115, 112, 101, 101, 100, 107, 101, 121, 0, 0, 0, 0, 0, 4, 48, 46, 53, 50, 0, 0
	},
	{
		102, 112, 115, 95, 109, 97, 120, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 57, 57, 46, 53, 0, 0
	}
};
new g_szServerCvars[13][21] =
{
	{
		101, 100, 103, 101, 102, 114, 105, 99, 116, 105, 111, 110, 0, 0, 0, 0, 0, 0, 0, 0, 2
	},
	{
		109, 112, 95, 102, 111, 111, 116, 115, 116, 101, 112, 115, 0, 0, 0, 0, 0, 0, 0, 0, 1
	},
	{
		115, 118, 95, 103, 114, 97, 118, 105, 116, 121, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 800
	},
	{
		115, 118, 95, 97, 105, 114, 97, 99, 99, 101, 108, 101, 114, 97, 116, 101, 0, 0, 0, 0, 10
	},
	{
		115, 118, 95, 99, 104, 101, 97, 116, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
	},
	{
		115, 118, 95, 109, 97, 120, 115, 112, 101, 101, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 320
	},
	{
		115, 118, 95, 115, 116, 101, 112, 115, 105, 122, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18
	},
	{
		115, 118, 95, 109, 97, 120, 118, 101, 108, 111, 99, 105, 116, 121, 0, 0, 0, 0, 0, 0, 2000
	},
	{
		115, 118, 95, 119, 97, 116, 101, 114, 97, 99, 99, 101, 108, 101, 114, 97, 116, 101, 0, 0, 10
	},
	{
		115, 118, 95, 115, 116, 111, 112, 115, 112, 101, 101, 100, 0, 0, 0, 0, 0, 0, 0, 0, 75
	},
	{
		115, 118, 95, 97, 99, 99, 101, 108, 101, 114, 97, 116, 101, 0, 0, 0, 0, 0, 0, 0, 5
	},
	{
		115, 118, 95, 102, 114, 105, 99, 116, 105, 111, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4
	},
	{
		115, 118, 95, 119, 97, 116, 101, 114, 102, 114, 105, 99, 116, 105, 111, 110, 0, 0, 0, 0, 1
	}
};
new g_szWeaponsNames[29][0] =
{
	{
		112, ...
	},
	{
		115, ...
	},
	{
		104, ...
	},
	{
		120, ...
	},
	{
		99, ...
	},
	{
		109, ...
	},
	{
		97, ...
	},
	{
		115, ...
	},
	{
		101, ...
	},
	{
		102, ...
	},
	{
		117, ...
	},
	{
		115, ...
	},
	{
		103, ...
	},
	{
		102, ...
	},
	{
		117, ...
	},
	{
		103, ...
	},
	{
		97, ...
	},
	{
		109, ...
	},
	{
		109, ...
	},
	{
		109, ...
	},
	{
		109, ...
	},
	{
		116, ...
	},
	{
		103, ...
	},
	{
		102, ...
	},
	{
		100, ...
	},
	{
		115, ...
	},
	{
		97, ...
	},
	{
		107, ...
	},
	{
		112, ...
	}
};
new bool:g_bHookUsed[33];
new bool:g_bNoclipUsed[33];
new bool:g_bPauseUsed[33];
new g_szPlayerRecordTime[14];
new g_MainMenuID;
new g_SettingsMenuID1;
new g_SettingsMenuID2;
new g_SettingsMenuID3;
new g_SettingsMenuID4;
new g_SettingsMenuID5;
new g_BotSettingsMenuID;
new g_pRoundtime;
new Float:g_flRoundStartTime;
new bool:g_bZeroMpTime;
new Float:g_flDefStartOrigin[3];
new Float:g_flDefStartAngle[3];
new g_ProTopLocalhost[10];
new g_szProTopPlayer[10][32];
new g_szProTopTimer[10][22];
new g_szProTopSec[10][22];
new g_szProTopDate[10][22];
new g_szProTopWeapon[10][22];
new g_NubTopLocalhost[10];
new g_szNubTopPlayer[10][32];
new g_szNubTopTimer[10][22];
new g_szNubTopSec[10][22];
new g_szNubTopDate[10][22];
new g_szNubTopWeapon[10][22];
new g_szNubTopCP[10][22];
new g_szNubTopGC[10][22];
new Float:g_flTimerStarted[33];
new Float:g_flTimerPaused[33];
new bool:g_bRunFinished[33];
new bool:g_bPlayerShowTimer[33];
new Float:g_flPlayerStartOrigin[33][3];
new Float:g_flPlayerStartAngle[33][3];
new Float:g_flPlayerStartGravity[33];
new Float:g_flCheckPointOrigin[33][3];
new Float:g_flCheckPointAngle[33][3];
new Float:g_flGravity[33];
new Float:g_flPrevCheckPointOrigin[33][3];
new Float:g_flPrevCheckPointAngle[33][3];
new Float:g_flPrevGravity[33];
new bool:g_bIsUsingHook[33];
new g_iHookOrigin[33][3];
new Float:g_flHookWallOrigin[33][3];
new g_szPlayerSettings[33][192];
new g_bAllowStuffCmd[33];
new bool:g_bNotFirstSpawn[33];
new bool:g_bSawMotd[33];
new g_iCheckPointCounter[33];
new g_iGoCheckCounter[33];
new g_bsSpecWeapons[33];
new Float:g_flSpecOrigin[33][3];
new Float:g_flSpecAngle[33][3];
new Float:g_flSpecGravity[33];
new Array:g_aSpecs[33];
new g_iSpecButtons[33];
new String:g_szBotButtonsClass[44] = "BotButtons";
new g_hcvarSpecList;
new g_cvarSpecList;
new g_hcvarHidden;
new g_cvarHidden;
new g_hcvarSpecKeys;
new g_cvarSpecKeys;
new g_hcvarShowKeys;
new g_cvarShowKeys;
new g_cvarSpecRed;
new g_cvarSpecGreen;
new g_cvarSpecBlue;
new Float:g_cvarSpecX;
new Float:g_cvarSpecYAlive;
new Float:g_cvarSpecYDead;
new g_cvarSemiclip;
new g_cvarTranspRadius;
new g_setSpecList[33];
new g_setHidden[33];
new g_setSpecKeys[33];
new g_setShowKeys[33];
new g_setInvis[33];
new g_cvarMode;
new g_hcvarMode;
new g_cvarBlockct;
new g_hcvarBlockct;
new g_cvarTimer;
new g_hcvarTimer;
new g_cvarLoadrecords;
new g_hcvarLoadrecords;
new g_cvarAutomode;
new g_hcvarAutomode;
new g_cvarMpbhop;
new g_hcvarMpbhop;
new g_cvarMainmenu;
new g_hcvarMainmenu;
new g_cvarChatmsg;
new g_hcvarChatmsg;
new g_cvarRecordmsgMode;
new g_hcvarRecordmsgMode;
new g_cvarCurrentRecordmsg;
new g_hcvarCurrentRecordmsg;
new g_cvarRecordDiff;
new g_hcvarRecordDiff;
new g_cvarAttempts;
new g_hcvarAttempts;
new g_cvarAllchat;
new g_hcvarAllchat;
new g_cvarAxnbhop;
new g_hcvarAxnbhop;
new g_cvarAutoheal;
new g_hcvarAutoheal;
new g_cvarShowdamage;
new g_hcvarShowdamage;
new g_cvarSetstarttouch;
new g_hcvarSetstarttouch;
new g_cvarBlockmapsound;
new g_hcvarBlockmapsound;
new g_cvarBlockweapons;
new g_hcvarBlockweapons;
new g_cvarCheckpoints;
new g_hcvarCheckpoints;
new g_cvarAllowaircp;
new g_hcvarAllowaircp;
new g_cvarGcdemo;
new g_hcvarGcdemo;
new g_cvarLoadAngles;
new g_hcvarLoadAngles;
new g_cvarCheckpointmsg;
new g_hcvarCheckpointmsg;
new g_cvarGocheckmsg;
new g_hcvarGocheckmsg;
new g_cvarTop;
new g_hcvarTop;
new g_cvarTopalone;
new g_hcvarTopalone;
new g_cvarShowplace;
new g_hcvarShowplace;
new g_cvarFinishmsgMode;
new g_hcvarFinishmsgMode;
new g_cvarFinishsoundMode;
new g_hcvarFinishsoundMode;
new g_hcvarFinishmsgText;
new g_cvarFinishred;
new g_cvarFinishgreen;
new g_cvarFinishblue;
new g_hcvarFinishsoundSource;
new g_cvarDamagered;
new g_cvarDamagegreen;
new g_cvarDamageblue;
new g_cvarHookspeed;
new g_cvarHookred;
new g_cvarHookgreen;
new g_cvarHookblue;
new g_hcvarName;
new g_cvarPlayerModel;
new g_hcvarPlayerModel;
new g_cvarBotDownload;
new g_hcvarBotDownload;
new g_cvarBotRemoveOld;
new g_hcvarBotRemoveOld;
new g_cvarBotShowOnlyNew;
new g_hcvarBotShowOnlyNew;
new g_cvarBotAutoCreate;
new g_hcvarBotAutoCreate;
new g_cvarBotUseCmd;
new g_hcvarBotUseCmd;
new g_cvarBotSync;
new g_hcvarBotSync;
new g_cvarBotStep;
new g_cvarBotSpeed;
new g_cvarNewNightVision;
new g_cvarRemoveEquip;
new g_hResetBugForward;
new g_hRecordingStartedForward;
new g_hRecordingStoppedForward;
new g_hTimerStartedForward;
new Array:g_aOnce;
new Trie:g_tOnce;
new Trie:g_tWallToggles;
new szStartTargets[10][0] =
{
	{
		99, ...
	},
	{
		99, ...
	},
	{
		102, ...
	},
	{
		98, ...
	},
	{
		99, ...
	},
	{
		109, ...
	},
	{
		116, ...
	},
	{
		115, ...
	},
	{
		103, ...
	},
	{
		115, ...
	}
};
new szFinishTargets[9][0] =
{
	{
		99, ...
	},
	{
		99, ...
	},
	{
		99, ...
	},
	{
		98, ...
	},
	{
		99, ...
	},
	{
		109, ...
	},
	{
		115, ...
	},
	{
		109, ...
	},
	{
		115, ...
	}
};
new g_iNightvision[33];
new g_default_map_light[32];
new g_fwLightStyle;
new g_msgScreenFade;
new g_bitPresentClass;
new g_iBlock[33];
new Float:g_flFirstTouch[33];
new Float:g_flJumpOrigin[33][3];
new Float:g_flJumpAngles[33][3];
new Float:g_flJumpGravity[33];
new bool:g_bOnFreezedBlock[33];
new bool:g_bBlocks[2048];
new bool:g_bBlocksByPlugin[2048];
new bool:g_bOnGround[33];
new bool:g_bTeleported[33];
new bool:g_bMpbhopActive;
new g_iAdminDoor[33];
new g_szMpbhopConfig[64];
new Trie:g_tBlocksClass;
new g_iMaxEnts;
new bool:g_bMapHasRotating;
new g_iWaterGroup;
new g_bitIsPlayerInSphere;
new bool:g_bWaterOnMap;
new g_bWaterEnts[64];
new g_iPlayers[32];
new g_iNum;
new g_iLastPlayerIndex;
new g_iLastSpecPlayerIndex;
new bool:g_bReadPackets;
new bool:g_bClientMessages;
new Float:g_flOrigin[33][3];
new Float:g_flPrevOrigin[33][3];
new Float:g_flAngles[33][3];
new Float:g_flPrevAngles[33][3];
new Float:g_flVelocity[33][3];
new Float:g_flPrevVelocity[33][3];
new g_iFlags[33];
new g_iPrevFlags[33];
new Float:g_flFrameTime[33];
new Float:g_flPrevFrameTime[33];
new Float:g_flForwardMove[33];
new Float:g_flPrevForwardMove[33];
new Float:g_flSideMove[33];
new Float:g_flPrevSideMove[33];
new g_iButtons[33];
new g_iPrevButtons[33];
new g_iOldButtons[33];
new Float:g_flFuser2[33];
new Float:g_flPrevFuser2[33];
new Float:g_flWishdir[33][3];
new Float:g_flNewOrigin[33][3];
new Float:g_flNewVel[33][3];
new Float:g_flDuckTime[33];
new bool:g_bInDuck[33];
new bool:g_bWater[33];
new bool:g_bPrevWater[33];
new bool:g_bLadder[33];
new bool:g_bPrevLadder[33];
new bool:g_bHook[33];
new bool:g_bPrevHook[33];
new g_iTouched[33];
abs(x)
{
	new var1;
	if (x > 0)
	{
		var1 = x;
	}
	else
	{
		var1 = -x;
	}
	return var1;
}

Float:operator-(Float:)(Float:oper)
{
	return oper ^ -2147483648;
}

Float:operator*(Float:,_:)(Float:oper1, oper2)
{
	return floatmul(oper1, float(oper2));
}

Float:operator/(Float:,_:)(Float:oper1, oper2)
{
	return floatdiv(oper1, float(oper2));
}

Float:operator/(_:,Float:)(oper1, Float:oper2)
{
	return floatdiv(float(oper1), oper2);
}

Float:operator+(Float:,_:)(Float:oper1, oper2)
{
	return floatadd(oper1, float(oper2));
}

Float:operator-(Float:,_:)(Float:oper1, oper2)
{
	return floatsub(oper1, float(oper2));
}

bool:operator==(Float:,Float:)(Float:oper1, Float:oper2)
{
	return floatcmp(oper1, oper2) == 0;
}

bool:operator==(Float:,_:)(Float:oper1, oper2)
{
	return floatcmp(oper1, float(oper2)) == 0;
}

bool:operator!=(Float:,Float:)(Float:oper1, Float:oper2)
{
	return floatcmp(oper1, oper2) != 0;
}

bool:operator>(Float:,Float:)(Float:oper1, Float:oper2)
{
	return 0 < floatcmp(oper1, oper2);
}

bool:operator>(Float:,_:)(Float:oper1, oper2)
{
	return 0 < floatcmp(oper1, float(oper2));
}

bool:operator>=(Float:,Float:)(Float:oper1, Float:oper2)
{
	return 0 <= floatcmp(oper1, oper2);
}

bool:operator<(Float:,Float:)(Float:oper1, Float:oper2)
{
	return 0 > floatcmp(oper1, oper2);
}

bool:operator<=(Float:,Float:)(Float:oper1, Float:oper2)
{
	return 0 >= floatcmp(oper1, oper2);
}

bool:operator!(Float:)(Float:oper)
{
	return oper & -1 == 0;
}

replace_all(string[], len, what[], with[])
{
	new pos;
	if ((pos = contain(string, what)) == -1)
	{
		return 0;
	}
	new total;
	new with_len = strlen(with);
	new diff = strlen(what) - with_len;
	new total_len = strlen(string);
	new temp_pos;
	while (replace(string[pos], len - pos, what, with))
	{
		total++;
		pos = with_len + pos;
		total_len -= diff;
		if (!(pos >= total_len))
		{
			temp_pos = contain(string[pos], what);
			if (!(temp_pos == -1))
			{
				pos = temp_pos + pos;
			}
			return total;
		}
		return total;
	}
	return total;
}

fm_get_brush_entity_origin(index, Float:origin[3])
{
	new Float:mins[3] = 0.0;
	new Float:maxs[3] = 0.0;
	pev(index, 118, origin);
	pev(index, 131, mins);
	pev(index, 132, maxs);
	new var1 = origin;
	var1[0] = floatadd(var1[0], floatmul(1056964608, floatadd(mins[0], maxs[0])));
	new var2 = origin[1];
	var2 = floatadd(var2, floatmul(1056964608, floatadd(mins[1], maxs[1])));
	new var3 = origin[2];
	var3 = floatadd(var3, floatmul(1056964608, floatadd(mins[2], maxs[2])));
	return 1;
}

public __fatal_ham_error(Ham:id, HamError:err, reason[])
{
	new func = get_func_id(xs__ITaskId, -1);
	new bool:fail = 1;
	new var1;
	if (func != -1 && callfunc_begin_i(func, -1) == 1)
	{
		callfunc_push_int(id);
		callfunc_push_int(err);
		callfunc_push_str(reason, xs__ITaskId);
		if (callfunc_end() == 1)
		{
			fail = false;
		}
	}
	if (fail)
	{
		set_fail_state(reason);
	}
	return 0;
}

is_zero_vec(Float:flVec[3])
{
	new var1;
	return flVec[0] == 0.0 && flVec[1] == 0.0 && flVec[2] == 0.0;
}

are_vectors_equal(Float:flVec1[3], Float:flVec2[3])
{
	new var1;
	return flVec1[0] == flVec2[0] && flVec1[1] == flVec2[1] && flVec1[2] == flVec2[2];
}

are_vectors_almost_equal(Float:flVec1[3], Float:flVec2[3], Float:flDelta)
{
	new var1;
	return floatabs(floatsub(flVec1[0], flVec2[0])) < flDelta && floatabs(floatsub(flVec1[1], flVec2[1])) < flDelta && floatabs(floatsub(flVec1[2], flVec2[2])) < flDelta;
}

vector_copy(Float:flVec1[3], Float:flVec2[3])
{
	flVec2[0] = flVec1[0];
	flVec2[1] = flVec1[1];
	flVec2[2] = flVec1[2];
	return 0;
}

vector_scale(Float:flVec1[3], Float:flFactor, Float:flVec2[3])
{
	flVec2[0] = floatmul(flVec1[0], flFactor);
	flVec2[1] = floatmul(flVec1[1], flFactor);
	flVec2[2] = floatmul(flVec1[2], flFactor);
	return 0;
}

Float:vector_dot(Float:flVec1[3], Float:flVec2[3])
{
	return floatadd(floatadd(floatmul(flVec1[0], flVec2[0]), floatmul(flVec1[1], flVec2[1])), floatmul(flVec1[2], flVec2[2]));
}

vector_cross(Float:flVec1[3], Float:flVec2[3], Float:flVec3[3])
{
	flVec3[0] = floatsub(floatmul(flVec1[1], flVec2[2]), floatmul(flVec1[2], flVec2[1]));
	flVec3[1] = floatsub(floatmul(flVec1[2], flVec2[0]), floatmul(flVec1[0], flVec2[2]));
	flVec3[2] = floatsub(floatmul(flVec1[0], flVec2[1]), floatmul(flVec1[1], flVec2[0]));
	return 0;
}

get_player_position(id, Float:flOrigin[3], Float:flAngles[3], &Float:flGravity)
{
	pev(id, 118, flOrigin);
	pev(id, 126, flAngles);
	pev(id, 34, flGravity);
	return 0;
}

set_player_origin(id, Float:flOrigin[3], Float:flAngles[3], Float:flGravity, Float:flFuser2)
{
	new iFlags = pev(id, 84);
	iFlags &= -4194305;
	iFlags |= 16384;
	set_pev(id, 84, iFlags);
	new Float:VEC_DUCK_HULL_MIN[3] = {4.6188E-41,4.6188E-41,5.1928E-41};
	new Float:VEC_DUCK_HULL_MAX[3] = {4.6009E-41,4.6009E-41,9.2E-44};
	new Float:VEC_DUCK_VIEW[3] = {0.0,0.0,2.305E-41};
	engfunc(5, id, VEC_DUCK_HULL_MIN, VEC_DUCK_HULL_MAX);
	engfunc(26, id, flOrigin);
	set_pev(id, 135, VEC_DUCK_VIEW);
	set_pev(id, "say .%s", VEC_NULL);
	set_pev(id, 121, VEC_NULL);
	if (flGravity > 0.0)
	{
		set_pev(id, 34, flGravity);
	}
	set_pev(id, 60, flFuser2);
	if (!is_zero_vec(flAngles))
	{
		set_pev(id, 126, VEC_NULL);
		set_pev(id, 124, flAngles);
		set_pev(id, 140, VEC_NULL);
		set_pev(id, 65, 1);
	}
	return 0;
}

register_cmd(command[], function[], flags, info[])
{
	new szTemp[64];
	formatex(szTemp, 63, "say /%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "say .%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "say_team /%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "say_team .%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "/%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, ".%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	return 0;
}

register_saycmd(command[], function[], flags, info[])
{
	new szTemp[64];
	formatex(szTemp, 63, "say /%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "say .%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "say_team /%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	formatex(szTemp, 63, "say_team .%s", command);
	register_clcmd(szTemp, function, flags, info, -1);
	return 0;
}

send_cmd(id, text[])
{
	message_begin(1, 51, 456, id);
	write_byte(strlen(text) + 2);
	write_byte(10);
	write_string(text);
	message_end();
	return 0;
}

ham_give_weapon_by_name(id, weapon[])
{
	if (!equal(weapon, "weapon_", 7))
	{
		return 0;
	}
	new wEnt = engfunc(21, engfunc(43, weapon));
	if (!pev_valid(wEnt))
	{
		return 0;
	}
	set_pev(wEnt, 83, 1073741824);
	dllfunc(1, wEnt);
	if (!ExecuteHamB(20, id, wEnt))
	{
		if (pev_valid(wEnt))
		{
			set_pev(wEnt, 84, pev(wEnt, 84) | 1073741824);
		}
		return 0;
	}
	ExecuteHamB(74, wEnt, id);
	return 1;
}

ham_strip_weapon_by_name(id, weapon[])
{
	if (!equal(weapon, "weapon_", 7))
	{
		return 0;
	}
	new wId = get_weaponid(weapon);
	if (!wId)
	{
		return 0;
	}
	new wEnt;
	while ((wEnt = engfunc(12, wEnt, "classname", weapon)) && id != pev(wEnt, 18))
	{
	}
	if (!wEnt)
	{
		return 0;
	}
	if (wId == get_user_weapon(id, 0, 0))
	{
		ExecuteHamB(91, wEnt);
	}
	if (!ExecuteHamB(21, id, wEnt))
	{
		return 0;
	}
	ExecuteHamB(73, wEnt);
	set_pev(id, 79, ~1 << wId & pev(id, 79));
	return 1;
}

delete_ent_by_class(classname[])
{
	new ent = find_ent_by_class(ent, classname);
	while (ent)
	{
		remove_entity(ent);
		ent = find_ent_by_class(ent, classname);
	}
	return 0;
}

string_timer(Float:flRealTime, szOutPut[], iSizeOutPut, iMilliSecNumber, gametime)
{
	static iSeconds;
	static iMinutes;
	static Float:flTime;
	if (gametime)
	{
		flTime = floatsub(get_gametime(), flRealTime);
	}
	else
	{
		flTime = flRealTime;
	}
	if (flTime < 0.0)
	{
		flTime = -flTime;
	}
	iMinutes = floatround(flTime / 60, 1);
	iSeconds = floatround(flTime - iMinutes * 60, 1);
	if (iMinutes <= 99)
	{
		formatex(szOutPut, iSizeOutPut, "%02d:%02d", iMinutes, iSeconds);
	}
	else
	{
		formatex(szOutPut, iSizeOutPut, "%d:%02d", iMinutes, iSeconds);
	}
	static iMilliSeconds;
	if (iMilliSecNumber == 1)
	{
		iMilliSeconds = floatround(flTime - iSeconds + iMinutes * 60 * 10, 1);
		format(szOutPut, iSizeOutPut, "%s.%01d", szOutPut, iMilliSeconds);
	}
	else
	{
		if (iMilliSecNumber == 2)
		{
			iMilliSeconds = floatround(flTime - iSeconds + iMinutes * 60 * 100, 1);
			format(szOutPut, iSizeOutPut, "%s.%02d", szOutPut, iMilliSeconds);
		}
		if (iMilliSecNumber == 3)
		{
			iMilliSeconds = floatround(flTime - iSeconds + iMinutes * 60 * 1000, 1);
			format(szOutPut, iSizeOutPut, "%s.%03d", szOutPut, iMilliSeconds);
		}
	}
	return 0;
}

Float:float_timer(szInPut[])
{
	new Float:flTime = 0.0;
	new var1;
	if (szInPut[2] == 58 && szInPut[5] == 46)
	{
		flTime = floatadd(flTime, floatadd(1142292480 * szInPut[0] - 48, 1114636288 * szInPut[1] - 48));
		flTime = floatadd(flTime, 1092616192 * szInPut[3] - 48 + szInPut[4] - 48);
		flTime = floatadd(flTime, floatadd(szInPut[6] - 48 / 1092616192, szInPut[7] - 48 / 1120403456));
	}
	else
	{
		flTime = str_to_float(szInPut);
	}
	return flTime;
}

show_my_menu(index, keys, menu[], time, title[])
{
	set_pdata_int(index, 205, xs__ITaskId, 5, 5);
	show_menu(index, keys, menu, time, title);
	return 0;
}

is_player_sliding(id)
{
	if (!is_user_alive(id))
	{
		return 0;
	}
	new iFlags = pev(id, 84);
	if (iFlags & 512)
	{
		return 0;
	}
	new Float:origin[3] = 0.0;
	new Float:dest[3] = 0.0;
	pev(id, 118, origin);
	dest[0] = origin[0];
	dest[1] = origin[1];
	dest[2] = floatsub(origin[2], 1065353216);
	new ptr = create_tr2();
	new var1;
	if (iFlags & 16384)
	{
		var1 = 3;
	}
	else
	{
		var1 = 1;
	}
	engfunc(32, origin, dest, 0, var1, id, ptr);
	new Float:flFraction = 0.0;
	get_tr2(ptr, 4, flFraction);
	if (flFraction >= 1.0)
	{
		free_tr2(ptr);
		return 0;
	}
	get_tr2(ptr, 7, dest);
	free_tr2(ptr);
	return dest[2] <= 1060320051;
}

is_user_localhost(id)
{
	new szIP[16];
	get_user_ip(id, szIP, 15, 1);
	new var1;
	if (equal(szIP, "loopback", xs__ITaskId) || equal(szIP, "127.0.0.1", xs__ITaskId))
	{
		return 1;
	}
	return 0;
}

get_localhost()
{
	new players[32];
	new pnum;
	get_players(players, pnum, 832, 836);
	new i;
	while (i < pnum)
	{
		if (is_user_localhost(players[i]))
		{
			return players[i];
		}
		i++;
	}
	return 0;
}

set_dhudmessage(red, green, blue, Float:x, Float:y, effects, Float:fxtime, Float:holdtime, Float:fadeintime, Float:fadeouttime, bool:reliable)
{
	g_iDHudProperties[0] = clamp(red, xs__ITaskId, "") << 16 + clamp(green, xs__ITaskId, "") << 8 + clamp(blue, xs__ITaskId, "");
	g_iDHudProperties[2] = x;
	g_iDHudProperties[3] = y;
	g_iDHudProperties[1] = effects;
	g_iDHudProperties[4] = fxtime;
	g_iDHudProperties[5] = holdtime;
	g_iDHudProperties[6] = fadeintime;
	g_iDHudProperties[7] = fadeouttime;
	g_iDHudProperties[8] = reliable;
	return 0;
}

show_dhudmessage(id, szMsg[])
{
	if (!id)
	{
		new iPlayers[32];
		new iNum;
		get_players(iPlayers, iNum, "ch", 836);
		if (!iNum)
		{
			return 0;
		}
	}
	if (!is_user_connected(id))
	{
		return 0;
	}
	new szMessage[128];
	new iParams = numargs();
	if (iParams == 2)
	{
		copy(szMessage, 127, szMsg);
	}
	else
	{
		vformat(szMessage, 127, szMsg, "");
	}
	Send_DHudMessage(id, szMessage);
	return 0;
}

Send_DHudMessage(iReceiver, szMessage[])
{
	new var2;
	if (g_iDHudProperties[8])
	{
		new var1;
		if (iReceiver)
		{
			var1 = 1;
		}
		else
		{
			var1 = 2;
		}
		var2 = var1;
	}
	else
	{
		if (iReceiver)
		{
			var2 = 8;
		}
		var2 = 0;
	}
	message_begin(var2, 51, 456, iReceiver);
	write_byte(strlen(szMessage) + 31);
	write_byte(6);
	write_byte(g_iDHudProperties[1]);
	write_long(g_iDHudProperties[0]);
	write_long(g_iDHudProperties[2]);
	write_long(g_iDHudProperties[3]);
	write_long(g_iDHudProperties[6]);
	write_long(g_iDHudProperties[7]);
	write_long(g_iDHudProperties[5]);
	write_long(g_iDHudProperties[4]);
	write_string(szMessage);
	message_end();
	return 0;
}

client_print_f(id, ColorType:type, msg[])
{
	new message[256];
	switch (type)
	{
		case 1:
		{
			message[0] = 1;
		}
		case 2:
		{
			message[0] = 4;
		}
		default:
		{
			message[0] = 3;
		}
	}
	vformat(message[1], 251, msg, 4);
	message[192] = 0;
	new team;
	new ColorChange;
	new index;
	new MSG_Type;
	if (id)
	{
		MSG_Type = 1;
		index = id;
	}
	else
	{
		index = FindPlayer();
		MSG_Type = 2;
	}
	team = get_user_team(index, {0}, xs__ITaskId);
	new var1;
	if (team >= 0 && team < 4)
	{
		ColorChange = ColorSelection(index, MSG_Type, type);
		ShowColorMessage(index, MSG_Type, message);
		if (ColorChange)
		{
			Team_Info(index, MSG_Type, Team_Name[team]);
		}
	}
	return 0;
}

ShowColorMessage(id, type, message[])
{
	static bool:saytext_used;
	static get_user_msgid_saytext;
	if (!saytext_used)
	{
		get_user_msgid_saytext = get_user_msgid("SayText");
		saytext_used = true;
	}
	message_begin(type, get_user_msgid_saytext, 456, id);
	write_byte(id);
	write_string(message);
	message_end();
	return 0;
}

Team_Info(id, type, team[])
{
	static bool:teaminfo_used;
	static get_user_msgid_teaminfo;
	if (!teaminfo_used)
	{
		get_user_msgid_teaminfo = get_user_msgid("TeamInfo");
		teaminfo_used = true;
	}
	message_begin(type, get_user_msgid_teaminfo, 456, id);
	write_byte(id);
	write_string(team);
	message_end();
	return 1;
}

ColorSelection(index, type, ColorType:Type)
{
	switch (Type)
	{
		case 4:
		{
			new var1 = Team_Name;
			return Team_Info(index, type, var1[0][var1]);
		}
		case 5:
		{
			return Team_Info(index, type, Team_Name[1]);
		}
		case 6:
		{
			return Team_Info(index, type, Team_Name[2]);
		}
		default:
		{
			return 0;
		}
	}
}

FindPlayer()
{
	new i = -1;
	while (get_maxplayers() >= i)
	{
		i++;
		if (is_user_connected(i))
		{
			return i;
		}
	}
	return -1;
}

CvarRegisterBoolean(name[], string[], description[], flags)
{
	return CvarRegister(name, string, description, flags, 1, xs__ITaskId, 1, 1065353216, xs__ITaskId);
}

public plugin_precache()
{
	OrpheuRegisterHook(OrpheuGetFunction("InstallGameRules", 360724), "Orpheu_InstallGameRules", 1);
	RegisterHam(xs__ITaskId, "func_door", "hamDoorSpawn_P", 1);
	g_fwLightStyle = register_forward(39, "fw_LightStyle", xs__ITaskId);
	g_hBeamSprite = precache_model("sprites/plasma.spr");
	precache_sound("misc/ownage.wav");
	precache_sound("misc/mod_godlike.wav");
	precache_sound("misc/mod_wickedsick.wav");
	precache_sound("misc/perfect.wav");
	precache_sound("misc/impressive.wav");
	precache_sound("misc/holyshit.wav");
	get_mapname(g_szMapName, 33);
	new szSilentMaps[128];
	get_localinfo("amxx_datadir", szSilentMaps, 127);
	format(szSilentMaps, 127, "%s/%s", szSilentMaps, g_szSilentMapsFile);
	if (file_exists(szSilentMaps))
	{
		new f = fopen(szSilentMaps, "rt");
		new szData[50];
		while (!feof(f))
		{
			fgets(f, szData, 49);
			trim(szData);
			new var1;
			if (!(!szData[0] || szData[0] == 10 || szData[0] == 59))
			{
				if (equali(szData, g_szMapName, xs__ITaskId))
				{
					RegisterHam(xs__ITaskId, "ambient_generic", "CAmbientGeneric_Spawn", xs__ITaskId);
					fclose(f);
				}
			}
		}
		fclose(f);
	}
	else
	{
		new f = fopen(szSilentMaps, "at");
		fclose(f);
	}
	g_tStarts = TrieCreate();
	g_tStops = TrieCreate();
	new i;
	while (i < 10)
	{
		TrieSetCell(g_tStarts, szStartTargets[i], i);
		i++;
	}
	new i;
	while (i < 9)
	{
		TrieSetCell(g_tStops, szFinishTargets[i], i);
		i++;
	}
	g_tStartSounds = TrieCreate();
	new szStartSounds[6][] = {
		{
			37, ...
		},
		{
			37, ...
		},
		{
			37, ...
		},
		{
			37, ...
		},
		{
			37, ...
		},
		{
			37, ...
		}
	};
	new i;
	while (i < 6)
	{
		TrieSetCell(g_tStartSounds, szStartSounds[i], i);
		i++;
	}
	g_tCommunities = TrieCreate();
	g_tPlayerCvars = TrieCreate();
	new datas[8];
	new i;
	while (i < 7)
	{
		datas[0] = g_szPlayerCvars[i][20];
		datas[1] = i;
		copy(datas[2], 5, g_szPlayerCvars[i][21]);
		TrieSetString(g_tPlayerCvars, g_szPlayerCvars[i], datas);
		i++;
	}
	return 0;
}

public plugin_cfg()
{
	if (g_cvarRemoveEquip)
	{
		delete_ent_by_class("game_player_equip");
		delete_ent_by_class("player_weaponstrip");
	}
	server_cmd("mp_freezetime 0");
	new pFreezetime = get_cvar_pointer("mp_freezetime");
	set_pcvar_num(pFreezetime, xs__ITaskId);
	g_aOnce = ArrayCreate(74, 32);
	g_tOnce = TrieCreate();
	g_tWallToggles = TrieCreate();
	new iEntity;
	new onceent[74];
	new Float:flOrigin[3] = 0.0;
	new Float:flMins[3] = 0.0;
	new Float:flMaxs[3] = 0.0;
	new szModel[32];
	new szTarget[32];
	while (0 < (iEntity = find_ent_by_class(iEntity, "trigger_once")))
	{
		onceent[0] = iEntity;
		entity_get_vector(iEntity, xs__ITaskId, flOrigin);
		onceent[1] = flOrigin[0];
		onceent[2] = flOrigin[1];
		onceent[3] = flOrigin[2];
		entity_get_vector(iEntity, 14, flMins);
		onceent[4] = flMins[0];
		onceent[5] = flMins[1];
		onceent[6] = flMins[2];
		entity_get_vector(iEntity, 15, flMaxs);
		onceent[7] = flMaxs[0];
		onceent[8] = flMaxs[1];
		onceent[9] = flMaxs[2];
		entity_get_string(iEntity, 2, szModel, 31);
		formatex(onceent[10], 31, szModel);
		entity_get_string(iEntity, "", szTarget, 31);
		formatex(onceent[42], 31, szTarget);
		TrieSetCell(g_tWallToggles, szTarget, xs__ITaskId);
		ArrayPushArray(g_aOnce, onceent);
	}
	return 0;
}

public plugin_init()
{
	register_plugin("KZ Demo", "4.8.2", "Kpoluk");
	register_clcmd("nightvision", "giveNightvision", -1, 362640, -1);
	register_saycmd("noclip", "cmdNoclip", -1, {0});
	register_saycmd("nc", "cmdNoclip", -1, {0});
	register_saycmd("godmode", "cmdGodMode", -1, {0});
	register_saycmd("god", "cmdGodMode", -1, {0});
	register_saycmd("checkpoint", "cmdCheckPoint", -1, {0});
	register_cmd("cp", "cmdCheckPoint", -1, {0});
	register_saycmd("gocheck", "cmdGoCheck", -1, {0});
	register_cmd("gc", "cmdGoCheck", -1, {0});
	register_cmd("tp", "cmdGoCheck", -1, {0});
	register_saycmd("stuck", "cmdStuck", -1, {0});
	register_saycmd("start", "cmdDemo", -1, {0});
	register_saycmd("gostart", "cmdStartPoint", -1, {0});
	register_saycmd("spawn", "cmdSpawn", -1, {0});
	register_saycmd("respawn", "cmdSpawn", -1, {0});
	register_saycmd("resp", "cmdSpawn", -1, {0});
	register_saycmd("setstart", "cmdSetStartPoint", -1, {0});
	register_saycmd("savestart", "cmdSetStartPoint", -1, {0});
	register_saycmd("ss", "cmdSetStartPoint", -1, {0});
	register_saycmd("savepos", "cmdSavePos", -1, {0});
	register_saycmd("save", "cmdSavePos", -1, {0});
	register_saycmd("loadpos", "cmdLoadPos", -1, {0});
	register_saycmd("load", "cmdLoadPos", -1, {0});
	register_saycmd("uptime", "cmdUpTime", -1, {0});
	register_saycmd("up", "cmdUpTime", -1, {0});
	register_saycmd("timer", "cmdTimer", -1, {0});
	register_saycmd("pause", "cmdPause", -1, {0});
	register_saycmd("unpause", "cmdPause", -1, {0});
	register_saycmd(364532, "cmdPause", -1, {0});
	register_saycmd("spec", "cmdChangeTeam", -1, {0});
	register_saycmd("ct", "cmdChangeTeam", -1, {0});
	register_cmd("demo", "cmdDemo", -1, {0});
	register_cmd("kzdemo", "cmdDemo", -1, {0});
	register_cmd("record", "cmdDemo", -1, {0});
	register_cmd("restart", "cmdDemo", -1, {0});
	register_cmd("ljdemo", "cmdDemo", -1, {0});
	register_cmd("stop", "cmdStop", -1, {0});
	register_cmd("stoprecord", "cmdStop", -1, {0});
	register_saycmd("main", "cmdMainMenu", -1, {0});
	register_saycmd("startmenu", "cmdMainMenu", -1, {0});
	register_saycmd("menu", "cmdMainMenu", -1, {0});
	register_saycmd("settings", "cmdSettingsMenu", -1, {0});
	register_saycmd("setmenu", "cmdSettingsMenu", -1, {0});
	register_saycmd("options", "cmdSettingsMenu", -1, {0});
	register_saycmd("option", "cmdSettingsMenu", -1, {0});
	register_saycmd("botsettings", "cmdBotSettingsMenu", -1, {0});
	register_saycmd("end", "cmdFinishMenu", -1, {0});
	register_saycmd("endmenu", "cmdFinishMenu", -1, {0});
	register_saycmd("finish", "cmdFinishMenu", -1, {0});
	register_saycmd("finishmenu", "cmdFinishMenu", -1, {0});
	register_saycmd("nub", "cmdShowNubTop", -1, {0});
	register_saycmd("nub10", "cmdShowNubTop", -1, {0});
	register_saycmd("nub15", "cmdShowNubTop", -1, {0});
	register_saycmd("noob", "cmdShowNubTop", -1, {0});
	register_saycmd("noob10", "cmdShowNubTop", -1, {0});
	register_saycmd("noob15", "cmdShowNubTop", -1, {0});
	register_saycmd("pro", "cmdShowProTop", -1, {0});
	register_saycmd("pro10", "cmdShowProTop", -1, {0});
	register_saycmd("pro15", "cmdShowProTop", -1, {0});
	register_saycmd("top", "cmdTopMenu", -1, {0});
	register_saycmd("top10", "cmdTopMenu", -1, {0});
	register_saycmd("top15", "cmdTopMenu", -1, {0});
	register_saycmd("records", "cmdRecordsMOTD", -1, {0});
	register_saycmd("shortcut", "cmdShortcutsMOTD", -1, {0});
	register_saycmd("shortcuts", "cmdShortcutsMOTD", -1, {0});
	register_saycmd("sc", "cmdShortcutsMOTD", -1, {0});
	register_saycmd("server", "cmdServerMenu", -1, {0});
	register_saycmd("servers", "cmdServerMenu", -1, {0});
	register_saycmd("sound", "cmdStopSound", -1, {0});
	register_saycmd("music", "cmdStopSound", -1, {0});
	register_saycmd("weapons", "cmdWeapons", -1, {0});
	register_saycmd("weapon", "cmdWeapons", -1, {0});
	register_saycmd("weap", "cmdWeapons", -1, {0});
	register_saycmd("guns", "cmdWeapons", -1, {0});
	register_saycmd("usp", "cmdUSP", -1, {0});
	register_saycmd("knife", "cmdKNIFE", -1, {0});
	register_saycmd("scout", "cmdSCOUT", -1, {0});
	register_saycmd("deagle", "cmdDEAGLE", -1, {0});
	register_saycmd("p90", "cmdP90", -1, {0});
	register_saycmd("famas", "cmdFAMAS", -1, {0});
	register_saycmd("sg", "cmdSG552", -1, {0});
	register_saycmd("sg552", "cmdSG552", -1, {0});
	register_saycmd("m4a1", "cmdM4A1", -1, {0});
	register_saycmd("m4", "cmdM4A1", -1, {0});
	register_saycmd("ak", "cmdAK47", -1, {0});
	register_saycmd("ak47", "cmdAK47", -1, {0});
	register_saycmd("m249", "cmdM249", -1, {0});
	register_saycmd("awp", "cmdAWP", -1, {0});
	register_saycmd("savecvars", "cmdSaveCvars", -1, {0});
	register_saycmd("savesettings", "cmdSaveCvars", -1, {0});
	register_saycmd("savekz", "cmdSaveCvars", -1, {0});
	register_saycmd("savekzsettings", "cmdSaveCvars", -1, {0});
	register_clcmd("say", "cmdSay", -1, 362640, -1);
	register_clcmd("chooseteam", "cmdChooseTeam", -1, 362640, -1);
	register_clcmd("+hook", "hookOn", -1, 362640, -1);
	register_clcmd("-hook", "hookOff", -1, 362640, -1);
	register_clcmd("jointeam", "cmdJoinTeam", -1, 362640, -1);
	register_clcmd("joinclass", "cmdJoinClass", -1, 362640, -1);
	register_clcmd("menuselect", "cmdJoinClass", -1, 362640, -1);
	register_saycmd("invis", "cmdInvisMenu", -1, {0});
	register_saycmd("players", "cmdInvisPlayers", -1, {0});
	register_saycmd("water", "cmdInvisWater", -1, {0});
	register_saycmd("speclist", "cmdSpecList", -1, {0});
	register_saycmd("spechide", "cmdSpecHide", -1, {0});
	register_saycmd("speckeys", "cmdSpecKeys", -1, {0});
	register_saycmd("speckey", "cmdSpecKeys", -1, {0});
	register_saycmd("showkeys", "cmdShowKeys", -1, {0});
	register_saycmd("showkey", "cmdShowKeys", -1, {0});
	register_saycmd("keys", "cmdKeys", -1, {0});
	register_saycmd("key", "cmdKeys", -1, {0});
	register_clcmd("say /d", "cmdStrip", -1, 362640, -1);
	register_saycmd("version", "cmdVersion", -1, {0});
	new var4 = CvarRegister("kz_mode", 370772, 370780, xs__ITaskId, 1, xs__ITaskId, 1, 1073741824, 1);
	g_hcvarMode = var4;
	CvarCache(var4, xs__ITaskId, g_cvarMode);
	new var5 = CvarRegisterBoolean("kz_blockct", 370828, 370836, 0);
	g_hcvarBlockct = var5;
	CvarCache(var5, xs__ITaskId, g_cvarBlockct);
	new var6 = CvarRegister("kz_timer", 370876, 370884, xs__ITaskId, 1, xs__ITaskId, 1, 1073741824, 1);
	g_hcvarTimer = var6;
	CvarCache(var6, xs__ITaskId, g_cvarTimer);
	new var7 = CvarRegisterBoolean("kz_loadrecords", 370948, 370956, 0);
	g_hcvarLoadrecords = var7;
	CvarCache(var7, xs__ITaskId, g_cvarLoadrecords);
	new var8 = CvarRegisterBoolean("kz_automode", 371008, 371016, 0);
	g_hcvarAutomode = var8;
	CvarCache(var8, xs__ITaskId, g_cvarAutomode);
	new var9 = CvarRegisterBoolean("kz_mpbhop", 371060, 371068, 0);
	g_hcvarMpbhop = var9;
	CvarCache(var9, xs__ITaskId, g_cvarMpbhop);
	new var10 = CvarRegister("kz_mainmenu", 371120, 371128, xs__ITaskId, 1, xs__ITaskId, 1, 1073741824, 1);
	g_hcvarMainmenu = var10;
	CvarCache(var10, xs__ITaskId, g_cvarMainmenu);
	new var11 = CvarRegisterBoolean("kz_chatmsg", 371176, 371184, 0);
	g_hcvarChatmsg = var11;
	CvarCache(var11, xs__ITaskId, g_cvarChatmsg);
	new var12 = CvarRegister("kz_recordmsg_mode", 371260, 371268, xs__ITaskId, 1, xs__ITaskId, 1, 1077936128, 1);
	g_hcvarRecordmsgMode = var12;
	CvarCache(var12, xs__ITaskId, g_cvarRecordmsgMode);
	new var13 = CvarRegisterBoolean("kz_recordmsg_current", 371356, 371364, 0);
	g_hcvarCurrentRecordmsg = var13;
	CvarCache(var13, xs__ITaskId, g_cvarCurrentRecordmsg);
	new var14 = CvarRegisterBoolean("kz_recordmsg_diff", 371440, 371448, 0);
	g_hcvarRecordDiff = var14;
	CvarCache(var14, xs__ITaskId, g_cvarRecordDiff);
	new var15 = CvarRegisterBoolean("kz_attempts", 371500, 371508, 0);
	g_hcvarAttempts = var15;
	CvarCache(var15, xs__ITaskId, g_cvarAttempts);
	new var16 = CvarRegisterBoolean("kz_allchat", 371556, 371564, 0);
	g_hcvarAllchat = var16;
	CvarCache(var16, xs__ITaskId, g_cvarAllchat);
	new var17 = CvarRegisterBoolean("kz_axnbhop", 371612, 371620, 0);
	g_hcvarAxnbhop = var17;
	CvarCache(var17, xs__ITaskId, g_cvarAxnbhop);
	new var18 = CvarRegisterBoolean("kz_autoheal", 371672, 371680, 0);
	g_hcvarAutoheal = var18;
	CvarCache(var18, xs__ITaskId, g_cvarAutoheal);
	new var19 = CvarRegisterBoolean("kz_showdamage", 371740, 371748, 0);
	g_hcvarShowdamage = var19;
	CvarCache(var19, xs__ITaskId, g_cvarShowdamage);
	new var20 = CvarRegisterBoolean("kz_setstarttouch", 371820, 371828, 0);
	g_hcvarSetstarttouch = var20;
	CvarCache(var20, xs__ITaskId, g_cvarSetstarttouch);
	new var21 = CvarRegisterBoolean("kz_blockmapsound", 371900, 371908, 0);
	g_hcvarBlockmapsound = var21;
	CvarCache(var21, xs__ITaskId, g_cvarBlockmapsound);
	new var22 = CvarRegister("kz_blockweapons", 371976, 371984, xs__ITaskId, 1, xs__ITaskId, 1, 1073741824, 1);
	g_hcvarBlockweapons = var22;
	CvarCache(var22, xs__ITaskId, g_cvarBlockweapons);
	new var23 = CvarRegisterBoolean("kz_checkpoints", 372048, 372056, 0);
	g_hcvarCheckpoints = var23;
	CvarCache(var23, xs__ITaskId, g_cvarCheckpoints);
	new var24 = CvarRegister("kz_allowaircp", 372116, 372124, xs__ITaskId, 1, xs__ITaskId, 1, 1073741824, 1);
	g_hcvarAllowaircp = var24;
	CvarCache(var24, xs__ITaskId, g_cvarAllowaircp);
	new var25 = CvarRegisterBoolean("kz_gcdemo", 372168, 372176, 0);
	g_hcvarGcdemo = var25;
	CvarCache(var25, xs__ITaskId, g_cvarGcdemo);
	new var26 = CvarRegister("kz_loadangles", 372236, 372244, xs__ITaskId, 1, xs__ITaskId, 1, 1077936128, 1);
	g_hcvarLoadAngles = var26;
	CvarCache(var26, xs__ITaskId, g_cvarLoadAngles);
	new var27 = CvarRegisterBoolean("kz_checkpointmsg", 372316, 372324, 0);
	g_hcvarCheckpointmsg = var27;
	CvarCache(var27, xs__ITaskId, g_cvarCheckpointmsg);
	new var28 = CvarRegisterBoolean("kz_gocheckmsg", 372384, 372392, 0);
	g_hcvarGocheckmsg = var28;
	CvarCache(var28, xs__ITaskId, g_cvarGocheckmsg);
	new var29 = CvarRegisterBoolean("kz_top", 372424, 372432, 0);
	g_hcvarTop = var29;
	CvarCache(var29, xs__ITaskId, g_cvarTop);
	new var30 = CvarRegisterBoolean("kz_topalone", 372484, 372492, 0);
	g_hcvarTopalone = var30;
	CvarCache(var30, xs__ITaskId, g_cvarTopalone);
	new var31 = CvarRegisterBoolean("kz_showplace", 372548, 372556, 0);
	g_hcvarShowplace = var31;
	CvarCache(var31, xs__ITaskId, g_cvarShowplace);
	new var32 = CvarRegister("kz_finishmsg_mode", 372632, 372640, xs__ITaskId, 1, xs__ITaskId, 1, 1077936128, 1);
	g_hcvarFinishmsgMode = var32;
	CvarCache(var32, xs__ITaskId, g_cvarFinishmsgMode);
	new var33 = CvarRegister("kz_finishsound_mode", 372724, 372732, xs__ITaskId, 1, xs__ITaskId, 1, 1077936128, 1);
	g_hcvarFinishsoundMode = var33;
	CvarCache(var33, xs__ITaskId, g_cvarFinishsoundMode);
	new var34 = CvarRegister("kz_playermodel", 372796, 372804, xs__ITaskId, 1, xs__ITaskId, 1, 1084227584, 1);
	g_hcvarPlayerModel = var34;
	CvarCache(var34, xs__ITaskId, g_cvarPlayerModel);
	CvarCache(CvarRegister("kz_damage_red", "255", 372880, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarDamagered);
	CvarCache(CvarRegister("kz_damage_green", "255", 372964, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarDamagegreen);
	CvarCache(CvarRegister("kz_damage_blue", "255", 373044, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarDamageblue);
	CvarCache(CvarRegister("kz_hookspeed", "500", 373116, xs__ITaskId, 1, xs__ITaskId, 1, 1157234688, 1), xs__ITaskId, g_cvarHookspeed);
	CvarCache(CvarRegister("kz_hook_red", 373168, 373176, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarHookred);
	CvarCache(CvarRegister("kz_hook_green", "255", 373252, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarHookgreen);
	CvarCache(CvarRegister("kz_hook_blue", 373308, 373316, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarHookblue);
	new var35 = CvarRegisterBoolean("kz_bot_download", 373384, 373392, 0);
	g_hcvarBotDownload = var35;
	CvarCache(var35, xs__ITaskId, g_cvarBotDownload);
	new var36 = CvarRegisterBoolean("kz_bot_removeold", 373464, 373472, 0);
	g_hcvarBotRemoveOld = var36;
	CvarCache(var36, xs__ITaskId, g_cvarBotRemoveOld);
	new var37 = CvarRegisterBoolean("kz_bot_showonlynew", 373552, 373560, 0);
	g_hcvarBotShowOnlyNew = var37;
	CvarCache(var37, xs__ITaskId, g_cvarBotShowOnlyNew);
	new var38 = CvarRegisterBoolean("kz_bot_autocreate", 373636, 373644, 0);
	g_hcvarBotAutoCreate = var38;
	CvarCache(var38, xs__ITaskId, g_cvarBotAutoCreate);
	new var39 = CvarRegisterBoolean("kz_bot_usecmd", 373704, 373712, 0);
	g_hcvarBotUseCmd = var39;
	CvarCache(var39, xs__ITaskId, g_cvarBotUseCmd);
	new var40 = CvarRegisterBoolean("kz_bot_sync", 373764, 373772, 0);
	g_hcvarBotSync = var40;
	CvarCache(var40, xs__ITaskId, g_cvarBotSync);
	CvarCache(CvarRegister("kz_bot_step", "20", 373836, xs__ITaskId, 1, xs__ITaskId, xs__ITaskId, xs__ITaskId, 1), xs__ITaskId, g_cvarBotStep);
	CvarCache(CvarRegister("kz_bot_speed", 373892, 373900, xs__ITaskId, 1, 1073741824, 1, 1101004800, 1), xs__ITaskId, g_cvarBotSpeed);
	g_hcvarFinishmsgText = register_cvar("kz_finishmsg_text", "Congratulations!", xs__ITaskId, xs__ITaskId);
	CvarCache(CvarRegister("kz_finishmsg_red", 374112, 374120, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarFinishred);
	CvarCache(CvarRegister("kz_finishmsg_green", "255", 374216, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarFinishgreen);
	CvarCache(CvarRegister("kz_finishmsg_blue", 374292, 374300, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarFinishblue);
	g_hcvarFinishsoundSource = register_cvar("kz_finishsound_source", "misc/ownage", xs__ITaskId, xs__ITaskId);
	CvarCache(CvarRegisterBoolean("kz_newnightvision", 374512, 374520, 0), xs__ITaskId, g_cvarNewNightVision);
	CvarCache(CvarRegisterBoolean("kz_remove_equip", 374588, 374596, 0), xs__ITaskId, g_cvarRemoveEquip);
	new var41 = CvarRegisterBoolean("kz_speclist", 374648, 374656, 0);
	g_hcvarSpecList = var41;
	CvarCache(var41, xs__ITaskId, g_cvarSpecList);
	new var42 = CvarRegisterBoolean("kz_spec_hidden_admin", 374744, 374752, 0);
	g_hcvarHidden = var42;
	CvarCache(var42, xs__ITaskId, g_cvarHidden);
	new var43 = CvarRegisterBoolean("kz_speckeys", 374804, 374812, 0);
	g_hcvarSpecKeys = var43;
	CvarCache(var43, xs__ITaskId, g_cvarSpecKeys);
	new var44 = CvarRegisterBoolean("kz_showkeys", 374864, 374872, 0);
	g_hcvarShowKeys = var44;
	CvarCache(var44, xs__ITaskId, g_cvarShowKeys);
	CvarCache(CvarRegister("kz_spec_red", "45", 374936, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarSpecRed);
	CvarCache(CvarRegister("kz_spec_green", "89", 375008, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarSpecGreen);
	CvarCache(CvarRegister("kz_spec_blue", "116", 375080, xs__ITaskId, 1, xs__ITaskId, 1, 1132396544, 1), xs__ITaskId, g_cvarSpecBlue);
	CvarCache(CvarRegister("kz_spec_x", "0.80", 375144, xs__ITaskId, 1, -1082130432, 1, 1065353216, 1), 1, g_cvarSpecX);
	CvarCache(CvarRegister("kz_spec_y_alive", "0.01", 375232, xs__ITaskId, 1, -1082130432, 1, 1065353216, 1), 1, g_cvarSpecYAlive);
	CvarCache(CvarRegister("kz_spec_y_dead", "0.13", 375316, xs__ITaskId, 1, -1082130432, 1, 1065353216, 1), 1, g_cvarSpecYDead);
	new szRadius[10];
	formatex(szRadius, 9, "%.0f", 1132068864);
	CvarCache(CvarRegisterBoolean("kz_semiclip", 375388, 375396, 0), xs__ITaskId, g_cvarSemiclip);
	CvarCache(CvarRegister("kz_transparency_radius", szRadius, 375492, xs__ITaskId, 1, xs__ITaskId, 1, 1132068864, 1), xs__ITaskId, g_cvarTranspRadius);
	g_hcvarName = register_cvar("kz_name", 375528, xs__ITaskId, xs__ITaskId);
	CvarHookChangeAll("OnCvarChange", 1);
	get_cvar_string("kz_prefix", g_szPrefix, 31);
	if (!g_szPrefix[0])
	{
		formatex(g_szPrefix, 31, "KZ");
	}
	unregister_forward(39, g_fwLightStyle, xs__ITaskId);
	g_msgScreenFade = get_user_msgid("ScreenFade");
	new szDir[128];
	get_localinfo("amxx_configsdir", szDir, 127);
	format(szDir, 127, "%s/%s", szDir, g_szCvarsFile);
	if (file_exists(szDir))
	{
		server_cmd("exec %s", szDir);
		server_exec();
	}
	saveCvars(0);
	get_localinfo("amxx_datadir", szDir, 127);
	format(szDir, 127, "%s/%s", szDir, g_szTopFolder);
	if (!dir_exists(szDir))
	{
		mkdir(szDir);
	}
	format(g_szNubFile, 127, "%s/nub", szDir);
	if (!dir_exists(g_szNubFile))
	{
		mkdir(g_szNubFile);
	}
	format(g_szProFile, 127, "%s/pro", szDir);
	if (!dir_exists(g_szProFile))
	{
		mkdir(g_szProFile);
	}
	get_mapname(g_szMapName, 33);
	format(g_szNubFile, 127, "%s/%s.txt", g_szNubFile, g_szMapName);
	format(g_szProFile, 127, "%s/%s.txt", g_szProFile, g_szMapName);
	readProTop();
	readNubTop();
	g_hResetBugForward = CreateMultiForward("fwResetBug", xs__ITaskId, 0);
	g_hRecordingStartedForward = CreateMultiForward("fwRecordingStarted", xs__ITaskId, 0);
	g_hRecordingStoppedForward = CreateMultiForward("fwRecordingStopped", xs__ITaskId, 0);
	g_hTimerStartedForward = CreateMultiForward("fwTimerStarted", xs__ITaskId, 0);
	register_message(get_user_msgid("VGUIMenu"), "messageVGUIMenu");
	register_message(get_user_msgid("ShowMenu"), "messageShowMenu");
	register_message(get_user_msgid("SendAudio"), "messageSendAudio");
	register_message(get_user_msgid("HudTextArgs"), "messageHudTextArgs");
	register_message(get_user_msgid("MOTD"), "messageMOTD");
	register_message(get_user_msgid("HideWeapon"), "messageHideWeapon");
	set_msg_block(get_user_msgid("ClCorpse"), 2);
	set_msg_block(get_user_msgid("WeapPickup"), 2);
	set_msg_block(get_user_msgid("RoundTime"), 2);
	register_event("TextMsg", "eventTextMsg", 377088, "2&#Game_w");
	register_event("SayText", "eventSayText", 377220, "2&#Cstrike_Chat_All", "2&#Cstrike_Chat_AllSpec");
	register_event("CurWeapon", "eventCurWeapon", "be", "1=1");
	register_event("ResetHUD", "eventResetHUD", 377624, 377632);
	g_flRoundStartTime = 0.0;
	register_logevent("hookStartRound", 2, "1=Round_Start");
	register_forward(125, "fmCmdStart", xs__ITaskId);
	RegisterHam(xs__ITaskId, "player", "hamPlayerSpawn_P", 1);
	RegisterHam(11, "player", "hamPlayerKilled_P", 1);
	RegisterHam(9, "player", "hamPlayerTakeDamage", xs__ITaskId);
	RegisterHam(57, "player", "hamPlayerPreThink", xs__ITaskId);
	RegisterHam(57, "player", "hamPlayerPreThink_P", 1);
	RegisterHam(42, "worldspawn", "hamHookTouch", xs__ITaskId);
	RegisterHam(42, "func_wall", "hamHookTouch", xs__ITaskId);
	RegisterHam(42, "func_breakable", "hamHookTouch", xs__ITaskId);
	RegisterHam(42, "player", "hamPlayerTouch", xs__ITaskId);
	RegisterHam(42, "trigger_teleport", "hamTriggerTouch", xs__ITaskId);
	RegisterHam(42, "trigger_push", "hamTriggerTouch", xs__ITaskId);
	RegisterHam(42, "trigger_gravity", "hamTriggerTouch", xs__ITaskId);
	RegisterHam(42, "func_train", "hamTriggerTouch", xs__ITaskId);
	RegisterHam(42, "func_tracktrain", "hamTriggerTouch", xs__ITaskId);
	RegisterHam(42, "func_conveyor", "hamTriggerTouch", xs__ITaskId);
	RegisterHam(42, "armoury_entity", "hamWeaponEntityTouch", xs__ITaskId);
	RegisterHam(42, "weaponbox", "hamWeaponEntityTouch2", xs__ITaskId);
	RegisterHam(42, "weapon_shield", "hamWeaponEntityTouch2", xs__ITaskId);
	new var1;
	if (equal(g_szMapName, "kz_a2_bhop_corruo_ez", xs__ITaskId) || equal(g_szMapName, "kz_a2_bhop_corruo_h", xs__ITaskId) || equali(g_szMapName, "kz_a2_godspeed", xs__ITaskId))
	{
		RegisterHam(42, "func_button", "hamButtonTouch", xs__ITaskId);
	}
	else
	{
		if (equal(g_szMapName, "kz_man_climbrace", xs__ITaskId))
		{
			RegisterHam(41, "func_breakable", "hamBreakableThink", xs__ITaskId);
			RegisterHam(42, "trigger_multiple", "hamMultipleTouch", xs__ITaskId);
		}
		if (equal(g_szMapName, "kz_cup_storage", xs__ITaskId))
		{
			g_flMapDelay = 5.0;
		}
		RegisterHam(43, "func_button", "hamButtonUse", xs__ITaskId);
	}
	g_bAxnBhop = readAxnMaps();
	OrpheuRegisterHook(OrpheuGetFunction("PM_Move", 360724), "OR_PMMove", xs__ITaskId);
	new OrpheuFunction:orPMJump = OrpheuGetFunction("PM_Jump", 360724);
	OrpheuRegisterHook(orPMJump, "OR_PMJump", xs__ITaskId);
	OrpheuRegisterHook(orPMJump, "OR_PMJump_P", 1);
	g_pRoundtime = get_cvar_pointer("mp_roundtime");
	if (get_pcvar_num(g_pRoundtime))
	{
		g_bZeroMpTime = false;
	}
	else
	{
		g_bZeroMpTime = true;
	}
	new var2;
	if (g_cvarAutomode && g_cvarMode > 0)
	{
		new iEnt;
		new szTarget[32];
		new bool:bStartFound;
		new bool:bFinishFound;
		while ((iEnt = find_ent_by_class(iEnt, "func_button")))
		{
			pev(iEnt, 4, szTarget, 31);
			if (TrieKeyExists(g_tStarts, szTarget))
			{
				bStartFound = true;
			}
			if (TrieKeyExists(g_tStops, szTarget))
			{
				bFinishFound = true;
			}
		}
		new var3;
		if (bStartFound && bFinishFound)
		{
			set_pcvar_num(g_hcvarMode, 1);
		}
		else
		{
			set_pcvar_num(g_hcvarMode, 2);
		}
	}
	g_bGodmode = false;
	g_bNeedDefResp = false;
	g_bDemoRecording = false;
	get_localinfo("amxx_datadir", g_szRecDir, 127);
	format(g_szRecDir, 127, "%s/%s", g_szRecDir, g_szRecFolder);
	if (!dir_exists(g_szRecDir))
	{
		mkdir(g_szRecDir);
	}
	readRecords();
	if (g_cvarLoadrecords)
	{
		checkRecords();
	}
	new i;
	while (i < 25)
	{
		if (g_szDemoFiles[i][0][0])
		{
			loadThisRecords(i);
		}
		i++;
	}
	register_menucmd(register_menuid("TopMenu", xs__ITaskId), 1023, "handleTopMenu");
	register_menucmd(register_menuid("ServerMenu", xs__ITaskId), 1023, "handleServerMenu");
	g_MainMenuID = register_menuid("MainMenu", xs__ITaskId);
	register_menucmd(g_MainMenuID, 1023, "handleMainMenu");
	register_menucmd(register_menuid("FinishMenu", xs__ITaskId), 1023, "handleFinishMenu");
	g_BotSettingsMenuID = register_menuid("BotSettingsMenu", xs__ITaskId);
	register_menucmd(g_BotSettingsMenuID, 1023, "handleBotSettingsMenu");
	g_SettingsMenuID1 = register_menuid("SettingsMenu1", xs__ITaskId);
	register_menucmd(g_SettingsMenuID1, 1023, "handleSettingsMenu1");
	g_SettingsMenuID2 = register_menuid("SettingsMenu2", xs__ITaskId);
	register_menucmd(g_SettingsMenuID2, 1023, "handleSettingsMenu2");
	g_SettingsMenuID3 = register_menuid("SettingsMenu3", xs__ITaskId);
	register_menucmd(g_SettingsMenuID3, 1023, "handleSettingsMenu3");
	g_SettingsMenuID4 = register_menuid("SettingsMenu4", xs__ITaskId);
	register_menucmd(g_SettingsMenuID4, 1023, "handleSettingsMenu4");
	g_SettingsMenuID5 = register_menuid("SettingsMenu5", xs__ITaskId);
	register_menucmd(g_SettingsMenuID5, 1023, "handleSettingsMenu5");
	register_menucmd(register_menuid("InvisMenu", xs__ITaskId), 1023, "handleInvisMenu");
	if (is_zero_vec(g_flDefStartOrigin))
	{
		get_localinfo("amxx_datadir", g_szMapStartPath, 127);
		format(g_szMapStartPath, 127, "%s/kzstart", g_szMapStartPath);
		if (!dir_exists(g_szMapStartPath))
		{
			mkdir(g_szMapStartPath);
		}
		format(g_szMapStartPath, 127, "%s/%s.txt", g_szMapStartPath, g_szMapName);
		if (file_exists(g_szMapStartPath))
		{
			new szData[128];
			new f = fopen(g_szMapStartPath, "rt");
			fgets(f, szData, 127);
			fclose(f);
			new szX[13];
			new szY[13];
			new szZ[13];
			new szA1[13];
			new szA2[13];
			new szA3[13];
			parse(szData, szX, 12, szY, 12, szZ, 12, szA1, 12, szA2, 12, szA3, 12);
			new Float:xPos = str_to_float(szX);
			if (!xPos)
			{
			}
			else
			{
				g_flDefStartOrigin[0] = xPos;
				g_flDefStartOrigin[1] = str_to_float(szY);
				g_flDefStartOrigin[2] = str_to_float(szZ);
				g_flDefStartAngle[0] = str_to_float(szA1);
				g_flDefStartAngle[1] = str_to_float(szA2);
				g_flDefStartAngle[2] = str_to_float(szA3);
			}
		}
	}
	semiclip_plugin_init();
	mpbhop_plugin_init();
	if (0 < g_cvarMpbhop)
	{
		mpBhop(0, true);
	}
	new i;
	while (i < 33)
	{
		g_aSpecs[i] = ArrayCreate(1, 32);
		i++;
	}
	set_task(1036831949, "taskHUD", 7000, 382564, xs__ITaskId, 382568, xs__ITaskId);
	new iBotButtonsEnt = create_entity("info_target");
	if (!iBotButtonsEnt)
	{
		log_amx("Cannot create info_target for bot buttons");
	}
	register_think(g_szBotButtonsClass, "thinkBotButtons");
	set_pev(iBotButtonsEnt, 1, g_szBotButtonsClass);
	set_pev(iBotButtonsEnt, 33, floatadd(1008981770, get_gametime()));
	return 0;
}

public OnCvarChange(handleCvar, oldValue[], newValue[], cvarName[], defaultValue[])
{
	new var1;
	if (g_hcvarMode == handleCvar && g_bDemoRecording)
	{
		new id = get_localhost();
		if (id)
		{
			client_print_f(id, ColorType:5, "\x03[%s]\x01 You should stop the recording firstly (say\x03 /stop\x01)", g_szPrefix);
		}
		return 1;
	}
	new var2;
	if (g_hcvarMpbhop == handleCvar && !equali(oldValue, newValue, xs__ITaskId))
	{
		new id = get_localhost();
		if (id)
		{
			new bool:bMpbhop = str_to_num(newValue) > 0;
			mpBhop(id, bMpbhop);
		}
	}
	new var3;
	if (g_hcvarAxnbhop == handleCvar && !equali(oldValue, newValue, xs__ITaskId))
	{
		new id = get_localhost();
		if (id)
		{
			if (0 < str_to_num(newValue))
			{
				client_print_f(id, ColorType:6, "\x04[%s]\x01 AXN:\x03 enabled", g_szPrefix);
			}
			client_print_f(id, ColorType:5, "\x04[%s]\x01 AXN:\x03 disabled", g_szPrefix);
		}
	}
	set_task(1036831949, "updateMenu", 123321, 383308, xs__ITaskId, 383312, xs__ITaskId);
	return 0;
}

public updateMenu(task_id)
{
	new id = get_localhost();
	if (id)
	{
		new oldMenuId;
		new newMenuId;
		player_menu_info(id, oldMenuId, newMenuId, 0);
		if (g_MainMenuID == oldMenuId)
		{
			cmdMainMenu(id);
		}
		else
		{
			if (g_BotSettingsMenuID == oldMenuId)
			{
				cmdBotSettingsMenu(id);
			}
			if (g_SettingsMenuID1 == oldMenuId)
			{
				SettingsMenu1(id);
			}
			if (g_SettingsMenuID2 == oldMenuId)
			{
				SettingsMenu2(id);
			}
			if (g_SettingsMenuID3 == oldMenuId)
			{
				SettingsMenu3(id);
			}
			if (g_SettingsMenuID4 == oldMenuId)
			{
				SettingsMenu4(id);
			}
			if (g_SettingsMenuID5 == oldMenuId)
			{
				SettingsMenu5(id);
			}
		}
	}
	return 0;
}

public isMainMenuOpened(id)
{
	new oldMenuId;
	new newMenuId;
	player_menu_info(id, oldMenuId, newMenuId, 0);
	return g_MainMenuID == oldMenuId;
}

public hookStartRound()
{
	g_flRoundStartTime = get_gametime();
	if (g_bZeroMpTime)
	{
		set_pcvar_num(g_pRoundtime, xs__ITaskId);
	}
	set_msg_block(get_user_msgid("RoundTime"), 2);
	return 0;
}

public cmdStrip(id)
{
	if (is_user_alive(id))
	{
		strip_user_weapons(id);
	}
	return 1;
}

public cmdSaveCvars(id)
{
	if (is_user_localhost(id))
	{
		saveCvars(id);
	}
	return 1;
}

saveCvars(id)
{
	new szDir[128];
	get_localinfo("amxx_configsdir", szDir, 127);
	new szFile[128];
	format(szFile, 127, "%s/%s", szDir, g_szCvarsFile);
	new hFile = fopen(szFile, "wt");
	fprintf(hFile, "kz_mode %d\n\n", g_cvarMode);
	fprintf(hFile, "kz_blockct %d\n", g_cvarBlockct);
	fprintf(hFile, "kz_timer %d\n", g_cvarTimer);
	fprintf(hFile, "kz_loadrecords %d\n", g_cvarLoadrecords);
	fprintf(hFile, "kz_automode %d\n", g_cvarAutomode);
	fprintf(hFile, "kz_mpbhop %d\n", g_cvarMpbhop);
	fprintf(hFile, "kz_mainmenu %d\n\n", g_cvarMainmenu);
	fprintf(hFile, "kz_chatmsg %d\n", g_cvarChatmsg);
	fprintf(hFile, "kz_recordmsg_mode %d\n", g_cvarRecordmsgMode);
	fprintf(hFile, "kz_recordmsg_current %d\n", g_cvarCurrentRecordmsg);
	fprintf(hFile, "kz_recordmsg_diff %d\n", g_cvarRecordDiff);
	fprintf(hFile, "kz_attempts %d\n", g_cvarAttempts);
	fprintf(hFile, "kz_allchat %d\n\n", g_cvarAllchat);
	fprintf(hFile, "kz_axnbhop %d\n", g_cvarAxnbhop);
	fprintf(hFile, "kz_autoheal %d\n", g_cvarAutoheal);
	fprintf(hFile, "kz_showdamage %d\n", g_cvarShowdamage);
	fprintf(hFile, "kz_setstarttouch %d\n", g_cvarSetstarttouch);
	fprintf(hFile, "kz_blockmapsound %d\n", g_cvarBlockmapsound);
	fprintf(hFile, "kz_blockweapons %d\n\n", g_cvarBlockweapons);
	fprintf(hFile, "kz_checkpoints %d\n", g_cvarCheckpoints);
	fprintf(hFile, "kz_allowaircp %d\n", g_cvarAllowaircp);
	fprintf(hFile, "kz_gcdemo %d\n", g_cvarGcdemo);
	fprintf(hFile, "kz_loadangles %d\n", g_cvarLoadAngles);
	fprintf(hFile, "kz_checkpointmsg %d\n", g_cvarCheckpointmsg);
	fprintf(hFile, "kz_gocheckmsg %d\n\n", g_cvarGocheckmsg);
	fprintf(hFile, "kz_top %d\n", g_cvarTop);
	fprintf(hFile, "kz_topalone %d\n", g_cvarTopalone);
	fprintf(hFile, "kz_showplace %d\n", g_cvarShowplace);
	fprintf(hFile, "kz_finishmsg_mode %d\n", g_cvarFinishmsgMode);
	fprintf(hFile, "kz_finishsound_mode %d\n", g_cvarFinishsoundMode);
	fprintf(hFile, "kz_playermodel %d\n\n", g_cvarPlayerModel);
	new szFinishMessage[300];
	get_pcvar_string(g_hcvarFinishmsgText, szFinishMessage, 299);
	new szFinishSound[150];
	get_pcvar_string(g_hcvarFinishsoundSource, szFinishSound, 149);
	fprintf(hFile, "kz_finishmsg_text \"%s\"\n", szFinishMessage);
	fprintf(hFile, "kz_finishmsg_red %d\n", g_cvarFinishred);
	fprintf(hFile, "kz_finishmsg_green %d\n", g_cvarFinishgreen);
	fprintf(hFile, "kz_finishmsg_blue %d\n\n", g_cvarFinishblue);
	fprintf(hFile, "kz_finishsound_source \"%s\"\n\n", szFinishSound);
	fprintf(hFile, "kz_damage_red %d\n", g_cvarDamagered);
	fprintf(hFile, "kz_damage_green %d\n", g_cvarDamagegreen);
	fprintf(hFile, "kz_damage_blue %d\n\n", g_cvarDamageblue);
	fprintf(hFile, "kz_hookspeed %d\n", g_cvarHookspeed);
	fprintf(hFile, "kz_hook_red %d\n", g_cvarHookred);
	fprintf(hFile, "kz_hook_green %d\n", g_cvarHookgreen);
	fprintf(hFile, "kz_hook_blue %d\n\n", g_cvarHookblue);
	fprintf(hFile, "kz_bot_download %d\n", g_cvarBotDownload);
	fprintf(hFile, "kz_bot_removeold %d\n", g_cvarBotRemoveOld);
	fprintf(hFile, "kz_bot_showonlynew %d\n", g_cvarBotShowOnlyNew);
	fprintf(hFile, "kz_bot_autocreate %d\n", g_cvarBotAutoCreate);
	fprintf(hFile, "kz_bot_usecmd %d\n", g_cvarBotUseCmd);
	fprintf(hFile, "kz_bot_sync %d\n", g_cvarBotSync);
	fprintf(hFile, "kz_bot_step %d\n", g_cvarBotStep);
	fprintf(hFile, "kz_bot_speed %d\n\n", g_cvarBotSpeed);
	fprintf(hFile, "kz_newnightvision %d\n\n", g_cvarNewNightVision);
	fprintf(hFile, "kz_remove_equip %d\n\n", g_cvarRemoveEquip);
	fprintf(hFile, "kz_speclist %d\n", g_cvarSpecList);
	fprintf(hFile, "kz_spec_hidden_admin %d\n", g_cvarHidden);
	fprintf(hFile, "kz_spec_red %d\n", g_cvarSpecRed);
	fprintf(hFile, "kz_spec_green %d\n", g_cvarSpecGreen);
	fprintf(hFile, "kz_spec_blue %d\n", g_cvarSpecBlue);
	fprintf(hFile, "kz_spec_x %.3f\n", g_cvarSpecX);
	fprintf(hFile, "kz_spec_y_alive %.3f\n", g_cvarSpecYAlive);
	fprintf(hFile, "kz_spec_y_dead %.3f\n\n", g_cvarSpecYDead);
	fprintf(hFile, "kz_semiclip %d\n", g_cvarSemiclip);
	fprintf(hFile, "kz_transparency_radius %d\n\n", g_cvarTranspRadius);
	new szName[32];
	get_pcvar_string(g_hcvarName, szName, 31);
	new aReplaceChars[9][] = {
		{
			92, ...
		},
		{
			47, ...
		},
		{
			124, ...
		},
		{
			58, ...
		},
		{
			42, ...
		},
		{
			34, ...
		},
		{
			60, ...
		},
		{
			62, ...
		},
		{
			63, ...
		}
	};
	new i;
	while (i < 9)
	{
		replace_all(szName, 31, aReplaceChars[i], 388344);
		i++;
	}
	replace_all(szName, 31, 388348, 388356);
	fprintf(hFile, "kz_name \"%s\"\n", szName);
	fclose(hFile);
	if (0 < id)
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Settings saved in\x04 %s", g_szPrefix, g_szCvarsFile);
	}
	return 0;
}

readAxnMaps()
{
	new szAxnFile[128];
	get_localinfo("amxx_datadir", szAxnFile, 127);
	format(szAxnFile, 127, "%s/%s", szAxnFile, g_szAxnMapFile);
	if (!file_exists(szAxnFile))
	{
		new hFile = fopen(szAxnFile, "wt");
		fclose(hFile);
	}
	new szMapName[32];
	get_mapname(szMapName, 31);
	new hFile = fopen(szAxnFile, 388624);
	new szData[512];
	while (!feof(hFile))
	{
		fgets(hFile, szData, 511);
		trim(szData);
		new var1;
		if (!(!szData[0] || szData[0] == 10 || szData[0] == 59))
		{
			if (equali(szData, szMapName, xs__ITaskId))
			{
				return 1;
			}
		}
	}
	fclose(hFile);
	return 0;
}

public plugin_end()
{
	TrieDestroy(g_tStarts);
	TrieDestroy(g_tStops);
	TrieDestroy(g_tStartSounds);
	TrieDestroy(g_tPlayerCvars);
	TrieDestroy(g_tCommunities);
	TrieDestroy(g_tOnce);
	TrieDestroy(g_tWallToggles);
	ArrayDestroy(g_aOnce);
	TrieDestroy(g_tBlocksClass);
	new i;
	while (i < 33)
	{
		ArrayDestroy(g_aSpecs[i]);
		i++;
	}
	DestroyForward(g_hRecordingStartedForward);
	DestroyForward(g_hRecordingStoppedForward);
	DestroyForward(g_hTimerStartedForward);
	DestroyForward(g_hResetBugForward);
	return 0;
}

public client_putinserver(id)
{
	if (!is_user_connected(id))
	{
		return 0;
	}
	g_bJoinedCT[id] = 0;
	g_bSawMotd[id] = 0;
	g_bRunFinished[id] = 0;
	g_bPlayerShowTimer[id] = 1;
	g_bNotFirstSpawn[id] = 0;
	g_bIsUsingHook[id] = 0;
	g_flTimerStarted[id] = 0;
	g_flTimerPaused[id] = 0;
	g_iCheckPointCounter[id] = 0;
	g_iGoCheckCounter[id] = 0;
	g_bNoclipUsed[id] = 0;
	g_bHookUsed[id] = 0;
	g_bPauseUsed[id] = 0;
	g_bsSpecWeapons[id] = 0;
	vector_copy(VEC_NULL, g_flSpecOrigin[id]);
	vector_copy(VEC_NULL, g_flSpecAngle[id]);
	g_flSpecGravity[id] = 1065353216;
	g_iSpecButtons[id] = 0;
	if (!is_zero_vec(g_flDefStartOrigin))
	{
		vector_copy(g_flDefStartOrigin, g_flPlayerStartOrigin[id]);
		vector_copy(g_flDefStartAngle, g_flPlayerStartAngle[id]);
	}
	vector_copy(VEC_NULL, g_flCheckPointOrigin[id]);
	vector_copy(VEC_NULL, g_flCheckPointAngle[id]);
	g_flGravity[id] = 1065353216;
	arrayset(g_iHookOrigin[id], xs__ITaskId, "");
	vector_copy(VEC_NULL, g_flHookWallOrigin[id]);
	if (!is_user_bot(id))
	{
		set_task(1065353216, "sendCvars", id, 383308, xs__ITaskId, 383312, xs__ITaskId);
	}
	g_bOnGround[id] = 0;
	g_bTeleported[id] = 0;
	g_bOnFreezedBlock[id] = 0;
	g_setSpecList[id] = g_cvarSpecList;
	g_setHidden[id] = g_cvarHidden;
	g_setSpecKeys[id] = g_cvarSpecKeys;
	g_setShowKeys[id] = g_cvarShowKeys;
	g_setInvis[id] = 0;
	return 0;
}

set_player_origin_ac(id, Float:flOrigin[3], Float:flAngles[3], Float:flGravity, Float:flFuser2)
{
	new iReturn;
	ExecuteForward(g_hResetBugForward, iReturn, id);
	set_player_origin(id, flOrigin, flAngles, flGravity, flFuser2);
	g_iTouched[id] = 2;
	g_iFlags[id] |= 16384;
	return 0;
}

public spawnPlayer(id)
{
	new iReturn;
	ExecuteForward(g_hResetBugForward, iReturn, id);
	ExecuteHamB(98, id);
	g_iTouched[id] = 2;
	g_iFlags[id] |= 16384;
	return 0;
}

public forecastPos(id)
{
	new var1;
	if (!is_user_localhost(id) || !g_bDemoRecording)
	{
		return 0;
	}
	CvarFlagString += 1;
	if (is_zero_vec(g_flPrevOrigin[id]))
	{
		return 0;
	}
	new var2;
	if (g_bLadder[id] || g_bPrevLadder[id])
	{
		return 0;
	}
	new var3;
	if (g_bWater[id] || g_bPrevWater[id])
	{
		return 0;
	}
	new var4;
	if (g_bHook[id] || g_bPrevHook[id])
	{
		return 0;
	}
	if (g_iTouched[id])
	{
		return 0;
	}
	if (get_user_noclip(id))
	{
		return 0;
	}
	g_flNewVel[id][0] = g_flPrevVelocity[id][0];
	g_flNewVel[id][1] = g_flPrevVelocity[id][1];
	g_flNewVel[id][2] = g_flPrevVelocity[id][2];
	g_flNewOrigin[id][0] = g_flPrevOrigin[id][0];
	g_flNewOrigin[id][1] = g_flPrevOrigin[id][1];
	g_flNewOrigin[id][2] = g_flPrevOrigin[id][2];
	if (g_flDuckTime[id] > 0.0)
	{
		new var21 = g_flDuckTime[id];
		var21 = floatsub(var21, floatmul(1148846080, g_flPrevFrameTime[id]));
		if (g_flDuckTime[id] < 0.0)
		{
			g_flDuckTime[id] = 0;
		}
	}
	new bool:bInAir;
	pmDuck(id, bInAir);
	if (pmCategorizePosition(id))
	{
		g_iPrevFlags[id] |= 512;
	}
	pmGravityVelocity(id);
	new var5;
	if (g_iPrevFlags[id] & 512 && !g_iFlags[id] & 512)
	{
		pmJump(id, bInAir);
	}
	new var6;
	if (g_iPrevFlags[id] & 512 && !bInAir)
	{
		g_flNewVel[id][2] = 0.0;
		pmFriction(id);
		pmWalkMove(id);
	}
	else
	{
		pmAirMove(id);
	}
	pmCategorizePosition(id);
	if (!g_iFlags[id] & 512)
	{
		pmGravityVelocity(id);
	}
	new Float:flX = floatabs(floatsub(g_flOrigin[id][0], g_flNewOrigin[id][0]));
	new Float:flY = floatabs(floatsub(g_flOrigin[id][1], g_flNewOrigin[id][1]));
	new Float:flZ = floatabs(floatsub(g_flOrigin[id][2], g_flNewOrigin[id][2]));
	new Float:flDestDiff = 0.01;
	new var7;
	if (flX > flDestDiff || flY > flDestDiff || flZ > flDestDiff)
	{
		new var8;
		if (bInAir)
		{
			var8 = 1;
		}
		else
		{
			var8 = 0;
		}
		new var9;
		if (g_iPrevFlags[id] & 512)
		{
			var9 = 1;
		}
		else
		{
			var9 = 0;
		}
		new var10;
		if (g_iFlags[id] & 512)
		{
			var10 = 1;
		}
		else
		{
			var10 = 0;
		}
		client_print(id, "", "chat o %d %d %d / %f %f %f / actual %f %f %f", var10, var9, var8, g_flNewOrigin[id], g_flNewOrigin[id][1], g_flNewOrigin[id][2], g_flOrigin[id], g_flOrigin[id][1], g_flOrigin[id][2]);
		new var11;
		if (bInAir)
		{
			var11 = 1;
		}
		else
		{
			var11 = 0;
		}
		new var12;
		if (g_iPrevFlags[id] & 512)
		{
			var12 = 1;
		}
		else
		{
			var12 = 0;
		}
		new var13;
		if (g_iFlags[id] & 512)
		{
			var13 = 1;
		}
		else
		{
			var13 = 0;
		}
		client_print(id, 2, "o %d %d %d / %f %f %f / actual %f %f %f", var13, var12, var11, g_flNewOrigin[id], g_flNewOrigin[id][1], g_flNewOrigin[id][2], g_flOrigin[id], g_flOrigin[id][1], g_flOrigin[id][2]);
	}
	flX = floatabs(floatsub(g_flNewVel[id][0], g_flVelocity[id][0]));
	flY = floatabs(floatsub(g_flNewVel[id][1], g_flVelocity[id][1]));
	flZ = floatabs(floatsub(g_flNewVel[id][2], g_flVelocity[id][2]));
	new var14;
	if (flX > flDestDiff || flY > flDestDiff || flZ > flDestDiff)
	{
		new var15;
		if (bInAir)
		{
			var15 = 1;
		}
		else
		{
			var15 = 0;
		}
		new var16;
		if (g_iPrevFlags[id] & 512)
		{
			var16 = 1;
		}
		else
		{
			var16 = 0;
		}
		new var17;
		if (g_iFlags[id] & 512)
		{
			var17 = 1;
		}
		else
		{
			var17 = 0;
		}
		client_print(id, "", "chat v %d %d %d / %f %f %f / actual %f %f %f", var17, var16, var15, g_flNewVel[id], g_flNewVel[id][1], g_flNewVel[id][2], g_flVelocity[id], g_flVelocity[id][1], g_flVelocity[id][2]);
		new var18;
		if (bInAir)
		{
			var18 = 1;
		}
		else
		{
			var18 = 0;
		}
		new var19;
		if (g_iPrevFlags[id] & 512)
		{
			var19 = 1;
		}
		else
		{
			var19 = 0;
		}
		new var20;
		if (g_iFlags[id] & 512)
		{
			var20 = 1;
		}
		else
		{
			var20 = 0;
		}
		client_print(id, 2, "v %d %d %d / %f %f %f / actual %f %f %f", var20, var19, var18, g_flNewVel[id], g_flNewVel[id][1], g_flNewVel[id][2], g_flVelocity[id], g_flVelocity[id][1], g_flVelocity[id][2]);
	}
	return 0;
}

public pmGravityVelocity(id)
{
	new Float:gravity = float(get_cvar_num("sv_gravity"));
	new var1 = g_flNewVel[id][2];
	var1 = floatsub(var1, floatmul(floatmul(1056964608, gravity), g_flPrevFrameTime[id]));
	new Float:maxvelocity = float(get_cvar_num("sv_maxvelocity"));
	new i;
	while (i < 3)
	{
		if (g_flNewVel[id][i] > maxvelocity)
		{
			g_flNewVel[id][i] = maxvelocity;
		}
		if (g_flNewVel[id][i] < -maxvelocity)
		{
			g_flNewVel[id][i] = -maxvelocity;
		}
		i++;
	}
	return 0;
}

public pmJump(id, &bool:bInAir)
{
	new var1;
	if (g_iPrevButtons[id] & 2 && !g_iOldButtons[id] & 2)
	{
		bInAir = 1;
		new Float:maxscaledspeed = 0.0;
		pev(id, 56, maxscaledspeed);
		maxscaledspeed = floatmul(1067030938, maxscaledspeed);
		new Float:speed = floatsqroot(floatadd(floatadd(floatmul(g_flNewVel[id][0], g_flNewVel[id][0]), floatmul(g_flNewVel[id][1], g_flNewVel[id][1])), floatmul(g_flNewVel[id][2], g_flNewVel[id][2])));
		if (speed > maxscaledspeed)
		{
			new var2 = g_flNewVel[id];
			var2[0] = floatmul(var2[0], floatmul(1061997773, floatdiv(maxscaledspeed, speed)));
			new var3 = g_flNewVel[id][1];
			var3 = floatmul(var3, floatmul(1061997773, floatdiv(maxscaledspeed, speed)));
		}
		g_flNewVel[id][2] = floatsqroot(floatmul(1110704128, floatmul(1073741824, 1145569280)));
		new Float:flActualFuser2 = floatsub(g_flPrevFuser2[id], floatmul(1148846080, g_flPrevFrameTime[id]));
		if (flActualFuser2 < 0.0)
		{
			flActualFuser2 = 0.0;
		}
		if (flActualFuser2 > 0.0)
		{
			new var4 = g_flNewVel[id][2];
			var4 = floatmul(var4, floatmul(1008981770, floatsub(1120403456, floatmul(1100480512, floatmul(981668463, flActualFuser2)))));
		}
		pmGravityVelocity(id);
	}
	return 0;
}

public pmDuck(id, &bool:bInAir)
{
	new var1;
	if (!g_iPrevFlags[id] & 16384 && !g_iPrevButtons[id] & 4 && !g_bInDuck[id])
	{
		return 0;
	}
	new var4 = g_flPrevForwardMove[id];
	var4 = floatmul(1051361018, var4);
	new var5 = g_flPrevSideMove[id];
	var5 = floatmul(1051361018, var5);
	if (!g_iPrevFlags[id] & 512)
	{
		return 0;
	}
	if (g_iPrevButtons[id] & 4)
	{
		new var2;
		if (!g_iOldButtons[id] & 4 && !g_iPrevFlags[id] & 16384)
		{
			g_flDuckTime[id] = 1148846080;
			g_bInDuck[id] = 1;
		}
		if (g_bInDuck[id])
		{
			if (floatdiv(g_flDuckTime[id], 1148846080) <= floatsub(1065353216, 1053609165))
			{
				new var6 = g_flNewOrigin[id][2];
				var6 = floatsub(var6, 1099956224);
				g_bInDuck[id] = 0;
			}
		}
	}
	else
	{
		new Float:flTeleport[3] = 0.0;
		flTeleport[0] = g_flNewOrigin[id][0];
		flTeleport[1] = g_flNewOrigin[id][1];
		flTeleport[2] = floatadd(1099956224, g_flNewOrigin[id][2]);
		new ptr = create_tr2();
		engfunc(32, flTeleport, flTeleport, 0, 3, id, ptr);
		new iStartSolid = get_tr2(ptr, 1);
		if (!iStartSolid)
		{
			engfunc(32, flTeleport, flTeleport, 0, 1, id, ptr);
			new Float:flFraction = 0.0;
			get_tr2(ptr, 4, flFraction);
			iStartSolid = get_tr2(ptr, 1);
			new var3;
			if (1.0 == flFraction && iStartSolid)
			{
				g_flNewOrigin[id][2] = flTeleport[2];
				g_flDuckTime[id] = 0;
				g_bInDuck[id] = 0;
				if (!g_iFlags[id] & 512)
				{
					bInAir = 1;
				}
			}
		}
		free_tr2(ptr);
	}
	return 0;
}

public pmCategorizePosition(id)
{
	if (g_flNewVel[id][2] > 180.0)
	{
		return 0;
	}
	if (is_player_sliding(id))
	{
		return 0;
	}
	new Float:flTeleport[3] = 0.0;
	flTeleport[0] = g_flNewOrigin[id][0];
	flTeleport[1] = g_flNewOrigin[id][1];
	flTeleport[2] = floatsub(g_flNewOrigin[id][2], 1073741824);
	new ptr = create_tr2();
	new var1;
	if (g_iFlags[id] & 16384)
	{
		var1 = 3;
	}
	else
	{
		var1 = 1;
	}
	engfunc(32, g_flNewOrigin[id], flTeleport, 0, var1, id, ptr);
	new Float:flFraction = 0.0;
	get_tr2(ptr, 4, flFraction);
	new Float:flNormal[3] = 0.0;
	get_tr2(ptr, 7, flNormal);
	new iStartSolid = get_tr2(ptr, 1);
	new iAllSolid = get_tr2(ptr, xs__ITaskId);
	free_tr2(ptr);
	new var2;
	if (flNormal[2] >= 0.7 && iStartSolid && iAllSolid)
	{
		g_flNewOrigin[id][2] = floatsub(g_flNewOrigin[id][2], floatmul(1073741824, flFraction));
		g_flNewVel[id][2] = 0.0;
		return 1;
	}
	return 0;
}

public pmFriction(id)
{
	new Float:speed = floatsqroot(floatadd(floatmul(g_flNewVel[id][0], g_flNewVel[id][0]), floatmul(g_flNewVel[id][1], g_flNewVel[id][1])));
	if (speed < 0.1)
	{
		return 0;
	}
	new Float:friction = float(get_cvar_num("sv_friction"));
	new Float:flStart[3] = 0.0;
	new Float:flDestination[3] = 0.0;
	new Float:flTraceDist = 16.0;
	flStart[0] = floatadd(g_flNewOrigin[id][0], floatmul(floatdiv(g_flNewVel[id][0], speed), flTraceDist));
	flStart[1] = floatadd(g_flNewOrigin[id][1], floatmul(floatdiv(g_flNewVel[id][1], speed), flTraceDist));
	flStart[2] = g_flNewOrigin[id][2];
	flDestination[0] = flStart[0];
	flDestination[1] = flStart[1];
	if (g_iFlags[id] & 16384)
	{
		flDestination[2] = floatsub(floatsub(flStart[2], 1099956224), 1107820544);
	}
	else
	{
		flDestination[2] = floatsub(floatsub(flStart[2], 1108344832), 1107820544);
	}
	new ptr = create_tr2();
	new var1;
	if (g_iFlags[id] & 16384)
	{
		var1 = 3;
	}
	else
	{
		var1 = 1;
	}
	engfunc(32, flStart, flDestination, 0, var1, id, ptr);
	new Float:flFraction = 0.0;
	get_tr2(ptr, 4, flFraction);
	new iStartSolid = get_tr2(ptr, 1);
	new var2;
	if (iStartSolid && 1.0 == flFraction)
	{
		friction = floatmul(friction, float(get_cvar_num("edgefriction")));
	}
	free_tr2(ptr);
	new Float:stopspeed = float(get_cvar_num("sv_stopspeed"));
	decl Float:control;
	new var3;
	if (speed < stopspeed)
	{
		var3 = stopspeed;
	}
	else
	{
		var3 = speed;
	}
	control = var3;
	new Float:drop = floatmul(floatmul(friction, control), g_flPrevFrameTime[id]);
	new Float:newspeed = floatsub(speed, drop);
	if (newspeed < 0.0)
	{
		newspeed = 0.0;
	}
	new var4 = g_flNewVel[id];
	var4[0] = floatmul(var4[0], floatdiv(newspeed, speed));
	new var5 = g_flNewVel[id][1];
	var5 = floatmul(var5, floatdiv(newspeed, speed));
	return 0;
}

public pmWalkMove(id)
{
	if (g_flFuser2[id] > 0.0)
	{
		new var6 = g_flNewVel[id];
		var6[0] = floatmul(var6[0], floatmul(1008981770, floatsub(1120403456, floatmul(1100480512, floatmul(981668463, g_flFuser2[id])))));
		new var7 = g_flNewVel[id][1];
		var7 = floatmul(var7, floatmul(1008981770, floatsub(1120403456, floatmul(1100480512, floatmul(981668463, g_flFuser2[id])))));
	}
	getWishDir(id);
	new Float:wishspeed = floatsqroot(floatadd(floatmul(g_flWishdir[id][0], g_flWishdir[id][0]), floatmul(g_flWishdir[id][1], g_flWishdir[id][1])));
	normalize_vector(g_flWishdir[id]);
	if (wishspeed > 320.0)
	{
		wishspeed = 320.0;
	}
	new Float:currentspeed = floatadd(floatmul(g_flWishdir[id][0], g_flNewVel[id][0]), floatmul(g_flWishdir[id][1], g_flNewVel[id][1]));
	new Float:addspeed = floatsub(wishspeed, currentspeed);
	new Float:accelspeed = 0.0;
	if (addspeed > 0.0)
	{
		new Float:acc = float(get_cvar_num("sv_accelerate"));
		accelspeed = floatmul(floatmul(acc, g_flPrevFrameTime[id]), wishspeed);
		if (accelspeed > addspeed)
		{
			accelspeed = addspeed;
		}
		new var8 = g_flNewVel[id];
		var8[0] = floatadd(var8[0], floatmul(accelspeed, g_flWishdir[id][0]));
		new var9 = g_flNewVel[id][1];
		var9 = floatadd(var9, floatmul(accelspeed, g_flWishdir[id][1]));
	}
	new Float:speed = floatsqroot(floatadd(floatmul(g_flNewVel[id][0], g_flNewVel[id][0]), floatmul(g_flNewVel[id][1], g_flNewVel[id][1])));
	if (speed < 1.0)
	{
		g_flNewVel[id][0] = 0.0;
		g_flNewVel[id][1] = 0.0;
	}
	new Float:flDestination[3] = 0.0;
	flDestination[0] = floatadd(g_flNewOrigin[id][0], floatmul(g_flPrevFrameTime[id], g_flNewVel[id][0]));
	flDestination[1] = floatadd(g_flNewOrigin[id][1], floatmul(g_flPrevFrameTime[id], g_flNewVel[id][1]));
	flDestination[2] = floatadd(g_flNewOrigin[id][2], floatmul(g_flPrevFrameTime[id], g_flNewVel[id][2]));
	new ptr = create_tr2();
	new var1;
	if (g_iFlags[id] & 16384)
	{
		var1 = 3;
	}
	else
	{
		var1 = 1;
	}
	engfunc(32, g_flNewOrigin[id], flDestination, 0, var1, id, ptr);
	new Float:flFraction = 0.0;
	get_tr2(ptr, 4, flFraction);
	free_tr2(ptr);
	if (1.0 == flFraction)
	{
		vector_copy(flDestination, g_flNewOrigin[id]);
		return 0;
	}
	new Float:flDown[3] = 0.0;
	vector_copy(g_flNewOrigin[id], flDown);
	new Float:flDownVel[3] = 0.0;
	vector_copy(g_flNewVel[id], flDownVel);
	pmFlyMove(id, flDown, flDownVel);
	new Float:flUp[3] = 0.0;
	vector_copy(g_flNewOrigin[id], flUp);
	new Float:flUpVel[3] = 0.0;
	vector_copy(g_flNewVel[id], flUpVel);
	new Float:stepsize = float(get_cvar_num("sv_stepsize"));
	vector_copy(flUp, flDestination);
	new var10 = flDestination[2];
	var10 = floatadd(var10, stepsize);
	ptr = create_tr2();
	new var2;
	if (g_iFlags[id] & 16384)
	{
		var2 = 3;
	}
	else
	{
		var2 = 1;
	}
	engfunc(32, flUp, flDestination, 0, var2, id, ptr);
	new iStartSolid = get_tr2(ptr, 1);
	new iAllSolid = get_tr2(ptr, xs__ITaskId);
	new var3;
	if (iStartSolid && iAllSolid)
	{
		get_tr2(ptr, 5, flUp);
	}
	pmFlyMove(id, flUp, flUpVel);
	vector_copy(flUp, flDestination);
	new var11 = flDestination[2];
	var11 = floatsub(var11, stepsize);
	new var4;
	if (g_iFlags[id] & 16384)
	{
		var4 = 3;
	}
	else
	{
		var4 = 1;
	}
	engfunc(32, flUp, flDestination, 0, var4, id, ptr);
	new Float:flNormal[3] = 0.0;
	get_tr2(ptr, 7, flNormal);
	iStartSolid = get_tr2(ptr, 1);
	iAllSolid = get_tr2(ptr, xs__ITaskId);
	if (flNormal[2] < 0.7)
	{
		vector_copy(flDown, g_flNewOrigin[id]);
		vector_copy(flDownVel, g_flNewVel[id]);
		free_tr2(ptr);
		return 0;
	}
	new var5;
	if (iStartSolid && iAllSolid)
	{
		get_tr2(ptr, 5, flUp);
	}
	free_tr2(ptr);
	new Float:downdist = floatadd(floatmul(floatsub(flDown[0], g_flNewOrigin[id][0]), floatsub(flDown[0], g_flNewOrigin[id][0])), floatmul(floatsub(flDown[1], g_flNewOrigin[id][1]), floatsub(flDown[1], g_flNewOrigin[id][1])));
	new Float:updist = floatadd(floatmul(floatsub(flUp[0], g_flNewOrigin[id][0]), floatsub(flUp[0], g_flNewOrigin[id][0])), floatmul(floatsub(flUp[1], g_flNewOrigin[id][1]), floatsub(flUp[1], g_flNewOrigin[id][1])));
	if (downdist > updist)
	{
		vector_copy(flDown, g_flNewOrigin[id]);
		vector_copy(flDownVel, g_flNewVel[id]);
	}
	else
	{
		vector_copy(flUp, g_flNewOrigin[id]);
		vector_copy(flUpVel, g_flNewVel[id]);
	}
	return 0;
}

public pmAirMove(id)
{
	getWishDir(id);
	new Float:wishspeed = floatsqroot(floatadd(floatmul(g_flWishdir[id][0], g_flWishdir[id][0]), floatmul(g_flWishdir[id][1], g_flWishdir[id][1])));
	normalize_vector(g_flWishdir[id]);
	if (wishspeed > 320.0)
	{
		wishspeed = 320.0;
	}
	new Float:wishspd = wishspeed;
	if (wishspd > 30.0)
	{
		wishspd = 30.0;
	}
	new Float:currentspeed = floatadd(floatmul(g_flWishdir[id][0], g_flNewVel[id][0]), floatmul(g_flWishdir[id][1], g_flNewVel[id][1]));
	new Float:addspeed = floatsub(wishspd, currentspeed);
	new Float:accelspeed = 0.0;
	if (addspeed > 0.0)
	{
		new Float:airacc = float(get_cvar_num("sv_airaccelerate"));
		accelspeed = floatmul(floatmul(airacc, g_flPrevFrameTime[id]), wishspeed);
		if (accelspeed > addspeed)
		{
			accelspeed = addspeed;
		}
		new var1 = g_flNewVel[id];
		var1[0] = floatadd(var1[0], floatmul(accelspeed, g_flWishdir[id][0]));
		new var2 = g_flNewVel[id][1];
		var2 = floatadd(var2, floatmul(accelspeed, g_flWishdir[id][1]));
	}
	pmFlyMove(id, g_flNewOrigin[id], g_flNewVel[id]);
	return 0;
}

public pmFlyMove(id, Float:flOrigin[3], Float:flVelocity[3])
{
	new numplanes;
	new Float:flNormals[2][3] = {
		{
			99, 108, 95
		},
		{
			102, 105, 108
		}
	};
	new Float:flOriginalVel[3] = 0.0;
	vector_copy(flVelocity, flOriginalVel);
	new Float:flPrimalVel[3] = 0.0;
	vector_copy(flVelocity, flPrimalVel);
	new Float:flStart[3] = 0.0;
	new Float:flDestination[3] = 0.0;
	flStart[0] = flOrigin[0];
	flStart[1] = flOrigin[1];
	flStart[2] = flOrigin[2];
	new Float:flLeft = g_flPrevFrameTime[id];
	flDestination[0] = floatadd(flStart[0], floatmul(flLeft, flVelocity[0]));
	flDestination[1] = floatadd(flStart[1], floatmul(flLeft, flVelocity[1]));
	flDestination[2] = floatadd(flStart[2], floatmul(flLeft, flVelocity[2]));
	new ptr = create_tr2();
	new bump;
	while (bump < 4)
	{
		new var1;
		if (g_iFlags[id] & 16384)
		{
			var1 = 3;
		}
		else
		{
			var1 = 1;
		}
		engfunc(32, flStart, flDestination, 0, var1, id, ptr);
		new Float:flFraction = 0.0;
		get_tr2(ptr, 4, flFraction);
		new Float:flNormal[3] = 0.0;
		get_tr2(ptr, 7, flNormal);
		new iStartSolid = get_tr2(ptr, 1);
		new iAllSolid = get_tr2(ptr, xs__ITaskId);
		new var2;
		if (iStartSolid == 1 || iAllSolid == 1)
		{
			vector_copy(flStart, flOrigin);
			vector_copy(VEC_NULL, flVelocity);
			return 0;
		}
		if (!(1.0 == flFraction))
		{
			if (0.0 != flFraction)
			{
				vector_copy(flVelocity, flOriginalVel);
				numplanes = 0;
			}
			if (numplanes < 2)
			{
				vector_copy(flNormal, flNormals[numplanes]);
			}
			numplanes++;
			if (numplanes > 1)
			{
				if (numplanes > 2)
				{
					vector_copy(VEC_NULL, flVelocity);
					vector_copy(flStart, flOrigin);
					free_tr2(ptr);
					return 0;
				}
				new i;
				new j;
				i = 0;
				while (i < numplanes)
				{
					vector_copy(flOriginalVel, flVelocity);
					clipVelocity(id, flNormals[i], flVelocity);
					j = 0;
					while (j < numplanes)
					{
						new var3;
						if (i != j && vector_dot(flVelocity, flNormals[j]) < 0)
						{
							if (numplanes == j)
							{
								if (numplanes == i)
								{
									new Float:flDir[3] = 0.0;
									vector_cross(flNormals[0][flNormals], flNormals[1], flDir);
									new Float:d = vector_dot(flDir, flVelocity);
									vector_scale(flDir, d, flVelocity);
								}
								if (vector_dot(flVelocity, flPrimalVel) < 0)
								{
									vector_copy(VEC_NULL, flVelocity);
									vector_copy(flStart, flOrigin);
									free_tr2(ptr);
									return 0;
								}
							}
							i++;
						}
						j++;
					}
					if (numplanes == j)
					{
						if (numplanes == i)
						{
							new Float:flDir[3] = 0.0;
							vector_cross(flNormals[0][flNormals], flNormals[1], flDir);
							new Float:d = vector_dot(flDir, flVelocity);
							vector_scale(flDir, d, flVelocity);
						}
						if (vector_dot(flVelocity, flPrimalVel) < 0)
						{
							vector_copy(VEC_NULL, flVelocity);
							vector_copy(flStart, flOrigin);
							free_tr2(ptr);
							return 0;
						}
					}
					i++;
				}
				if (numplanes == i)
				{
					new Float:flDir[3] = 0.0;
					vector_cross(flNormals[0][flNormals], flNormals[1], flDir);
					new Float:d = vector_dot(flDir, flVelocity);
					vector_scale(flDir, d, flVelocity);
				}
				if (vector_dot(flVelocity, flPrimalVel) < 0)
				{
					vector_copy(VEC_NULL, flVelocity);
					vector_copy(flStart, flOrigin);
					free_tr2(ptr);
					return 0;
				}
			}
			else
			{
				clipVelocity(id, flNormal, flVelocity);
				vector_copy(flVelocity, flOriginalVel);
			}
			get_tr2(ptr, 5, flStart);
			flLeft = floatmul(flLeft, floatsub(1065353216, flFraction));
			flDestination[0] = floatadd(flStart[0], floatmul(flLeft, flVelocity[0]));
			flDestination[1] = floatadd(flStart[1], floatmul(flLeft, flVelocity[1]));
			flDestination[2] = floatadd(flStart[2], floatmul(flLeft, flVelocity[2]));
			bump++;
		}
		vector_copy(flDestination, flOrigin);
		free_tr2(ptr);
		return 0;
	}
	vector_copy(flDestination, flOrigin);
	free_tr2(ptr);
	return 0;
}

public clipVelocity(id, Float:flNormal[3], Float:flVelocity[3])
{
	new Float:backoff = floatadd(floatadd(floatmul(flNormal[0], flVelocity[0]), floatmul(flNormal[1], flVelocity[1])), floatmul(flNormal[2], flVelocity[2]));
	new i;
	while (i < 3)
	{
		flVelocity[i] = floatsub(flVelocity[i], floatmul(backoff, flNormal[i]));
		if (floatabs(flVelocity[i]) < 1036831949)
		{
			flVelocity[i] = 0.0;
		}
		i++;
	}
	return 0;
}

public getWishDir(id)
{
	new Float:pitch = g_flPrevAngles[id][0];
	new Float:yaw = g_flPrevAngles[id][1];
	new Float:roll = g_flPrevAngles[id][2];
	new Float:sy = floatsin(yaw, 1);
	new Float:cy = floatcos(yaw, 1);
	new Float:sp = floatsin(pitch, 1);
	new Float:cp = floatcos(pitch, 1);
	new Float:sr = floatsin(roll, 1);
	new Float:cr = floatcos(roll, 1);
	new Float:flForward[3] = 0.0;
	new Float:flRight[3] = 0.0;
	if (g_flPrevForwardMove[id])
	{
		flForward[0] = floatmul(cp, cy);
		flForward[1] = floatmul(cp, sy);
		flForward[2] = -sp;
	}
	if (g_flPrevSideMove[id])
	{
		flRight[0] = floatadd(floatmul(floatmul(-sr, sp), cy), floatmul(cr, sy));
		flRight[1] = floatsub(floatmul(floatmul(-sr, sp), sy), floatmul(cr, cy));
		flRight[2] = floatmul(-sr, cp);
	}
	flForward[2] = 0.0;
	flRight[2] = 0.0;
	normalize_vector(flForward);
	normalize_vector(flRight);
	g_flWishdir[id][0] = floatadd(floatmul(flForward[0], g_flPrevForwardMove[id]), floatmul(flRight[0], g_flPrevSideMove[id]));
	g_flWishdir[id][1] = floatadd(floatmul(flForward[1], g_flPrevForwardMove[id]), floatmul(flRight[1], g_flPrevSideMove[id]));
	g_flWishdir[id][2] = 0.0;
	return 0;
}

normalize_vector(Float:flVec[3])
{
	new Float:flMod = floatsqroot(floatadd(floatadd(floatmul(flVec[0], flVec[0]), floatmul(flVec[1], flVec[1])), floatmul(flVec[2], flVec[2])));
	if (flMod > 1.0E-7)
	{
		new var1 = flVec;
		var1[0] = floatdiv(var1[0], flMod);
		new var2 = flVec[1];
		var2 = floatdiv(var2, flMod);
		new var3 = flVec[2];
		var3 = floatdiv(var3, flMod);
	}
	return 0;
}

public sendCvars(id)
{
	query_client_cvar(id, 389788, "checkFilter", xs__ITaskId, 389908);
	return 0;
}

public checkFilter(id, szVar[], szValue[])
{
	new var1;
	if (equali(szValue, "Bad CVAR request", xs__ITaskId))
	{
		var1 = 0;
	}
	else
	{
		var1 = 1;
	}
	g_bIsSteam[id] = var1;
	send_cmd(id, "developer 0");
	if (g_bIsSteam[id])
	{
		send_cmd(id, "fps_max 99.5");
	}
	else
	{
		send_cmd(id, "fps_max 101");
	}
	send_cmd(id, "cl_sidespeed 400");
	send_cmd(id, "cl_backspeed 400");
	send_cmd(id, "cl_forwardspeed 400");
	send_cmd(id, "cl_movespeedkey 0.52");
	send_cmd(id, "cl_yawspeed 210");
	send_cmd(id, "cl_pitchspeed 225");
	if (g_bIsSteam[id])
	{
		send_cmd(id, "gl_vsync 0");
		send_cmd(id, "fps_override 0");
	}
	send_cmd(id, "+mlook");
	return 0;
}

public client_disconnect(id)
{
	hookOff(id);
	g_bOnGround[id] = 0;
	g_bTeleported[id] = 0;
	g_bOnFreezedBlock[id] = 0;
	return 0;
}

public taskRecreateOnce(id)
{
	TrieClear(g_tOnce);
	new iEntity;
	new szEnt[100];
	while (0 < (iEntity = find_ent_by_class(iEntity, "trigger_once")))
	{
		num_to_str(iEntity, szEnt, 99);
		TrieSetCell(g_tOnce, szEnt, xs__ITaskId);
	}
	new onceent[74];
	new size = ArraySize(g_aOnce);
	new i;
	while (i < size)
	{
		ArrayGetArray(g_aOnce, i, onceent);
		num_to_str(onceent[0], szEnt, 99);
		if (!TrieKeyExists(g_tOnce, szEnt))
		{
			new iEnt = create_entity("trigger_once");
			entity_set_string(iEnt, xs__ITaskId, "trigger_once");
			new Float:flOrigin[3] = 0.0;
			flOrigin[0] = onceent[1];
			flOrigin[1] = onceent[2];
			flOrigin[2] = onceent[3];
			new Float:flMins[3] = 0.0;
			flMins[0] = onceent[4];
			flMins[1] = onceent[5];
			flMins[2] = onceent[6];
			new Float:flMaxs[3] = 0.0;
			flMaxs[0] = onceent[7];
			flMaxs[1] = onceent[8];
			flMaxs[2] = onceent[9];
			entity_set_origin(iEnt, flOrigin);
			entity_set_size(iEnt, flMins, flMaxs);
			entity_set_string(iEnt, "", onceent[42]);
			entity_set_string(iEnt, 2, onceent[10]);
			entity_set_int(iEnt, 15, 1);
			DispatchSpawn(iEnt);
			ArrayDeleteItem(g_aOnce, i);
			onceent[0] = iEnt;
			ArrayPushArray(g_aOnce, onceent);
			size += -1;
			i += -1;
		}
		i++;
	}
	iEntity = -1;
	new szTargetName[32];
	while (0 < (iEntity = find_ent_by_class(iEntity, "func_wall_toggle")))
	{
		entity_get_string(iEntity, 4, szTargetName, 31);
		if (TrieKeyExists(g_tWallToggles, szTargetName))
		{
			DispatchSpawn(iEntity);
		}
	}
	iEntity = -1;
	new iState;
	while (0 < (iEntity = find_ent_by_class(iEntity, "func_plat")))
	{
		if (pev(iEntity, 83) & 1)
		{
			iState = ExecuteHam(17, iEntity);
			new var1;
			if (!(iState && iState == 2))
			{
				ExecuteHam(43, iEntity, 0, 0, 0, 1065353216);
			}
		}
	}
	return 0;
}

public eventTextMsg()
{
	new iPlayers[32];
	new iNum;
	get_players(iPlayers, iNum, "ach", 836);
	if (iNum)
	{
		new i;
		while (i < iNum)
		{
			if (is_user_localhost(iPlayers[i]))
			{
				client_cmd(iPlayers[i], "stop");
			}
			i++;
		}
	}
	g_bDemoRecording = false;
	return 0;
}

public eventSayText(id)
{
	new var1;
	if (read_data(1) == id && !g_cvarAllchat)
	{
		return 0;
	}
	new szChannel[22];
	new iPlayers[32];
	new iNum;
	read_data(2, szChannel, 21);
	new var2;
	if (szChannel[17])
	{
		var2 = 390996;
	}
	else
	{
		var2 = 391012;
	}
	get_players(iPlayers, iNum, var2, 836);
	if (!iNum)
	{
		return 0;
	}
	new szMessage[192];
	read_data(4, szMessage, 191);
	static msgSayText;
	if (!msgSayText)
	{
		msgSayText = get_user_msgid("SayText");
	}
	new i;
	while (i < iNum)
	{
		message_begin(8, msgSayText, 456, iPlayers[i]);
		write_byte(id);
		write_string(szChannel);
		write_string(391064);
		write_string(szMessage);
		message_end();
		i++;
	}
	return 0;
}

public eventResetHUD(id)
{
	if (g_cvarTimer == 2)
	{
		hideTimer(id, true);
	}
	return 0;
}

public hideTimer(id, bool:bHide)
{
	message_begin(1, get_user_msgid("HideWeapon"), 456, id);
	new var1;
	if (bHide)
	{
		var1 = 16;
	}
	else
	{
		var1 = 0;
	}
	write_byte(var1);
	message_end();
	if (bHide)
	{
		message_begin(8, get_user_msgid("Crosshair"), 456, id);
		write_byte(xs__ITaskId);
		message_end();
	}
	return 0;
}

public CAmbientGeneric_Spawn(iEnt)
{
	set_pev(iEnt, 7, 0);
	return 2;
}

public OR_PMMove(OrpheuStruct:pmove, server)
{
	new var1;
	if (g_bAxnBhop || g_cvarAxnbhop)
	{
		g_ppmove = pmove;
	}
	return 0;
}

public OR_PMJump()
{
	new var1;
	if (g_bAxnBhop || g_cvarAxnbhop)
	{
		g_flOldMaxSpeed = OrpheuGetStructMember(g_ppmove, "maxspeed");
		OrpheuSetStructMember(g_ppmove, "maxspeed", 0);
	}
	return 0;
}

public OR_PMJump_P()
{
	new var1;
	if (g_bAxnBhop || g_cvarAxnbhop)
	{
		OrpheuSetStructMember(g_ppmove, "fuser2", 0);
		OrpheuSetStructMember(g_ppmove, "maxspeed", g_flOldMaxSpeed);
	}
	return 0;
}

public hamDoorSpawn_P(ent)
{
	static szNull[16] =
	{
		99, 111, 109, 109, 111, 110, 47, 110, 117, 108, 108, 46, 119, 97, 118, 0
	};
	new Float:flDamage = 0.0;
	pev(ent, 50, flDamage);
	if (flDamage < -999.0)
	{
		set_pev(ent, 9, szNull);
		set_pev(ent, 10, szNull);
		set_pev(ent, 11, szNull);
		new var1;
		if (!g_bHealsOnMap && !equali(g_szMapName, "ak_rh_warehouse_ns", xs__ITaskId))
		{
			g_bHealsOnMap = 1;
		}
	}
	return 0;
}

public hamPlayerSpawn_P(id)
{
	if (g_cvarRemoveEquip)
	{
		delete_ent_by_class("game_player_equip");
		delete_ent_by_class("player_weaponstrip");
	}
	new var1;
	if (!is_user_connected(id) || !is_user_alive(id))
	{
		return 0;
	}
	cs_set_user_deaths(id, xs__ITaskId);
	set_user_frags(id, xs__ITaskId);
	new var2;
	if (g_bHealsOnMap && g_cvarAutoheal)
	{
		set_pev(id, 41, 1232348160);
	}
	if (g_bGodmode)
	{
		set_user_godmode(id, 1);
	}
	if (!g_bNotFirstSpawn[id])
	{
		g_bNotFirstSpawn[id] = 1;
		if (g_cvarMainmenu)
		{
			set_task(1045220557, "cmdMainMenu", id, 383308, xs__ITaskId, 383312, xs__ITaskId);
		}
	}
	if (g_cvarBlockmapsound)
	{
		client_cmd(id, "stopsound");
		if (is_user_localhost(id))
		{
			new players[32];
			new num;
			get_players(players, num, "bch", 836);
			new i;
			while (i < num)
			{
				client_cmd(players[i], "stopsound");
				i++;
			}
		}
	}
	if (!g_bNeedDefResp)
	{
		cmdStartPoint(id);
	}
	else
	{
		g_bNeedDefResp = false;
	}
	if (!user_has_weapon(id, 16, -1))
	{
		ham_give_weapon_by_name(id, "weapon_usp");
	}
	if (!user_has_weapon(id, 29, -1))
	{
		ham_give_weapon_by_name(id, "weapon_knife");
	}
	cs_set_weapon_ammo(find_ent_by_owner(-1, "weapon_usp", id, xs__ITaskId), 12);
	cs_set_user_bpammo(id, 16, 100);
	if (g_cvarSemiclip)
	{
		entity_set_int(id, 2, 1 << id & 31);
	}
	return 0;
}

public hamPlayerKilled_P(id)
{
	if (g_cvarSemiclip)
	{
		if (!is_user_alive(id))
		{
			entity_set_int(id, 2, xs__ITaskId);
		}
	}
	if (cs_get_user_team(id, 0) != 2)
	{
		return 0;
	}
	if (is_user_localhost(id))
	{
		new var1;
		if ((g_cvarMode == 1 && g_bRunFinished[id]) || g_cvarMode == 2)
		{
			set_task(1073741824, "taskAlive", id + 3000, 383308, xs__ITaskId, 383312, xs__ITaskId);
			return 0;
		}
	}
	set_task(1036831949, "taskAlive", id + 3000, 383308, xs__ITaskId, 383312, xs__ITaskId);
	return 0;
}

public taskAlive(id)
{
	set_pev(id, 73, 0);
	set_pev(id, 69, 3);
	set_pev(id, 80, 3);
	set_pev(id, 43, 1073741824);
	spawnPlayer(id);
	if (!is_zero_vec(g_flCheckPointOrigin[id]))
	{
		new Float:angles[3] = 0.0;
		if (g_cvarLoadAngles > 1)
		{
			angles[0] = g_flCheckPointAngle[id][0];
			angles[1] = g_flCheckPointAngle[id][1];
			angles[2] = g_flCheckPointAngle[id][2];
		}
		set_player_origin_ac(id, g_flCheckPointOrigin[id], angles, g_flGravity[id], 0.0);
		if (0.0 != g_flTimerStarted[id])
		{
			g_iGoCheckCounter[id]++;
		}
		new var1;
		if (g_cvarGocheckmsg && g_cvarMode == 1)
		{
			set_dhudmessage(100, 100, 100, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
			if (0.0 != g_flTimerStarted[id])
			{
				show_dhudmessage(id, "[%d cp %d gc]", g_iCheckPointCounter[id], g_iGoCheckCounter[id]);
			}
			show_dhudmessage(id, "gocheck");
		}
	}
	else
	{
		cmdStartPoint(id);
	}
	return 0;
}

public hamPlayerTakeDamage(victim, weapon, attacker, Float:damage, damagebits)
{
	if (g_cvarShowdamage)
	{
		new idamage = floatround(damage, xs__ITaskId);
		set_dhudmessage(g_cvarDamagered, g_cvarDamagegreen, g_cvarDamageblue, -1.0, 0.83, 0, 0.0, 0.0, 0.0, 2.0, false);
		new var1;
		if (idamage >= 0)
		{
			var1 = 392060;
		}
		else
		{
			var1 = 392068;
		}
		show_dhudmessage(victim, "%s%d HP", var1, abs(idamage));
	}
	return 0;
}

public fmCmdStart(id, uc_handle)
{
	if (g_cvarSemiclip)
	{
		if (!g_bReadPackets)
		{
			g_bReadPackets = true;
			if (g_iWaterGroup)
			{
				setWaterGroup(0);
			}
			static plr;
			get_players(g_iPlayers, g_iNum, 392080, 836);
			g_iNum -= 1;
			while (0 <= g_iNum)
			{
				plr = g_iPlayers[g_iNum];
				entity_set_int(plr, 2, 1 << plr & 31);
				g_iNum -= 1;
			}
			g_iLastPlayerIndex = 0;
		}
		new var1;
		if (g_iLastPlayerIndex && is_user_alive(g_iLastPlayerIndex))
		{
			entity_set_int(g_iLastPlayerIndex, 2, 1 << g_iLastPlayerIndex & 31);
		}
		if (is_user_alive(id))
		{
			entity_set_int(id, 2, 1 << id & 31);
		}
		entity_set_int(id, 2, xs__ITaskId);
		g_iLastPlayerIndex = id;
	}
	new var2;
	if (!is_user_connected(id) || !is_user_alive(id))
	{
		return 1;
	}
	g_flFrameTime[id] = get_uc(uc_handle, 1) / 1148846080;
	get_uc(uc_handle, 4, g_flSideMove[id]);
	get_uc(uc_handle, "", g_flForwardMove[id]);
	new var3;
	if (pev(id, 69) == 8 && !pev(id, 81) & 8)
	{
		return 1;
	}
	new var4;
	if (0.0 == g_flForwardMove[id] && 0.0 == g_flSideMove[id])
	{
		return 1;
	}
	new Float:flMaxSpeed = 0.0;
	pev(id, 56, flMaxSpeed);
	new Float:flWalkSpeed = floatmul(1057300152, flMaxSpeed);
	new var5;
	if (floatabs(g_flForwardMove[id]) <= flWalkSpeed && floatabs(g_flSideMove[id]) <= flWalkSpeed)
	{
		static Float:vOrigin[3];
		pev(id, 118, vOrigin);
		static Float:vAngle[3];
		pev(id, 126, vAngle);
		engfunc(17, vAngle);
		global_get(28, vAngle);
		new var6 = vOrigin;
		var6[0] = floatadd(var6[0], floatmul(1101004800, vAngle[0]));
		new var7 = vOrigin[1];
		var7 = floatadd(var7, floatmul(1101004800, vAngle[1]));
		new var8 = vOrigin[2];
		var8 = floatadd(var8, floatmul(1101004800, vAngle[2]));
		engfunc(26, id, vOrigin);
	}
	return 1;
}

public hamPlayerPreThink(id)
{
	new var1;
	if (!is_user_connected(id) || !is_user_alive(id))
	{
		return 0;
	}
	if (g_iButtons[id] & 8)
	{
		g_iSpecButtons[id] |= 8;
	}
	if (g_iButtons[id] & 2)
	{
		g_iSpecButtons[id] |= 2;
	}
	if (g_iButtons[id] & 512)
	{
		g_iSpecButtons[id] |= 512;
	}
	if (g_iButtons[id] & 16)
	{
		g_iSpecButtons[id] |= 16;
	}
	if (g_iButtons[id] & 1024)
	{
		g_iSpecButtons[id] |= 1024;
	}
	if (g_iButtons[id] & 4)
	{
		g_iSpecButtons[id] |= 4;
	}
	if (is_user_bot(id))
	{
		return 0;
	}
	if (g_cvarSemiclip)
	{
		new var2;
		if (g_setInvis[id] && g_setInvis[id] == 2)
		{
			entity_set_int(id, 2, xs__ITaskId);
		}
	}
	updateFreezeInfo(id);
	pev(id, 118, g_flOrigin[id]);
	pev(id, "say .%s", g_flVelocity[id]);
	pev(id, 126, g_flAngles[id]);
	g_iFlags[id] = pev(id, 84);
	g_iButtons[id] = pev(id, 81);
	pev(id, 60, g_flFuser2[id]);
	new var3;
	g_bWater[id] = g_iFlags[id] & 16 || pev(id, "A") >= 2;
	g_bLadder[id] = pev(id, 69) == 5;
	g_bHook[id] = g_bIsUsingHook[id];
	vector_copy(g_flOrigin[id], g_flPrevOrigin[id]);
	vector_copy(g_flVelocity[id], g_flPrevVelocity[id]);
	vector_copy(g_flAngles[id], g_flPrevAngles[id]);
	g_iPrevFlags[id] = g_iFlags[id];
	g_iOldButtons[id] = g_iPrevButtons[id];
	g_iPrevButtons[id] = g_iButtons[id];
	g_flPrevFuser2[id] = g_flFuser2[id];
	g_bPrevWater[id] = g_bWater[id];
	g_bPrevLadder[id] = g_bLadder[id];
	g_bPrevHook[id] = g_bHook[id];
	g_flPrevSideMove[id] = g_flSideMove[id];
	g_flPrevForwardMove[id] = g_flForwardMove[id];
	g_flPrevFrameTime[id] = g_flFrameTime[id];
	if (g_iTouched[id])
	{
		g_iTouched[id]--;
	}
	return 0;
}

public thinkBotButtons(iEnt)
{
	new players[32];
	new num;
	new id;
	get_players(players, num, "adh", 836);
	new iButtons;
	new i;
	while (i < num)
	{
		id = players[i];
		iButtons = pev(id, 81);
		if (iButtons & 8)
		{
			g_iSpecButtons[id] |= 8;
		}
		if (iButtons & 2)
		{
			g_iSpecButtons[id] |= 2;
		}
		if (iButtons & 512)
		{
			g_iSpecButtons[id] |= 512;
		}
		if (iButtons & 16)
		{
			g_iSpecButtons[id] |= 16;
		}
		if (iButtons & 1024)
		{
			g_iSpecButtons[id] |= 1024;
		}
		if (iButtons & 4)
		{
			g_iSpecButtons[id] |= 4;
		}
		i++;
	}
	set_pev(iEnt, 33, floatadd(1008981770, get_gametime()));
	return 0;
}

public hamPlayerPreThink_P(id)
{
	new var1;
	if (!is_user_connected(id) || is_user_bot(id))
	{
		return 0;
	}
	updateRoundTimer(id);
	if (!is_user_alive(id))
	{
		return 0;
	}
	if (g_cvarSemiclip)
	{
		new var2;
		if (g_setInvis[id] && g_setInvis[id] == 2)
		{
			entity_set_int(id, 2, 1 << id & 31);
		}
	}
	if (g_bIsUsingHook[id])
	{
		static distance;
		static Float:velocity[3];
		static origin[3];
		get_user_origin(id, origin, xs__ITaskId);
		distance = get_distance(g_iHookOrigin[id], origin);
		set_pev(id, 76, 6);
		if (distance > 36)
		{
			vector_copy(VEC_NULL, g_flHookWallOrigin[id]);
			new i;
			while (i < 3)
			{
				velocity[i] = float(g_cvarHookspeed) / distance + 20 * g_iHookOrigin[id][i] - origin[i];
				i++;
			}
			set_pev(id, "say .%s", velocity);
		}
		if (!is_zero_vec(g_flHookWallOrigin[id]))
		{
			vector_copy(VEC_NULL, velocity);
			set_pev(id, "say .%s", velocity);
			new iFlags = pev(id, 84);
			iFlags |= 16384;
			set_pev(id, 84, iFlags);
			new Float:VEC_DUCK_HULL_MIN[3] = {4.6188E-41,4.6188E-41,5.1928E-41};
			new Float:VEC_DUCK_HULL_MAX[3] = {4.6009E-41,4.6009E-41,9.2E-44};
			new Float:VEC_DUCK_VIEW[3] = {0.0,0.0,2.305E-41};
			engfunc(5, id, VEC_DUCK_HULL_MIN, VEC_DUCK_HULL_MAX);
			engfunc(26, id, g_flHookWallOrigin[id]);
			set_pev(id, 135, VEC_DUCK_VIEW);
		}
	}
	return 0;
}

public updateRoundTimer(id)
{
	static Float:GameTime[33];
	static bool:bTimerZeroed[33];
	if (g_cvarTimer < 2)
	{
		new var1;
		if (g_flRoundStartTime > 0.0 && get_gametime() > floatadd(1056964608, g_flRoundStartTime))
		{
			new var2;
			if (get_gametime() > floatadd(1056964608, GameTime[id]) || !GameTime[id])
			{
				GameTime[id] = get_gametime();
				new var3;
				if (is_user_alive(id) && g_bPlayerShowTimer[id] && g_cvarTimer && 0.0 != g_flTimerStarted[id])
				{
					if (0.0 != g_flTimerPaused[id])
					{
						sendRoundTime(id, floatround(floatsub(g_flTimerPaused[id], g_flTimerStarted[id]), 1));
					}
					else
					{
						sendRoundTime(id, floatround(floatsub(GameTime[id], g_flTimerStarted[id]), 1));
					}
					bTimerZeroed[id] = 0;
				}
				if (get_pcvar_num(g_pRoundtime))
				{
					sendRoundTime(id, get_pcvar_num(g_pRoundtime) * 60 - floatround(floatsub(get_gametime(), g_flRoundStartTime), 1));
					bTimerZeroed[id] = 0;
				}
				if (!bTimerZeroed[id])
				{
					sendRoundTime(id, 0);
					bTimerZeroed[id] = 1;
				}
			}
		}
	}
	return 0;
}

public hamButtonUse(ent, id)
{
	if (is_user_alive(id))
	{
		new szTarget[32];
		pev(ent, 4, szTarget, 31);
		if (TrieKeyExists(g_tStarts, szTarget))
		{
			startButton(id);
			if (g_cvarSetstarttouch)
			{
				get_player_position(id, g_flPlayerStartOrigin[id], g_flPlayerStartAngle[id], g_flPlayerStartGravity[id]);
			}
		}
		else
		{
			if (TrieKeyExists(g_tStops, szTarget))
			{
				finishButton(id);
			}
			if (equali(szTarget, "easy", xs__ITaskId))
			{
				new var1;
				if (!is_user_localhost(id) && !is_user_bot(id))
				{
					if (!checkFlood(id))
					{
						client_print_f(id, ColorType:5, "\x03[%s]\x01 This button is reserved to\x03 localhost", g_szPrefix);
					}
					return 4;
				}
			}
		}
		if (is_user_bot(id))
		{
			return 4;
		}
	}
	return 1;
}

public hamMultipleTouch(ent, id)
{
	if (is_user_alive(id))
	{
		finishButton(id);
	}
	if (is_user_bot(id))
	{
		return 4;
	}
	return 1;
}

public hamBreakableThink(ent)
{
	new iPlayers[32];
	new iNum;
	get_players(iPlayers, iNum, "ach", 836);
	if (iNum)
	{
		new i;
		while (i < iNum)
		{
			startButton(iPlayers[i]);
			i++;
		}
	}
	return 0;
}

public hamButtonTouch(ent, id)
{
	if (is_user_alive(id))
	{
		new szTarget[32];
		pev(ent, 4, szTarget, 31);
		if (equal(szTarget, "gogogo", xs__ITaskId))
		{
			startButton(id);
		}
		else
		{
			if (equal(szTarget, "stop_counter", xs__ITaskId))
			{
				finishButton(id);
			}
		}
	}
	if (is_user_bot(id))
	{
		return 4;
	}
	return 1;
}

public hamPlayerTouch(id, ent)
{
	if (is_user_alive(id))
	{
		if (g_bIsUsingHook[id])
		{
			pev(id, 118, g_flHookWallOrigin[id]);
		}
		if (ent)
		{
			new szClassName[32];
			pev(ent, 1, szClassName, 31);
			if (!equal(szClassName, "func_wall", xs__ITaskId))
			{
				g_iTouched[id] = 1;
			}
		}
	}
	return 0;
}

public hamHookTouch(ent, id)
{
	new var1;
	if (is_user_alive(id) && g_bIsUsingHook[id])
	{
		pev(id, 118, g_flHookWallOrigin[id]);
	}
	return 0;
}

public hamTriggerTouch(ent, id)
{
	if (is_user_alive(id))
	{
		g_iTouched[id] = 1;
	}
	return 0;
}

public hamWeaponEntityTouch(ent, id)
{
	new var1;
	if (is_user_alive(id) && g_cvarBlockweapons)
	{
		return 4;
	}
	return 1;
}

public hamWeaponEntityTouch2(ent, id)
{
	new var1;
	if (is_user_alive(id) && g_cvarBlockweapons > 1)
	{
		return 4;
	}
	return 1;
}

public messageSendAudio()
{
	new sArg[18];
	get_msg_arg_string(2, sArg, 17);
	if (TrieKeyExists(g_tStartSounds, sArg))
	{
		if (!(get_msg_block(23)))
		{
			set_msg_block(23, 1);
		}
		return 1;
	}
	return 0;
}

public messageHudTextArgs(iMsg, iDest, id)
{
	static sHint[28];
	get_msg_arg_string(1, sHint, 27);
	if (equal(sHint, "#Hint_press_buy_to_purchase", xs__ITaskId))
	{
		set_pdata_float(id, 198, xs__ITaskId, 5, 5);
		return 1;
	}
	return 0;
}

public messageHideWeapon()
{
	if (g_cvarTimer == 2)
	{
		set_msg_arg_int(1, 1, get_msg_arg_int(1) | 16);
	}
	return 0;
}

public cmdFinishMenu(id)
{
	new var1;
	if (is_user_localhost(id) && g_bDemoRecording && g_cvarMode == 1)
	{
		new szMenu[250];
		formatex(szMenu, 249, "\rFinish \yMenu\n\n\r1. \wAccept this demo\n\r2. \wAccept this demo and start a new one\n\r3. \wStart new demo\n\n\n\n\n\n\n\r0. \wExit");
		show_my_menu(id, 519, szMenu, -1, "FinishMenu");
	}
	return 1;
}

public handleFinishMenu(id, item)
{
	switch (item)
	{
		case 0:
		{
			stopDemo(id, false);
		}
		case 1:
		{
			stopDemo(id, true);
			if (task_exists(id + 3000, xs__ITaskId))
			{
				remove_task(id + 3000, xs__ITaskId);
			}
		}
		case 2:
		{
			startDemo(id, false);
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	return 0;
}

public cmdServerMenu(id)
{
	if (!is_user_localhost(id))
	{
		return 1;
	}
	new szMenu[250];
	formatex(szMenu, 249, "\rServer \yMenu\n\n\r1. \wcs0.kz-rush.ru:27015 \y[Hard]\n\r2. \wcs1.kz-rush.ru:27016 \y[Average]\n\r3. \wcs2.kz-rush.ru:27017 \y[Extreme]\n\n\n\n\n\n\r9. \wBack\n\r0. \wExit");
	show_my_menu(id, 775, szMenu, -1, "ServerMenu");
	return 1;
}

public handleServerMenu(id, item)
{
	switch (item)
	{
		case 0:
		{
			server_cmd("connect cs0.kz-rush.ru:27015");
		}
		case 1:
		{
			server_cmd("connect cs1.kz-rush.ru:27016");
		}
		case 2:
		{
			server_cmd("connect cs2.kz-rush.ru:27017");
		}
		case 8:
		{
			cmdMainMenu(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	cmdServerMenu(id);
	return 0;
}

public cmdMainMenu(id)
{
	new szMenu[400];
	formatex(szMenu, 399, "\rMain \yMenu\n\n");
	format(szMenu, 399, "%s\r1. \wCheckpoint\n", szMenu);
	new var1;
	if (is_zero_vec(g_flCheckPointOrigin[id]) || is_zero_vec(g_flCheckPointAngle[id]))
	{
		format(szMenu, 399, "%s\r2. \dGoCheck\n\n", szMenu);
	}
	else
	{
		format(szMenu, 399, "%s\r2. \wGoCheck\n\n", szMenu);
	}
	new var2;
	if (g_cvarMode && is_user_localhost(id))
	{
		format(szMenu, 399, "%s\r4. \wNew Demo\n", szMenu);
	}
	else
	{
		format(szMenu, 399, "%s\r4. \wStart\n", szMenu);
	}
	format(szMenu, 399, "%s\r5. \wSave Start\n", szMenu);
	if (is_user_localhost(id))
	{
		format(szMenu, 399, "%s\r6. \wSettings\n\n", szMenu);
		if (g_cvarMode >= 2)
		{
			new var3;
			if (g_bDemoRecording)
			{
				var3 = 395380;
			}
			else
			{
				var3 = 395392;
			}
			format(szMenu, 399, "%s\r7. \wMode: %sLJ Demo\n\r8. \wSave Demo\n", szMenu, var3);
		}
		else
		{
			if (g_cvarMode >= 1)
			{
				new var4;
				if (g_bDemoRecording)
				{
					var4 = 395576;
				}
				else
				{
					var4 = 395588;
				}
				format(szMenu, 399, "%s\r7. \wMode: %sKZ Demo\n\r8. \wStop Demo\n", szMenu, var4);
			}
			if (0 <= g_cvarMode)
			{
				format(szMenu, 399, "%s\r7. \wMode: \dNo Demo\n\r8. \wServers\n", szMenu);
			}
		}
		format(szMenu, 399, "%s\n\r9. VIP\n", szMenu);
	}
	else
	{
		format(szMenu, 399, "%s\n\n\n\n\n", szMenu);
	}
	format(szMenu, 399, "%s\r0. \wExit", szMenu);
	if (is_user_localhost(id))
	{
		show_my_menu(id, 1019, szMenu, -1, "MainMenu");
	}
	else
	{
		show_my_menu(id, 539, szMenu, -1, "MainMenu");
	}
	return 1;
}

public handleMainMenu(id, item)
{
	switch (item)
	{
		case 0:
		{
			cmdCheckPoint(id);
		}
		case 1:
		{
			cmdGoCheck(id);
		}
		case 3:
		{
			startDemo(id, false);
		}
		case 4:
		{
			cmdSetStartPoint(id);
		}
		case 5:
		{
			cmdSettingsMenu(id);
			return 1;
		}
		case 6:
		{
			if (g_bDemoRecording)
			{
				client_print_f(id, ColorType:5, "\x03[%s]\x01 You should stop the recording firstly (say\x03 /stop\x01)", g_szPrefix);
			}
			else
			{
				if (g_cvarMode >= 2)
				{
					set_pcvar_num(g_hcvarMode, xs__ITaskId);
				}
				if (g_cvarMode >= 1)
				{
					set_pcvar_num(g_hcvarMode, 2);
				}
				if (0 <= g_cvarMode)
				{
					set_pcvar_num(g_hcvarMode, 1);
				}
			}
		}
		case 7:
		{
			new var1;
			if (g_cvarMode && is_user_localhost(id))
			{
				stopDemo(id, false);
			}
		}
		case 8:
		{
			send_cmd(id, "say /vip");
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	cmdMainMenu(id);
	return 0;
}

public cmdBotSettingsMenu(id)
{
	if (!is_user_localhost(id))
	{
		return 1;
	}
	new szMenu[300];
	formatex(szMenu, 299, "\rBot Settings \yMenu\n\n");
	new iKey = 761;
	new var1;
	if (g_cvarBotDownload)
	{
		var1 = 396476;
	}
	else
	{
		var1 = 396496;
	}
	format(szMenu, 299, "%s\r1. \wDownload New Bots - %s\n", szMenu, var1);
	if (g_cvarBotDownload)
	{
		new var2;
		if (g_cvarBotRemoveOld)
		{
			var2 = 396644;
		}
		else
		{
			var2 = 396664;
		}
		format(szMenu, 299, "%s\r2. \wRemove Old Bots - %s\n", szMenu, var2);
		iKey |= 2;
	}
	else
	{
		new var3;
		if (g_cvarBotRemoveOld)
		{
			var3 = 396812;
		}
		else
		{
			var3 = 396832;
		}
		format(szMenu, 299, "%s\r2. \dRemove Old Bots - %s\n", szMenu, var3);
	}
	new var4;
	if (g_cvarBotDownload && !g_cvarBotRemoveOld)
	{
		new var5;
		if (g_cvarBotShowOnlyNew)
		{
			var5 = 396992;
		}
		else
		{
			var5 = 397012;
		}
		format(szMenu, 299, "%s\r3. \wShow only New Bots - %s\n", szMenu, var5);
		iKey |= 4;
	}
	else
	{
		new var6;
		if (g_cvarBotShowOnlyNew)
		{
			var6 = 397172;
		}
		else
		{
			var6 = 397192;
		}
		format(szMenu, 299, "%s\r3. \dShow only New Bots - %s\n", szMenu, var6);
	}
	new var7;
	if (g_cvarBotAutoCreate)
	{
		var7 = 397348;
	}
	else
	{
		var7 = 397368;
	}
	format(szMenu, 299, "%s\r4. \wCreate on Connect - %s\n", szMenu, var7);
	new var8;
	if (g_cvarBotUseCmd)
	{
		var8 = 397532;
	}
	else
	{
		var8 = 397552;
	}
	format(szMenu, 299, "%s\r5. \wExecute use command - %s\n", szMenu, var8);
	new var9;
	if (g_cvarBotSync)
	{
		var9 = 397728;
	}
	else
	{
		var9 = 397748;
	}
	format(szMenu, 299, "%s\r6. \wSync with Start Timer - %s\n\n", szMenu, var9);
	format(szMenu, 299, "%s\r7. \ySave Settings\n\n\r8. \wBot Menu\n\n\r0. \wExit", szMenu);
	show_my_menu(id, iKey, szMenu, -1, "BotSettingsMenu");
	return 1;
}

public handleBotSettingsMenu(id, item)
{
	switch (item)
	{
		case 0:
		{
			if (g_cvarBotDownload)
			{
				set_pcvar_num(g_hcvarBotDownload, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBotDownload, 1);
			}
		}
		case 1:
		{
			if (g_cvarBotRemoveOld)
			{
				set_pcvar_num(g_hcvarBotRemoveOld, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBotRemoveOld, 1);
			}
		}
		case 2:
		{
			if (g_cvarBotShowOnlyNew)
			{
				set_pcvar_num(g_hcvarBotShowOnlyNew, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBotShowOnlyNew, 1);
			}
		}
		case 3:
		{
			if (g_cvarBotAutoCreate)
			{
				set_pcvar_num(g_hcvarBotAutoCreate, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBotAutoCreate, 1);
			}
		}
		case 4:
		{
			if (g_cvarBotUseCmd)
			{
				set_pcvar_num(g_hcvarBotUseCmd, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBotUseCmd, 1);
			}
		}
		case 5:
		{
			if (g_cvarBotSync)
			{
				set_pcvar_num(g_hcvarBotSync, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBotSync, 1);
			}
		}
		case 6:
		{
			saveCvars(id);
		}
		case 7:
		{
			send_cmd(id, "say /bot");
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	cmdBotSettingsMenu(id);
	return 0;
}

public SettingsMenu1(id)
{
	new szMenu[400];
	formatex(szMenu, 399, "\rGeneral \wSettings\y\R1 / 5\n\n");
	new var1;
	if (g_cvarBlockct)
	{
		var1 = 398308;
	}
	else
	{
		var1 = 398328;
	}
	format(szMenu, 399, "%s\r1. \wBlock CT - %s\n", szMenu, var1);
	new var3;
	if (g_cvarTimer)
	{
		new var2;
		if (g_cvarTimer == 1)
		{
			var2 = 398460;
		}
		else
		{
			var2 = 398480;
		}
		var3 = var2;
	}
	else
	{
		var3 = 398516;
	}
	format(szMenu, 399, "%s\r2. \wRound Timer - %s\n", szMenu, var3);
	new var4;
	if (g_cvarLoadrecords)
	{
		var4 = 398736;
	}
	else
	{
		var4 = 398756;
	}
	format(szMenu, 399, "%s\r3. \wAllow Downloading of Records List - %s\n", szMenu, var4);
	new var5;
	if (g_cvarAutomode)
	{
		var5 = 398948;
	}
	else
	{
		var5 = 398968;
	}
	format(szMenu, 399, "%s\r4. \wAutoDetect LJ/KZ Demo Mode - %s\n", szMenu, var5);
	new var6;
	if (g_cvarMpbhop)
	{
		var6 = 399080;
	}
	else
	{
		var6 = 399100;
	}
	format(szMenu, 399, "%s\r5. \wMpBhop - %s\n", szMenu, var6);
	new var8;
	if (g_cvarMainmenu)
	{
		new var7;
		if (g_cvarMainmenu == 1)
		{
			var7 = 399248;
		}
		else
		{
			var7 = 399292;
		}
		var8 = var7;
	}
	else
	{
		var8 = 399396;
	}
	format(szMenu, 399, "%s\r6. \wShow Main Menu - %s\n\n", szMenu, var8);
	format(szMenu, 399, "%s\r7. \ySave Settings\n\n\r8. \wMain Menu\n\r9. \wMore\n\r0. \wExit", szMenu);
	show_my_menu(id, 1023, szMenu, -1, "SettingsMenu1");
	return 1;
}

public handleSettingsMenu1(id, item)
{
	switch (item)
	{
		case 0:
		{
			if (g_cvarBlockct)
			{
				set_pcvar_num(g_hcvarBlockct, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBlockct, 1);
			}
		}
		case 1:
		{
			if (g_cvarTimer >= 2)
			{
				set_pcvar_num(g_hcvarTimer, xs__ITaskId);
				hideTimer(id, false);
			}
			else
			{
				if (g_cvarTimer >= 1)
				{
					set_pcvar_num(g_hcvarTimer, 2);
					hideTimer(id, true);
				}
				if (0 <= g_cvarTimer)
				{
					set_pcvar_num(g_hcvarTimer, 1);
					hideTimer(id, false);
				}
			}
		}
		case 2:
		{
			if (g_cvarLoadrecords)
			{
				set_pcvar_num(g_hcvarLoadrecords, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarLoadrecords, 1);
			}
		}
		case 3:
		{
			if (g_cvarAutomode)
			{
				set_pcvar_num(g_hcvarAutomode, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarAutomode, 1);
			}
		}
		case 4:
		{
			if (g_cvarMpbhop)
			{
				set_pcvar_num(g_hcvarMpbhop, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarMpbhop, 1);
			}
		}
		case 5:
		{
			if (g_cvarMainmenu >= 2)
			{
				set_pcvar_num(g_hcvarMainmenu, xs__ITaskId);
			}
			else
			{
				if (g_cvarMainmenu >= 1)
				{
					set_pcvar_num(g_hcvarMainmenu, 2);
				}
				if (0 <= g_cvarMainmenu)
				{
					set_pcvar_num(g_hcvarMainmenu, 1);
				}
			}
		}
		case 6:
		{
			saveCvars(id);
		}
		case 7:
		{
			cmdMainMenu(id);
			return 1;
		}
		case 8:
		{
			SettingsMenu2(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	SettingsMenu1(id);
	return 0;
}

public SettingsMenu2(id)
{
	new szMenu[400];
	formatex(szMenu, 399, "\rChat \wSettings\y\R2 / 5\n\n");
	new var1;
	if (g_cvarChatmsg)
	{
		var1 = 400036;
	}
	else
	{
		var1 = 400056;
	}
	format(szMenu, 399, "%s\r1. \wUseful Chat Messages - %s\n", szMenu, var1);
	new szMode[30];
	if (g_cvarRecordmsgMode >= 3)
	{
		formatex(szMode, 29, "\rWorld + Community records");
	}
	else
	{
		if (g_cvarRecordmsgMode >= 2)
		{
			formatex(szMode, 29, "\yCommunity record");
		}
		if (g_cvarRecordmsgMode >= 1)
		{
			formatex(szMode, 29, "\yWorld record");
		}
		formatex(szMode, 29, "\dNone");
	}
	format(szMenu, 399, "%s\r2. \wRecord Message for - %s\n", szMenu, szMode);
	new var2;
	if (g_cvarCurrentRecordmsg)
	{
		var2 = 400644;
	}
	else
	{
		var2 = 400664;
	}
	format(szMenu, 399, "%s\r3. \wCurrent Record Message - %s\n", szMenu, var2);
	new var3;
	if (g_cvarRecordDiff)
	{
		var3 = 400820;
	}
	else
	{
		var3 = 400840;
	}
	format(szMenu, 399, "%s\r4. \wRecord Difference - %s\n", szMenu, var3);
	new var4;
	if (g_cvarAttempts)
	{
		var4 = 400980;
	}
	else
	{
		var4 = 401000;
	}
	format(szMenu, 399, "%s\r5. \wDemo Attempts - %s\n", szMenu, var4);
	new var5;
	if (g_cvarAllchat)
	{
		var5 = 401124;
	}
	else
	{
		var5 = 401144;
	}
	format(szMenu, 399, "%s\r6. \wAll Chat - %s\n\n", szMenu, var5);
	format(szMenu, 399, "%s\r7. \ySave Settings\n\n\r8. \wBack\n\r9. \wMore\n\r0. \wExit", szMenu);
	show_my_menu(id, 1023, szMenu, -1, "SettingsMenu2");
	return 1;
}

public handleSettingsMenu2(id, item)
{
	switch (item)
	{
		case 0:
		{
			if (g_cvarChatmsg)
			{
				set_pcvar_num(g_hcvarChatmsg, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarChatmsg, 1);
			}
		}
		case 1:
		{
			if (g_cvarRecordmsgMode >= 3)
			{
				set_pcvar_num(g_hcvarRecordmsgMode, xs__ITaskId);
			}
			else
			{
				if (g_cvarRecordmsgMode >= 2)
				{
					set_pcvar_num(g_hcvarRecordmsgMode, "");
				}
				if (g_cvarRecordmsgMode >= 1)
				{
					set_pcvar_num(g_hcvarRecordmsgMode, 2);
				}
				if (0 <= g_cvarRecordmsgMode)
				{
					set_pcvar_num(g_hcvarRecordmsgMode, 1);
				}
			}
		}
		case 2:
		{
			if (g_cvarCurrentRecordmsg)
			{
				set_pcvar_num(g_hcvarCurrentRecordmsg, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarCurrentRecordmsg, 1);
			}
		}
		case 3:
		{
			if (g_cvarRecordDiff)
			{
				set_pcvar_num(g_hcvarRecordDiff, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarRecordDiff, 1);
			}
		}
		case 4:
		{
			if (g_cvarAttempts)
			{
				set_pcvar_num(g_hcvarAttempts, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarAttempts, 1);
			}
		}
		case 5:
		{
			if (g_cvarAllchat)
			{
				set_pcvar_num(g_hcvarAllchat, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarAllchat, 1);
			}
		}
		case 6:
		{
			saveCvars(id);
		}
		case 7:
		{
			SettingsMenu1(id);
			return 1;
		}
		case 8:
		{
			SettingsMenu3(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	SettingsMenu2(id);
	return 0;
}

public SettingsMenu3(id)
{
	new szMenu[400];
	formatex(szMenu, 399, "\rExtra \wSettings\y\R3 / 5\n\n");
	new var1;
	if (g_cvarAxnbhop)
	{
		var1 = 401680;
	}
	else
	{
		var1 = 401700;
	}
	format(szMenu, 399, "%s\r1. \wAXN Bhop - %s\n", szMenu, var1);
	new var2;
	if (g_cvarAutoheal)
	{
		var2 = 401848;
	}
	else
	{
		var2 = 401868;
	}
	format(szMenu, 399, "%s\r2. \wAutoHeal on Map - %s\n", szMenu, var2);
	new var3;
	if (g_cvarShowdamage)
	{
		var3 = 402000;
	}
	else
	{
		var3 = 402020;
	}
	format(szMenu, 399, "%s\r3. \wShow Damage - %s\n", szMenu, var3);
	new var4;
	if (g_cvarSetstarttouch)
	{
		var4 = 402256;
	}
	else
	{
		var4 = 402276;
	}
	format(szMenu, 399, "%s\r4. \wSet Start Position by Touching Button - %s\n", szMenu, var4);
	new var5;
	if (g_cvarBlockmapsound)
	{
		var5 = 402428;
	}
	else
	{
		var5 = 402448;
	}
	format(szMenu, 399, "%s\r5. \wBlock Map Sounds - %s\n", szMenu, var5);
	new var7;
	if (g_cvarBlockweapons)
	{
		new var6;
		if (g_cvarBlockweapons == 2)
		{
			var6 = 402616;
		}
		else
		{
			var6 = 402672;
		}
		var7 = var6;
	}
	else
	{
		var7 = 402764;
	}
	format(szMenu, 399, "%s\r6. \wBlock Weapon PickUp - %s\n\n", szMenu, var7);
	format(szMenu, 399, "%s\r7. \ySave Settings\n\n\r8. \wBack\n\r9. \wMore\n\r0. \wExit", szMenu);
	show_my_menu(id, 1023, szMenu, -1, "SettingsMenu3");
	return 1;
}

public handleSettingsMenu3(id, item)
{
	switch (item)
	{
		case 0:
		{
			if (g_cvarAxnbhop)
			{
				set_pcvar_num(g_hcvarAxnbhop, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarAxnbhop, 1);
			}
		}
		case 1:
		{
			if (g_cvarAutoheal)
			{
				set_pcvar_num(g_hcvarAutoheal, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarAutoheal, 1);
			}
		}
		case 2:
		{
			if (g_cvarShowdamage)
			{
				set_pcvar_num(g_hcvarShowdamage, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarShowdamage, 1);
			}
		}
		case 3:
		{
			if (g_cvarSetstarttouch)
			{
				set_pcvar_num(g_hcvarSetstarttouch, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarSetstarttouch, 1);
			}
		}
		case 4:
		{
			if (g_cvarBlockmapsound)
			{
				set_pcvar_num(g_hcvarBlockmapsound, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarBlockmapsound, 1);
			}
		}
		case 5:
		{
			if (g_cvarBlockweapons >= 2)
			{
				set_pcvar_num(g_hcvarBlockweapons, xs__ITaskId);
			}
			else
			{
				if (g_cvarBlockweapons >= 1)
				{
					set_pcvar_num(g_hcvarBlockweapons, 2);
				}
				if (0 <= g_cvarBlockweapons)
				{
					set_pcvar_num(g_hcvarBlockweapons, 1);
				}
			}
		}
		case 6:
		{
			saveCvars(id);
		}
		case 7:
		{
			SettingsMenu2(id);
			return 1;
		}
		case 8:
		{
			SettingsMenu4(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	SettingsMenu3(id);
	return 0;
}

public SettingsMenu4(id)
{
	new szMenu[400];
	formatex(szMenu, 399, "\rCheckpoint \wSettings\y\R4 / 5\n\n");
	new var1;
	if (g_cvarCheckpoints)
	{
		var1 = 403356;
	}
	else
	{
		var1 = 403376;
	}
	format(szMenu, 399, "%s\r1. \wAllow Checkpoints - %s\n", szMenu, var1);
	new var3;
	if (g_cvarAllowaircp)
	{
		new var2;
		if (g_cvarAllowaircp == 1)
		{
			var2 = 403524;
		}
		else
		{
			var2 = 403560;
		}
		var3 = var2;
	}
	else
	{
		var3 = 403580;
	}
	format(szMenu, 399, "%s\r2. \wAllow Cp in Air - %s\n", szMenu, var3);
	new var4;
	if (g_cvarGcdemo)
	{
		var4 = 403784;
	}
	else
	{
		var4 = 403804;
	}
	format(szMenu, 399, "%s\r3. \wGoCheck = New Demo in LJ Mode - %s\n", szMenu, var4);
	new var6;
	if (g_cvarLoadAngles)
	{
		new var5;
		if (g_cvarLoadAngles == 1)
		{
			var5 = 403960;
		}
		else
		{
			if (g_cvarLoadAngles == 2)
			{
				var5 = 403992;
			}
			var5 = 404044;
		}
		var6 = var5;
	}
	else
	{
		var6 = 404128;
	}
	format(szMenu, 399, "%s\r4. \wLoad Saved Angles - %s\n", szMenu, var6);
	new var7;
	if (g_cvarCheckpointmsg)
	{
		var7 = 404308;
	}
	else
	{
		var7 = 404328;
	}
	format(szMenu, 399, "%s\r5. \wShow Checkpoint Message - %s\n", szMenu, var7);
	new var8;
	if (g_cvarGocheckmsg)
	{
		var8 = 404500;
	}
	else
	{
		var8 = 404520;
	}
	format(szMenu, 399, "%s\r6. \wShow GoCheck Message - %s\n\n", szMenu, var8);
	format(szMenu, 399, "%s\r7. \ySave Settings\n\n\r8. \wBack\n\r9. \wMore\n\r0. \wExit", szMenu);
	show_my_menu(id, 1023, szMenu, -1, "SettingsMenu4");
	return 1;
}

public handleSettingsMenu4(id, item)
{
	switch (item)
	{
		case 0:
		{
			if (g_cvarCheckpoints)
			{
				set_pcvar_num(g_hcvarCheckpoints, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarCheckpoints, 1);
			}
		}
		case 1:
		{
			if (g_cvarAllowaircp >= 2)
			{
				set_pcvar_num(g_hcvarAllowaircp, xs__ITaskId);
			}
			else
			{
				if (g_cvarAllowaircp >= 1)
				{
					set_pcvar_num(g_hcvarAllowaircp, 2);
				}
				if (0 <= g_cvarAllowaircp)
				{
					set_pcvar_num(g_hcvarAllowaircp, 1);
				}
			}
		}
		case 2:
		{
			if (g_cvarGcdemo)
			{
				set_pcvar_num(g_hcvarGcdemo, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarGcdemo, 1);
			}
		}
		case 3:
		{
			if (g_cvarLoadAngles >= 3)
			{
				set_pcvar_num(g_hcvarLoadAngles, xs__ITaskId);
			}
			else
			{
				if (g_cvarLoadAngles >= 2)
				{
					set_pcvar_num(g_hcvarLoadAngles, "");
				}
				if (g_cvarLoadAngles >= 1)
				{
					set_pcvar_num(g_hcvarLoadAngles, 2);
				}
				if (0 <= g_cvarLoadAngles)
				{
					set_pcvar_num(g_hcvarLoadAngles, 1);
				}
			}
		}
		case 4:
		{
			if (g_cvarCheckpointmsg)
			{
				set_pcvar_num(g_hcvarCheckpointmsg, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarCheckpointmsg, 1);
			}
		}
		case 5:
		{
			if (g_cvarGocheckmsg)
			{
				set_pcvar_num(g_hcvarGocheckmsg, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarGocheckmsg, 1);
			}
		}
		case 6:
		{
			saveCvars(id);
		}
		case 7:
		{
			SettingsMenu3(id);
			return 1;
		}
		case 8:
		{
			SettingsMenu5(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	SettingsMenu4(id);
	return 0;
}

public SettingsMenu5(id)
{
	new szMenu[400];
	formatex(szMenu, 399, "\rTop10 / Finish / Model \wSettings\y\R5 / 5\n\n");
	new var1;
	if (g_cvarTop)
	{
		var1 = 405152;
	}
	else
	{
		var1 = 405172;
	}
	format(szMenu, 399, "%s\r1. \wEnable KZ Top10 - %s\n", szMenu, var1);
	new var2;
	if (g_cvarTopalone)
	{
		var2 = 405356;
	}
	else
	{
		var2 = 405376;
	}
	format(szMenu, 399, "%s\r2. \wKZ Top10 is Only for You - %s\n", szMenu, var2);
	new var3;
	if (g_cvarShowplace)
	{
		var3 = 405568;
	}
	else
	{
		var3 = 405588;
	}
	format(szMenu, 399, "%s\r3. \wShow Top Place when Finish - %s\n", szMenu, var3);
	new szMode[30];
	if (g_cvarFinishmsgMode >= 3)
	{
		formatex(szMode, 29, "\rFirst place in KZ Top10");
	}
	else
	{
		if (g_cvarFinishmsgMode >= 2)
		{
			formatex(szMode, 29, "\yCommunity record");
		}
		if (g_cvarFinishmsgMode >= 1)
		{
			formatex(szMode, 29, "\yWorld Record");
		}
		formatex(szMode, 29, "\dNone");
	}
	format(szMenu, 399, "%s\r4. \wShow Finish Message for - %s\n", szMenu, szMode);
	if (g_cvarFinishsoundMode >= 3)
	{
		formatex(szMode, 29, "\rFirst place in KZ Top10");
	}
	else
	{
		if (g_cvarFinishsoundMode >= 2)
		{
			formatex(szMode, 29, "\yCommunity record");
		}
		if (g_cvarFinishsoundMode >= 1)
		{
			formatex(szMode, 29, "\yWorld Record");
		}
		formatex(szMode, 29, "\dNone");
	}
	format(szMenu, 399, "%s\r5. \wPlay Finish Sound for - %s\n", szMenu, szMode);
	new szModel[30];
	if (g_cvarPlayerModel >= 5)
	{
		formatex(szModel, 29, "\rAuto");
	}
	else
	{
		if (g_cvarPlayerModel >= 4)
		{
			formatex(szModel, 29, "\yGIGN");
		}
		if (g_cvarPlayerModel >= 3)
		{
			formatex(szModel, 29, "\ySAS");
		}
		if (g_cvarPlayerModel >= 2)
		{
			formatex(szModel, 29, "\yGSG-9");
		}
		if (g_cvarPlayerModel >= 1)
		{
			formatex(szModel, 29, "\ySeal Team 6");
		}
		if (0 <= g_cvarPlayerModel)
		{
			formatex(szModel, 29, "\dChoose in Menu");
		}
	}
	format(szMenu, 399, "%s\r6. \wPlayer Model - %s\n\n", szMenu, szModel);
	format(szMenu, 399, "%s\r7. \ySave Settings\n\n\r8. \wBack\n\r9. \dMore\n\r0. \wExit", szMenu);
	show_my_menu(id, 1023, szMenu, -1, "SettingsMenu5");
	return 1;
}

public handleSettingsMenu5(id, item)
{
	switch (item)
	{
		case 0:
		{
			if (g_cvarTop)
			{
				set_pcvar_num(g_hcvarTop, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarTop, 1);
			}
		}
		case 1:
		{
			if (g_cvarTopalone)
			{
				set_pcvar_num(g_hcvarTopalone, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarTopalone, 1);
			}
		}
		case 2:
		{
			if (g_cvarShowplace)
			{
				set_pcvar_num(g_hcvarShowplace, xs__ITaskId);
			}
			else
			{
				set_pcvar_num(g_hcvarShowplace, 1);
			}
		}
		case 3:
		{
			if (g_cvarFinishmsgMode >= 3)
			{
				set_pcvar_num(g_hcvarFinishmsgMode, xs__ITaskId);
			}
			else
			{
				if (g_cvarFinishmsgMode >= 2)
				{
					set_pcvar_num(g_hcvarFinishmsgMode, "");
				}
				if (g_cvarFinishmsgMode >= 1)
				{
					set_pcvar_num(g_hcvarFinishmsgMode, 2);
				}
				if (0 <= g_cvarFinishmsgMode)
				{
					set_pcvar_num(g_hcvarFinishmsgMode, 1);
				}
			}
		}
		case 4:
		{
			if (g_cvarFinishsoundMode >= 3)
			{
				set_pcvar_num(g_hcvarFinishsoundMode, xs__ITaskId);
			}
			else
			{
				if (g_cvarFinishsoundMode >= 2)
				{
					set_pcvar_num(g_hcvarFinishsoundMode, "");
				}
				if (g_cvarFinishsoundMode >= 1)
				{
					set_pcvar_num(g_hcvarFinishsoundMode, 2);
				}
				if (0 <= g_cvarFinishsoundMode)
				{
					set_pcvar_num(g_hcvarFinishsoundMode, 1);
				}
			}
		}
		case 5:
		{
			if (g_cvarPlayerModel >= 5)
			{
				set_pcvar_num(g_hcvarPlayerModel, xs__ITaskId);
			}
			else
			{
				if (g_cvarPlayerModel >= 4)
				{
					set_pcvar_num(g_hcvarPlayerModel, 5);
				}
				if (g_cvarPlayerModel >= 3)
				{
					set_pcvar_num(g_hcvarPlayerModel, 4);
				}
				if (g_cvarPlayerModel >= 2)
				{
					set_pcvar_num(g_hcvarPlayerModel, "");
				}
				if (g_cvarPlayerModel >= 1)
				{
					set_pcvar_num(g_hcvarPlayerModel, 2);
				}
				if (0 <= g_cvarPlayerModel)
				{
					set_pcvar_num(g_hcvarPlayerModel, 1);
				}
			}
		}
		case 6:
		{
			saveCvars(id);
		}
		case 7:
		{
			SettingsMenu4(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	SettingsMenu5(id);
	return 0;
}

public cmdSay(id)
{
	if (!is_user_connected(id))
	{
		return 0;
	}
	new szMessage[192];
	read_args(szMessage, 191);
	remove_quotes(szMessage);
	new var1;
	if (equal(szMessage, 407100, xs__ITaskId) || equal(szMessage, 407108, xs__ITaskId) || szMessage[0] == 64)
	{
		return 2;
	}
	trim(szMessage);
	static szCommand[10];
	copy(szCommand, 9, szMessage[1]);
	new var2;
	if (szMessage[0] == 47 && TrieKeyExists(g_tCommunities, szCommand))
	{
		new szMap[60];
		parse(szMessage, szMessage, strlen(szCommand) + 2, szMap, 59);
		if (!szMap[0])
		{
			copy(szMap, 59, g_szMapName);
		}
		new szHUDMessage[400];
		new szHUDMessage2[400];
		new commid;
		new bool:bMapFound;
		commid = 0;
		while (commid < 25)
		{
			new var3;
			if (equali(g_szDemoFiles[commid][5], szCommand, xs__ITaskId) || equali(g_szDemoFiles[commid][6], szCommand, xs__ITaskId))
			{
				new szCommRecord[400];
				if (loadCommunityRecord(szMap, szCommRecord, 399, commid))
				{
					format(szHUDMessage, 399, "%s%s Record on %s: \n%s\n\n", szHUDMessage, g_szDemoFiles[commid][3], szMap, szCommRecord);
					bMapFound = true;
				}
				else
				{
					format(szHUDMessage2, 399, "%sNo %s Map\n\n", szHUDMessage2, g_szDemoFiles[commid][3]);
				}
			}
			commid++;
		}
		set_hudmessage(xs__ITaskId, 100, "", 1017370378, 1043207291, xs__ITaskId, xs__ITaskId, 1077936128, xs__ITaskId, xs__ITaskId, 1);
		if (bMapFound)
		{
			show_hudmessage(id, szHUDMessage);
		}
		else
		{
			show_hudmessage(id, szHUDMessage2);
		}
		return 1;
	}
	return 0;
}

public cmdChooseTeam(id)
{
	cmdMainMenu(id);
	return 1;
}

public cmdChangeTeam(id)
{
	new CsTeams:team = cs_get_user_team(id, 0);
	if (team)
	{
		new var1;
		if (team == CsTeams:2 || !team)
		{
			g_bsSpecWeapons[id] = pev(id, 79);
			strip_user_weapons(id);
			get_player_position(id, g_flSpecOrigin[id], g_flSpecAngle[id], g_flSpecGravity[id]);
			strip_user_weapons(id);
			cs_set_user_team(id, "", xs__ITaskId);
			set_pev(id, 69, 5);
			set_pev(id, 73, 128);
			set_pev(id, 80, 2);
			client_cmd(id, "spec_mode 4");
		}
		else
		{
			new var3;
			if (team == CsTeams:3 && (is_user_localhost(id) || !g_cvarBlockct))
			{
				if (g_bJoinedCT[id])
				{
					cs_set_user_team(id, 2, xs__ITaskId);
					set_pev(id, 73, 0);
					set_pev(id, 69, 3);
					set_pev(id, 80, 3);
					set_pev(id, 43, 1073741824);
					spawnPlayer(id);
				}
				else
				{
					decl bool:bHasChangeTeamThisRound;
					bHasChangeTeamThisRound = !!get_pdata_int(id, 125, 5, 5) & 65280;
					set_pdata_int(id, 125, !bHasChangeTeamThisRound, 5, 5);
					engclient_cmd(id, "jointeam", 407392, 407400);
					set_pev(id, 73, 0);
					set_pev(id, 69, 3);
					set_pev(id, 80, 3);
					set_pev(id, 43, 1073741824);
					if (0 < g_cvarPlayerModel)
					{
						new szModelNum[5];
						formatex(szModelNum, 4, "%d", g_cvarPlayerModel);
						spawnPlayer(id);
						engclient_cmd(id, "joinclass", szModelNum, 407400);
						g_bJoinedCT[id] = 1;
					}
				}
				if (!is_zero_vec(g_flSpecOrigin[id]))
				{
					set_player_origin_ac(id, g_flSpecOrigin[id], g_flSpecAngle[id], g_flSpecGravity[id], 0.0);
					new weapon_name[20];
					new i = 1;
					while (i <= 30)
					{
						if (1 << i & g_bsSpecWeapons[id])
						{
							get_weaponname(i, weapon_name, 19);
							ham_give_weapon_by_name(id, weapon_name);
						}
						i++;
					}
					vector_copy(VEC_NULL, g_flSpecOrigin[id]);
					vector_copy(VEC_NULL, g_flSpecAngle[id]);
					g_bsSpecWeapons[id] = 0;
				}
				else
				{
					ham_give_weapon_by_name(id, "weapon_usp");
					ham_give_weapon_by_name(id, "weapon_knife");
				}
			}
			client_print_f(id, ColorType:5, "\x03[%s]\x01 This command is not available to you at this point", g_szPrefix);
		}
		return 1;
	}
	return 0;
}

public messageVGUIMenu(iMsg, iDest, id)
{
	new var1;
	if (get_user_team(id, {0}, xs__ITaskId) <= 0 && get_msg_arg_int(1) == 2)
	{
		fnSetTask(id, iMsg);
		return 1;
	}
	if (get_msg_arg_int(1) == 27)
	{
		if (0 < g_cvarPlayerModel)
		{
			return 1;
		}
		return 0;
	}
	return 1;
}

public messageShowMenu(iMsg, iDest, id)
{
	new szMsg[30];
	get_msg_arg_string(4, szMsg, 29);
	new var1;
	if (get_user_team(id, {0}, xs__ITaskId) <= 0 && contain(szMsg, "Team_Select") >= 0)
	{
		fnSetTask(id, iMsg);
		return 1;
	}
	if (0 <= contain(szMsg, "_Select"))
	{
		if (0 < g_cvarPlayerModel)
		{
			return 1;
		}
		return 0;
	}
	return 0;
}

public fnSetTask(id, iMsg)
{
	new params[1];
	params[0] = iMsg;
	if (!task_exists(id + 2000, xs__ITaskId))
	{
		set_task(1036831949, "taskForceAutoJoin", id + 2000, params, 1, 383312, xs__ITaskId);
	}
	return 0;
}

public taskForceAutoJoin(params[], id)
{
	if (is_user_localhost(id))
	{
		engclient_cmd(id, "jointeam", 407972, 407400);
		if (0 < g_cvarPlayerModel)
		{
			new szModelNum[5];
			formatex(szModelNum, 4, "%d", g_cvarPlayerModel);
			engclient_cmd(id, "joinclass", szModelNum, 407400);
		}
		g_bJoinedCT[id] = 1;
	}
	else
	{
		engclient_cmd(id, "jointeam", 408068, 407400);
		send_cmd(id, "spec_mode 4");
		set_task(1056964608, "taskSpecMode", id, 383308, xs__ITaskId, 383312, xs__ITaskId);
	}
	return 0;
}

public taskSpecMode(id)
{
	send_cmd(id, "spec_mode 4");
	return 0;
}

public cmdJoinTeam(id)
{
	new var1;
	if (cs_get_user_team(id, 0) == 3 && g_cvarBlockct)
	{
		var2 = 1;
	}
	else
	{
		var2 = 0;
	}
	return var2;
}

public cmdJoinClass(id)
{
	if (get_pdata_int(id, 205, 5, 5) == 3)
	{
		new var1;
		if (!is_user_localhost(id) && g_cvarPlayerModel && !g_bJoinedCT[id])
		{
			set_task(1036831949, "taskSpawn", id, 383308, xs__ITaskId, 383312, xs__ITaskId);
		}
	}
	return 0;
}

public taskSpawn(id)
{
	spawnPlayer(id);
	g_bJoinedCT[id] = 1;
	return 0;
}

public cmdSettingsMenu(id)
{
	if (is_user_localhost(id))
	{
		SettingsMenu1(id);
	}
	return 0;
}

public cmdDemo(id)
{
	startDemo(id, false);
	return 1;
}

public startDemo(id, bool:bForceAlive)
{
	new var1;
	if (!is_user_localhost(id) || g_cvarMode)
	{
		if (is_user_alive(id))
		{
			spawnPlayer(id);
		}
		else
		{
			client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to start", g_szPrefix);
		}
		return 1;
	}
	new var2;
	if (!bForceAlive && !is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to start demo", g_szPrefix);
		return 1;
	}
	new var3;
	if (task_exists(id + 4000, xs__ITaskId) || task_exists(id + 5000, xs__ITaskId))
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Saving demo... Please wait", g_szPrefix);
		return 1;
	}
	client_cmd(id, "stop");
	ac_record_demo();
	g_bDemoRecording = true;
	new iReturn;
	ExecuteForward(g_hRecordingStartedForward, iReturn, id);
	if (g_cvarMode == 1)
	{
		g_flTimerStarted[id] = 0;
		g_flTimerPaused[id] = 0;
		g_bRunFinished[id] = 0;
		g_iCheckPointCounter[id] = 0;
		g_iGoCheckCounter[id] = 0;
		if (g_cvarMainmenu < 2)
		{
			show_my_menu(id, 0, 408728, 1, 408736);
		}
		else
		{
			cmdMainMenu(id);
		}
		if (get_user_noclip(id))
		{
			set_user_noclip(id, xs__ITaskId);
		}
		client_cmd(id, "record %s", g_szTempName);
		new szFailSettings[192];
		if (bIllegalServerSettings(szFailSettings, 191))
		{
			client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal server settings:\x03 %s", g_szPrefix, szFailSettings);
		}
		new var5 = g_szPlayerCvars;
		query_client_cvar(id, var5[0][var5], "clientCvarResult", xs__ITaskId, 389908);
		restartRound(0.1, id);
		set_task(1045220557, "taskRecreateOnce", 6000, 383308, xs__ITaskId, 383312, xs__ITaskId);
		if (g_cvarChatmsg)
		{
			new var4;
			if (g_bMpbhopActive)
			{
				var4 = 409188;
			}
			else
			{
				var4 = 409236;
			}
			client_print_f(id, ColorType:6, "\x04[%s]\x01 Demo recording started%s", g_szPrefix, var4);
		}
	}
	else
	{
		if (g_cvarMode == 2)
		{
			if (isMainMenuOpened(id))
			{
				cmdMainMenu(id);
			}
			if (!is_zero_vec(g_flCheckPointOrigin[id]))
			{
				if (g_cvarLoadAngles > 1)
				{
					set_player_origin_ac(id, g_flCheckPointOrigin[id], g_flCheckPointAngle[id], g_flGravity[id], 0.0);
				}
				set_player_origin_ac(id, g_flCheckPointOrigin[id], VEC_NULL, g_flGravity[id], 0.0);
			}
			client_cmd(id, "record %s", g_szTempLJName);
			new szFailSettings[192];
			if (bIllegalServerSettings(szFailSettings, 191))
			{
				client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal server settings:\x03 %s", g_szPrefix, szFailSettings);
			}
		}
	}
	return 1;
}

public cmdStop(id)
{
	stopDemo(id, false);
	return 1;
}

public stopDemo(id, bool:bRecordAgain)
{
	new var1;
	if (!g_bDemoRecording || g_cvarMode || !is_user_localhost(id))
	{
		return 1;
	}
	new iReturn;
	ExecuteForward(g_hRecordingStoppedForward, iReturn, id);
	g_bDemoRecording = false;
	if (isMainMenuOpened(id))
	{
		cmdMainMenu(id);
	}
	cstrikeName();
	if (g_cvarMode == 1)
	{
		if (g_bRunFinished[id])
		{
			user_kill(id, xs__ITaskId);
			if (g_cvarChatmsg)
			{
				client_print_f(id, ColorType:6, "\x04[%s]\x01 Demo recording stopped!", g_szPrefix);
			}
			new name[32];
			get_pcvar_string(g_hcvarName, name, 31);
			new var2;
			if (equali(name, 409548, xs__ITaskId) || equali(name, 409552, xs__ITaskId))
			{
				get_user_name(id, name, 31);
			}
			new aReplaceChars[9][] = {
				{
					92, ...
				},
				{
					47, ...
				},
				{
					124, ...
				},
				{
					58, ...
				},
				{
					42, ...
				},
				{
					34, ...
				},
				{
					60, ...
				},
				{
					62, ...
				},
				{
					63, ...
				}
			};
			new i;
			while (i < 9)
			{
				replace_all(name, 31, aReplaceChars[i], 409668);
				i++;
			}
			replace_all(name, 31, 409672, 409680);
			replace(g_szPlayerRecordTime, 13, 409688, 409696);
			new szMpbhop[12];
			if (g_bMpbhopActive)
			{
				formatex(szMpbhop, 11, "[mpbhop]");
			}
			else
			{
				szMpbhop[0] = 0;
			}
			formatex(g_szDemoName, 127, "%s%s_%s_%s", g_szMapName, szMpbhop, name, g_szPlayerRecordTime);
			new param[1];
			new var3;
			if (bRecordAgain)
			{
				var3 = 1;
			}
			else
			{
				var3 = 0;
			}
			param[0] = var3;
			set_task(1065353216, "taskStopDemo", id + 4000, param, 1, 383312, xs__ITaskId);
		}
		else
		{
			client_cmd(id, "stop");
			client_print_f(id, ColorType:6, "\x04[%s]\x01 Demo recording stopped\x04 beforehand\x01!", g_szPrefix);
			if (g_cvarChatmsg)
			{
				client_print_f(id, ColorType:6, "\x04[%s]\x01 File:\x03 %s/%s.dem", g_szPrefix, g_szDemoFolder, g_szTempName);
			}
			g_iCheckPointCounter[id] = 0;
			g_iGoCheckCounter[id] = 0;
		}
		g_flTimerStarted[id] = 0;
		g_flTimerPaused[id] = 0;
		g_bRunFinished[id] = 0;
	}
	else
	{
		if (g_cvarMode == 2)
		{
			user_kill(id, xs__ITaskId);
			new param[1];
			set_task(1065353216, "taskStopDemo", id + 4000, param, 1, 383312, xs__ITaskId);
			if (g_cvarChatmsg)
			{
				client_print_f(id, ColorType:6, "\x04[%s]\x01 LJ recording stopped!", g_szPrefix);
			}
		}
	}
	return 1;
}

public cstrikeName()
{
	new szFileName[192];
	new szDemoPath[192];
	new szLJDemoPath[192];
	new hDir = open_dir("../", szFileName, 191);
	if (hDir)
	{
		while (next_file(hDir, szFileName, 191))
		{
			if (!(szFileName[0] == 46))
			{
				format(szFileName, 191, "../%s", szFileName);
				new var1;
				if (dir_exists(szFileName) && containi(szFileName, "../cstrike") != -1)
				{
					formatex(szDemoPath, 191, "%s/%s.dem", szFileName, g_szTempName);
					formatex(szLJDemoPath, 191, "%s/%s.dem", szFileName, g_szTempLJName);
					new var2;
					if (file_exists(szDemoPath) || file_exists(szLJDemoPath))
					{
						format(g_szDemoFolder, 63, szFileName[3]);
						close_dir(hDir);
					}
				}
			}
		}
		close_dir(hDir);
	}
	return 0;
}

public taskStopDemo(param[], id)
{
	client_cmd(id, "stop");
	set_task(1056964608, "taskRenameDemo", id + 5000, param, 1, 383312, xs__ITaskId);
	return 0;
}

public taskRenameDemo(param[], id)
{
	new szDemoPath[192];
	if (g_cvarMode == 1)
	{
		formatex(szDemoPath, 191, "%s/%s.dem", g_szDemoFolder, g_szTempName);
	}
	else
	{
		formatex(szDemoPath, 191, "%s/%s.dem", g_szDemoFolder, g_szTempLJName);
	}
	new szDemoNewPath[192];
	if (g_cvarMode == 1)
	{
		formatex(szDemoNewPath, 191, "../%s/%s.dem", g_szDemoFolder, g_szDemoName);
	}
	else
	{
		formatex(szDemoNewPath, 191, "../%s/%s.dem", g_szDemoFolder, g_szTempLJName);
	}
	new version = 1;
	while (file_exists(szDemoNewPath))
	{
		version++;
		if (g_cvarMode == 1)
		{
			formatex(szDemoNewPath, 191, "../%s/%s_v%d.dem", g_szDemoFolder, g_szDemoName, version);
		}
		else
		{
			formatex(szDemoNewPath, 191, "../%s/%s_%d.dem", g_szDemoFolder, g_szTempLJName, version + -1);
		}
	}
	format(szDemoNewPath, 191, "%s", szDemoNewPath[3]);
	if (!equal(szDemoPath, szDemoNewPath, xs__ITaskId))
	{
		rename_file(szDemoPath, szDemoNewPath, xs__ITaskId);
	}
	if (g_cvarChatmsg)
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 File:\x03 %s", g_szPrefix, szDemoNewPath);
	}
	ac_stop_demo(szDemoNewPath);
	if (param[0] == 1)
	{
		if (task_exists(id + 5000, xs__ITaskId))
		{
			remove_task(id + 5000, xs__ITaskId);
		}
		startDemo(id, true);
	}
	return 0;
}

public cmdStartPoint(id)
{
	if (!is_user_alive(id))
	{
		return 1;
	}
	cs_set_user_deaths(id, xs__ITaskId);
	if (!is_zero_vec(g_flPlayerStartOrigin[id]))
	{
		new Float:angles[3] = 0.0;
		new var1;
		if (g_cvarLoadAngles == 1 || g_cvarLoadAngles == 3)
		{
			angles[0] = g_flPlayerStartAngle[id][0];
			angles[1] = g_flPlayerStartAngle[id][1];
			angles[2] = g_flPlayerStartAngle[id][2];
		}
		set_player_origin_ac(id, g_flPlayerStartOrigin[id], angles, g_flPlayerStartGravity[id], 0.0);
	}
	return 1;
}

public cmdSpawn(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Say\x03 /ct\x01 to join CT", g_szPrefix);
		return 1;
	}
	g_bNeedDefResp = true;
	spawnPlayer(id);
	return 1;
}

public cmdSetStartPoint(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to save start position", g_szPrefix);
		return 1;
	}
	client_print_f(id, ColorType:6, "\x04[%s]\x01 Start position has been placed", g_szPrefix);
	get_player_position(id, g_flPlayerStartOrigin[id], g_flPlayerStartAngle[id], g_flPlayerStartGravity[id]);
	if (is_user_localhost(id))
	{
		new szData[128];
		format(szData, 127, "%f %f %f %f %f %f", g_flPlayerStartOrigin[id], g_flPlayerStartOrigin[id][1], g_flPlayerStartOrigin[id][2], g_flPlayerStartAngle[id], g_flPlayerStartAngle[id][1], g_flPlayerStartAngle[id][2]);
		vector_copy(g_flPlayerStartOrigin[id], g_flDefStartOrigin);
		vector_copy(g_flPlayerStartAngle[id], g_flDefStartAngle);
		new f = fopen(g_szMapStartPath, "wt");
		fputs(f, szData);
		fclose(f);
	}
	return 1;
}

public cmdSavePos(id)
{
	if (!is_user_localhost(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Only localhost can save position", g_szPrefix);
		return 1;
	}
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to save position", g_szPrefix);
		return 1;
	}
	if (isPlayerOnFreezedBlock(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You cannot save position on bhop block", g_szPrefix);
		return 1;
	}
	if (!g_flTimerPaused[id])
	{
		if (0.0 == g_flTimerStarted[id])
		{
			client_print_f(id, ColorType:5, "\x03[%s]\x01 Timer is not started", g_szPrefix);
			return 1;
		}
		new szSavePosFile[128];
		get_localinfo("amxx_datadir", szSavePosFile, 127);
		format(szSavePosFile, 127, "%s/savepos", szSavePosFile);
		if (!dir_exists(szSavePosFile))
		{
			mkdir(szSavePosFile);
		}
		format(szSavePosFile, 127, "%s/%s.txt", szSavePosFile, g_szMapName);
		new szVars[512];
		new handle = fopen(szSavePosFile, "wt");
		new Float:flOrigin[3] = 0.0;
		pev(id, 118, flOrigin);
		new Float:flAngles[3] = 0.0;
		pev(id, 126, flAngles);
		new Float:flVelocity[3] = 0.0;
		pev(id, "say .%s", flVelocity);
		new Float:flHealth = 0.0;
		pev(id, 41, flHealth);
		formatex(szVars, 511, "%f\n", floatsub(get_gametime(), g_flTimerStarted[id]));
		fputs(handle, szVars);
		formatex(szVars, 511, "%.5f %.5f %.5f\n", flOrigin, flOrigin[1], flOrigin[2]);
		fputs(handle, szVars);
		formatex(szVars, 511, "%.3f %.3f %.3f\n", flVelocity, flVelocity[1], flVelocity[2]);
		fputs(handle, szVars);
		formatex(szVars, 511, "%.3f %.3f %.3f\n", flAngles, flAngles[1], flAngles[2]);
		fputs(handle, szVars);
		formatex(szVars, 511, "%f\n", flHealth);
		fputs(handle, szVars);
		formatex(szVars, 511, "%d\n", g_iCheckPointCounter[id]);
		fputs(handle, szVars);
		formatex(szVars, 511, "%d\n", g_iGoCheckCounter[id]);
		fputs(handle, szVars);
		fclose(handle);
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Position saved. Use\x03 /loadpos\x01 to load it", g_szPrefix);
		return 1;
	}
	client_print_f(id, ColorType:5, "\x03[%s]\x01 You cannot save position in pause. Say\x03 /unpause", g_szPrefix);
	return 1;
}

public cmdLoadPos(id)
{
	if (!is_user_localhost(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Only localhost can load position", g_szPrefix);
		return 1;
	}
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to load position", g_szPrefix);
		return 1;
	}
	if (g_bDemoRecording)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You cannot load position while recording demo", g_szPrefix);
		return 1;
	}
	new szSavePosFile[128];
	get_localinfo("amxx_datadir", szSavePosFile, 127);
	format(szSavePosFile, 127, "%s/savepos", szSavePosFile);
	if (!dir_exists(szSavePosFile))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Cannot find savepos folder", g_szPrefix);
		return 1;
	}
	format(szSavePosFile, 127, "%s/%s.txt", szSavePosFile, g_szMapName);
	if (!file_exists(szSavePosFile))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Cannot find savepos for this map", g_szPrefix);
		return 1;
	}
	new szData[512];
	new handle = fopen(szSavePosFile, "rt");
	fgets(handle, szData, 511);
	trim(szData);
	g_flTimerStarted[id] = floatsub(get_gametime(), str_to_float(szData));
	if (0.0 == g_flTimerStarted[id])
	{
		new var1 = g_flTimerStarted[id];
		var1 = floatadd(1008981770, var1);
	}
	g_flTimerPaused[id] = 0;
	new szSavePosOrigin[3][22] = {
		{
			12, 96, 180, 12, 96, 180, 4, 91, 37, 115, 93, 1, 32, 83, 97, 118, 101, 112, 111, 115, 32, 108
		},
		{
			111, 97, 100, 101, 100, 0, 115, 116, 111, 112, 115, 111, 117, 110, 100, 0, 67, 104, 101, 99, 107, 112
		},
		{
			111, 105, 110, 116, 115, 32, 97, 114, 101, 32, 110, 111, 116, 32, 97, 108, 108, 111, 119, 101, 100, 0
		}
	};
	fgets(handle, szData, 511);
	trim(szData);
	parse(szData, szSavePosOrigin[0][szSavePosOrigin], 21, szSavePosOrigin[1], 21, szSavePosOrigin[2], 21);
	new Float:flSavePosOrigin[3] = 0.0;
	new i;
	while (i < 3)
	{
		flSavePosOrigin[i] = str_to_float(szSavePosOrigin[i]);
		i++;
	}
	new szSavePosVelocity[3][22] = {
		{
			12, 96, 180, 4, 91, 37, 115, 93, 1, 32, 83, 97, 118, 101, 112, 111, 115, 32, 108, 111, 97, 100
		},
		{
			101, 100, 0, 115, 116, 111, 112, 115, 111, 117, 110, 100, 0, 67, 104, 101, 99, 107, 112, 111, 105, 110
		},
		{
			116, 115, 32, 97, 114, 101, 32, 110, 111, 116, 32, 97, 108, 108, 111, 119, 101, 100, 0, 89, 111, 117
		}
	};
	fgets(handle, szData, 511);
	trim(szData);
	parse(szData, szSavePosVelocity[0][szSavePosVelocity], 21, szSavePosVelocity[1], 21, szSavePosVelocity[2], 21);
	new Float:flSavePosVelocity[3] = 0.0;
	new i;
	while (i < 3)
	{
		flSavePosVelocity[i] = str_to_float(szSavePosVelocity[i]);
		i++;
	}
	new szSavePosAngle[3][22] = {
		{
			4, 91, 37, 115, 93, 1, 32, 83, 97, 118, 101, 112, 111, 115, 32, 108, 111, 97, 100, 101, 100, 0
		},
		{
			115, 116, 111, 112, 115, 111, 117, 110, 100, 0, 67, 104, 101, 99, 107, 112, 111, 105, 110, 116, 115, 32
		},
		{
			97, 114, 101, 32, 110, 111, 116, 32, 97, 108, 108, 111, 119, 101, 100, 0, 89, 111, 117, 32, 99, 97
		}
	};
	fgets(handle, szData, 511);
	trim(szData);
	parse(szData, szSavePosAngle[0][szSavePosAngle], 21, szSavePosAngle[1], 21, szSavePosAngle[2], 21);
	new Float:flSavePosAngle[3] = 0.0;
	new i;
	while (i < 3)
	{
		flSavePosAngle[i] = str_to_float(szSavePosAngle[i]);
		i++;
	}
	set_player_origin_ac(id, flSavePosOrigin, flSavePosAngle, 1.0, 0.0);
	set_pev(id, "say .%s", flSavePosVelocity);
	fgets(handle, szData, 511);
	trim(szData);
	set_pev(id, 41, str_to_float(szData));
	fgets(handle, szData, 511);
	trim(szData);
	g_iCheckPointCounter[id] = str_to_num(szData);
	fgets(handle, szData, 511);
	trim(szData);
	g_iGoCheckCounter[id] = str_to_num(szData);
	fclose(handle);
	client_print_f(id, ColorType:6, 413964, g_szPrefix);
	return 1;
}

public cmdStopSound(id)
{
	send_cmd(id, "stopsound");
	return 1;
}

public cmdCheckPoint(id)
{
	if (!is_user_alive(id))
	{
		return 1;
	}
	if (!g_cvarCheckpoints)
	{
		set_dhudmessage(255, 20, 20, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
		show_dhudmessage(id, "Checkpoints are not allowed");
		return 1;
	}
	if (isPlayerOnFreezedBlock(id))
	{
		set_dhudmessage(255, 20, 20, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
		show_dhudmessage(id, "You cannot save checkpoint on bhop block");
		return 1;
	}
	new bool:onladder = pev(id, 69) == 5;
	new bool:onground = pev(id, 84) & 34324;
	new var3;
	if (onground || (!onground && g_cvarAllowaircp == 2) || (onladder && g_cvarAllowaircp == 1))
	{
		new Float:flOrigin[3] = 0.0;
		new Float:flAngles[3] = 0.0;
		new Float:flGravity = 0.0;
		get_player_position(id, flOrigin, flAngles, flGravity);
		if (g_cvarLoadAngles > 1)
		{
			new var4;
			if (are_vectors_equal(flOrigin, g_flCheckPointOrigin[id]) && are_vectors_equal(flAngles, g_flCheckPointAngle[id]))
			{
				return 1;
			}
		}
		else
		{
			if (are_vectors_equal(flOrigin, g_flCheckPointOrigin[id]))
			{
				return 1;
			}
		}
		new bool:bShowMain;
		if (is_zero_vec(g_flCheckPointOrigin[id]))
		{
			bShowMain = true;
		}
		else
		{
			vector_copy(g_flCheckPointOrigin[id], g_flPrevCheckPointOrigin[id]);
			vector_copy(g_flCheckPointAngle[id], g_flPrevCheckPointAngle[id]);
			g_flPrevGravity[id] = g_flGravity[id];
		}
		vector_copy(flOrigin, g_flCheckPointOrigin[id]);
		vector_copy(flAngles, g_flCheckPointAngle[id]);
		g_flGravity[id] = flGravity;
		new var5;
		if (bShowMain && isMainMenuOpened(id))
		{
			cmdMainMenu(id);
		}
		if (0.0 != g_flTimerStarted[id])
		{
			g_iCheckPointCounter[id]++;
		}
		if (g_cvarCheckpointmsg)
		{
			set_dhudmessage(100, 100, 100, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
			if (0.0 != g_flTimerStarted[id])
			{
				show_dhudmessage(id, "[%d cp %d gc]", g_iCheckPointCounter[id], g_iGoCheckCounter[id]);
			}
			show_dhudmessage(id, "checkpoint");
		}
	}
	else
	{
		if (g_cvarCheckpointmsg)
		{
			set_dhudmessage(255, 20, 20, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
			show_dhudmessage(id, "You cannot save checkpoint in air");
		}
	}
	return 1;
}

public cmdGoCheck(id)
{
	if (!is_user_alive(id))
	{
		return 1;
	}
	new var1;
	if (g_cvarGcdemo && g_cvarMode == 2 && is_user_localhost(id))
	{
		startDemo(id, false);
		return 1;
	}
	if (!g_cvarCheckpoints)
	{
		set_dhudmessage(255, 20, 20, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
		show_dhudmessage(id, "Checkpoints are not allowed");
		return 1;
	}
	if (is_zero_vec(g_flCheckPointOrigin[id]))
	{
		set_dhudmessage(255, 20, 20, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
		show_dhudmessage(id, "You have no checkpoints");
		return 1;
	}
	new Float:flOrigin[3] = 0.0;
	pev(id, 118, flOrigin);
	if (g_cvarLoadAngles > 1)
	{
		new Float:flAngles[3] = 0.0;
		pev(id, 126, flAngles);
		new var2;
		if (are_vectors_equal(flOrigin, g_flCheckPointOrigin[id]) && are_vectors_equal(flAngles, g_flCheckPointAngle[id]))
		{
			return 1;
		}
		set_player_origin_ac(id, g_flCheckPointOrigin[id], g_flCheckPointAngle[id], g_flGravity[id], 0.0);
	}
	else
	{
		if (are_vectors_equal(flOrigin, g_flCheckPointOrigin[id]))
		{
			return 1;
		}
		set_player_origin_ac(id, g_flCheckPointOrigin[id], VEC_NULL, g_flGravity[id], 0.0);
	}
	if (0.0 != g_flTimerStarted[id])
	{
		g_iGoCheckCounter[id]++;
	}
	if (g_cvarGocheckmsg)
	{
		set_dhudmessage(100, 100, 100, -1.0, 0.9, 0, 0.0, 0.4, 0.2, 0.2, false);
		if (0.0 != g_flTimerStarted[id])
		{
			show_dhudmessage(id, "[%d cp %d gc]", g_iCheckPointCounter[id], g_iGoCheckCounter[id]);
		}
		show_dhudmessage(id, "gocheck");
	}
	return 1;
}

public cmdStuck(id)
{
	if (is_user_alive(id))
	{
		if (!is_zero_vec(g_flPrevCheckPointOrigin[id]))
		{
			new Float:fTemp[3] = 0.0;
			new Float:fTmp = 0.0;
			vector_copy(g_flCheckPointOrigin[id], fTemp);
			vector_copy(g_flPrevCheckPointOrigin[id], g_flCheckPointOrigin[id]);
			vector_copy(fTemp, g_flPrevCheckPointOrigin[id]);
			vector_copy(g_flCheckPointAngle[id], fTemp);
			vector_copy(g_flPrevCheckPointAngle[id], g_flCheckPointAngle[id]);
			vector_copy(fTemp, g_flPrevCheckPointAngle[id]);
			fTmp = g_flGravity[id];
			g_flGravity[id] = g_flPrevGravity[id];
			g_flPrevGravity[id] = fTmp;
			cmdGoCheck(id);
		}
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should have at least 2 checkpoints", g_szPrefix);
	}
	return 1;
}

public cmdNoclip(id)
{
	if (!is_user_alive(id))
	{
		return 1;
	}
	if (get_user_noclip(id))
	{
		client_print_f(id, ColorType:5, "\x04[%s]\x01 Noclip:\x03 disabled", g_szPrefix);
		set_user_noclip(id, xs__ITaskId);
	}
	else
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Noclip:\x03 enabled", g_szPrefix);
		set_user_noclip(id, 1);
		g_bNoclipUsed[id] = 1;
	}
	return 1;
}

public cmdGodMode(id)
{
	if (!is_user_alive(id))
	{
		return 1;
	}
	if (get_user_godmode(id))
	{
		client_print_f(id, ColorType:5, "\x04[%s]\x01 GodMode:\x03 disabled", g_szPrefix);
		set_user_godmode(id, xs__ITaskId);
		g_bGodmode = false;
	}
	else
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 GodMode:\x03 enabled", g_szPrefix);
		set_user_godmode(id, 1);
		g_bGodmode = true;
	}
	return 1;
}

public cmdUpTime(id)
{
	new szTime[14];
	string_timer(0.0, szTime, 13, 0, 1);
	client_print_f(id, ColorType:6, "\x04[%s]\x01 Server Uptime:\x04 %s", g_szPrefix, szTime);
	return 1;
}

public cmdTimer(id)
{
	if (g_bPlayerShowTimer[id])
	{
		client_print_f(id, ColorType:5, "\x04[%s]\x01 Timer:\x03 disabled", g_szPrefix);
	}
	else
	{
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer:\x03 enabled", g_szPrefix);
	}
	g_bPlayerShowTimer[id] = !g_bPlayerShowTimer[id];
	return 1;
}

public cmdPause(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to manage your timer", g_szPrefix);
		return 1;
	}
	if (0.0 == g_flTimerStarted[id])
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Timer is not started", g_szPrefix);
		return 1;
	}
	new var1;
	if (is_user_localhost(id) && g_cvarMode == 1 && g_bDemoRecording)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You are not allowed to pause timer while recording", g_szPrefix);
		return 1;
	}
	if (0.0 == g_flTimerPaused[id])
	{
		g_flTimerPaused[id] = get_gametime();
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer is paused. Say\x03 /unpause\x01 (\x03/p\x01) to continue your run", g_szPrefix);
		g_bPauseUsed[id] = 1;
	}
	else
	{
		g_flTimerStarted[id] = floatadd(g_flTimerStarted[id], floatsub(get_gametime(), g_flTimerPaused[id]));
		g_flTimerPaused[id] = 0;
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer is unpaused", g_szPrefix);
	}
	return 1;
}

public cmdVersion(id)
{
	client_print_f(id, ColorType:6, "\x04[%s]\x01 LAN Version:\x04 %s", g_szPrefix, "4.8.2");
	return 1;
}

public cmdWeapons(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new szFullWeapName[32];
	new i;
	while (i < 29)
	{
		formatex(szFullWeapName, 31, "weapon_%s", g_szWeaponsNames[i]);
		ham_give_weapon_by_name(id, szFullWeapName);
		i++;
	}
	return 1;
}

public cmdUSP(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 16)
	{
		ham_give_weapon_by_name(id, "weapon_usp");
	}
	else
	{
		cs_set_weapon_ammo(find_ent_by_owner(-1, "weapon_usp", id, xs__ITaskId), 12);
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdKNIFE(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 29)
	{
		ham_give_weapon_by_name(id, "weapon_knife");
	}
	return 1;
}

public cmdSCOUT(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 3)
	{
		ham_give_weapon_by_name(id, "weapon_scout");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdDEAGLE(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 26)
	{
		ham_give_weapon_by_name(id, "weapon_deagle");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdP90(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 30)
	{
		ham_give_weapon_by_name(id, "weapon_p90");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdFAMAS(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 15)
	{
		ham_give_weapon_by_name(id, "weapon_famas");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdSG552(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 27)
	{
		ham_give_weapon_by_name(id, "weapon_sg552");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdM4A1(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 22)
	{
		ham_give_weapon_by_name(id, "weapon_m4a1");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdAK47(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 28)
	{
		ham_give_weapon_by_name(id, "weapon_ak47");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdM249(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 20)
	{
		ham_give_weapon_by_name(id, "weapon_m249");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public cmdAWP(id)
{
	if (!is_user_alive(id))
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should be alive to use weapons", g_szPrefix);
		return 1;
	}
	new dummy;
	new weapon_id = get_user_weapon(id, dummy, dummy);
	if (weapon_id != 18)
	{
		ham_give_weapon_by_name(id, "weapon_awp");
	}
	else
	{
		cs_set_user_bpammo(id, weapon_id, 1000);
	}
	return 1;
}

public eventCurWeapon(id)
{
	static last_weapon[33];
	static weapon_num;
	weapon_num = read_data(2);
	if (last_weapon[id] != weapon_num)
	{
		last_weapon[id] = weapon_num;
		static Float:maxspeed;
		pev(id, 56, maxspeed);
		new var1;
		if (maxspeed < 100.0 || 250.0 == maxspeed)
		{
			return 0;
		}
		set_dhudmessage(100, 100, 100, -1.0, 0.85, 0, 0.0, 0.3, 0.2, 0.2, false);
		show_dhudmessage(id, "weapon speed %d", floatround(maxspeed, xs__ITaskId));
	}
	return 0;
}

public hookOn(id)
{
	if (is_user_alive(id))
	{
		if (!g_bIsUsingHook[id])
		{
			get_user_origin(id, g_iHookOrigin[id], "");
			g_bIsUsingHook[id] = 1;
			g_bHookUsed[id] = 1;
			hookTask(id + 1000);
			set_task(1036831949, "hookTask", id + 1000, 383308, xs__ITaskId, 419680, xs__ITaskId);
			new iReturn;
			ExecuteForward(g_hResetBugForward, iReturn, id);
		}
	}
	return 1;
}

public hookOff(id)
{
	if (task_exists(id + 1000, xs__ITaskId))
	{
		remove_task(id + 1000, xs__ITaskId);
	}
	message_begin(xs__ITaskId, 23, 456, xs__ITaskId);
	write_byte(99);
	write_short(id);
	message_end();
	g_bIsUsingHook[id] = 0;
	vector_copy(VEC_NULL, g_flHookWallOrigin[id]);
	return 1;
}

public hookTask(id)
{
	if (!is_user_alive(id))
	{
		hookOff(id);
		return 0;
	}
	message_begin(xs__ITaskId, 23, 456, xs__ITaskId);
	write_byte(99);
	write_short(id);
	message_end();
	message_begin(xs__ITaskId, 23, 456, xs__ITaskId);
	write_byte(1);
	write_short(id);
	write_coord(g_iHookOrigin[id][0]);
	write_coord(g_iHookOrigin[id][1]);
	write_coord(g_iHookOrigin[id][2]);
	write_short(g_hBeamSprite);
	write_byte(1);
	write_byte(1);
	write_byte(2);
	write_byte(18);
	write_byte(xs__ITaskId);
	new var1;
	if (g_cvarHookred && g_cvarHookgreen && g_cvarHookblue)
	{
		write_byte(random_num(xs__ITaskId, ""));
		write_byte(random_num(xs__ITaskId, ""));
		write_byte(random_num(xs__ITaskId, ""));
	}
	else
	{
		write_byte(g_cvarHookred);
		write_byte(g_cvarHookgreen);
		write_byte(g_cvarHookblue);
	}
	write_byte(200);
	write_byte(xs__ITaskId);
	message_end();
	g_iTouched[id] = 2;
	return 0;
}

public giveNightvision(id)
{
	if (!cs_get_user_nvg(id))
	{
		cs_set_user_nvg(id, 1);
	}
	decl bool:bNVTurnedOn;
	bNVTurnedOn = !!get_pdata_int(id, 129, 5, 5) & 65280;
	if (bNVTurnedOn)
	{
		return 0;
	}
	new var2;
	if (g_cvarNewNightVision || (!g_cvarNewNightVision && g_iNightvision[id]))
	{
		g_iNightvision[id] = !g_iNightvision[id];
		if (g_iNightvision[id])
		{
			message_begin(8, 12, 456, id);
			write_byte(xs__ITaskId);
			write_string(419688);
			message_end();
			message_begin(1, g_msgScreenFade, 456, id);
			write_short(4096);
			write_short(xs__ITaskId);
			write_short(4);
			write_byte(xs__ITaskId);
			write_byte(xs__ITaskId);
			write_byte(xs__ITaskId);
			write_byte(xs__ITaskId);
			message_end();
			static sNvg_sound_on[17] =
			{
				105, 116, 101, 109, 115, 47, 110, 118, 103, 95, 111, 110, 46, 119, 97, 118, 0
			};
			client_cmd(id, "spk %s", sNvg_sound_on);
		}
		else
		{
			message_begin(8, 12, 456, id);
			write_byte(xs__ITaskId);
			write_string(g_default_map_light);
			message_end();
			static sNvg_sound_off[18] =
			{
				105, 116, 101, 109, 115, 47, 110, 118, 103, 95, 111, 102, 102, 46, 119, 97, 118, 0
			};
			client_cmd(id, "spk %s", sNvg_sound_off);
		}
		return 1;
	}
	return 0;
}

public fw_LightStyle(style, val[])
{
	if (!style)
	{
		copy(g_default_map_light, 31, val);
	}
	return 0;
}

public taskHUD(task_id)
{
	new i;
	while (i < 33)
	{
		ArrayClear(g_aSpecs[i]);
		i++;
	}
	new players[32];
	new num;
	new plr;
	get_players(players, num, "bch", 836);
	new i;
	while (i < num)
	{
		plr = players[i];
		new var1;
		if (pev(plr, 100) == 2 || pev(plr, 100) == 4)
		{
			new id = pev(plr, 101);
			new var2;
			if (id > 0 && id < 33)
			{
				ArrayPushCell(g_aSpecs[id], plr);
			}
		}
		i++;
	}
	get_players(players, num, "ah", 836);
	static szSpeclist[1100];
	static szKeyMessage[100];
	new spec_id;
	new szName[33];
	new szTimer[16];
	new i;
	while (i < num)
	{
		szKeyMessage[0] = 0;
		szSpeclist[0] = 0;
		plr = players[i];
		szTimer[0] = 0;
		if (0.0 != g_flTimerStarted[plr])
		{
			if (0.0 == g_flTimerPaused[plr])
			{
				string_timer(g_flTimerStarted[plr], szTimer, 15, 0, 1);
			}
			string_timer(floatsub(g_flTimerPaused[plr], g_flTimerStarted[plr]), szTimer, 15, 0, 0);
		}
		new var3;
		if (g_iSpecButtons[plr] & 4)
		{
			var3 = 424956;
		}
		else
		{
			var3 = 424976;
		}
		new var4;
		if (g_iSpecButtons[plr] & 1024)
		{
			var4 = 424936;
		}
		else
		{
			var4 = 424944;
		}
		new var5;
		if (g_iSpecButtons[plr] & 16)
		{
			var5 = 424920;
		}
		else
		{
			var5 = 424928;
		}
		new var6;
		if (g_iSpecButtons[plr] & 512)
		{
			var6 = 424900;
		}
		else
		{
			var6 = 424908;
		}
		new var7;
		if (g_iSpecButtons[plr] & 2)
		{
			var7 = 424876;
		}
		else
		{
			var7 = 424896;
		}
		new var8;
		if (g_iSpecButtons[plr] & 8)
		{
			var8 = 424856;
		}
		else
		{
			var8 = 424864;
		}
		formatex(szKeyMessage, 99, "     %s      %s\n   %s %s %s   %s\n", var8, var7, var6, var5, var4, var3);
		g_iSpecButtons[plr] = 0;
		if (ArraySize(g_aSpecs[plr]))
		{
			new j;
			while (ArraySize(g_aSpecs[plr]) > j)
			{
				spec_id = ArrayGetCell(g_aSpecs[plr], j);
				if (!g_setHidden[plr])
				{
					get_user_name(spec_id, szName, 32);
					replace_all(szName, 32, 425020, 425028);
					replace_all(szName, 32, 425032, 425040);
					format(szSpeclist, 1099, "%s\n   %s", szSpeclist, szName);
				}
				j++;
			}
			if (szSpeclist[0])
			{
				get_user_name(plr, szName, 32);
				replace_all(szName, 32, 425080, 425088);
				replace_all(szName, 32, 425092, 425100);
				format(szSpeclist, 1099, "Spectating %s:%s", szName, szSpeclist);
			}
			new var11;
			if (0.0 != g_flTimerStarted[plr] && floatsub(get_gametime(), g_flTimerStarted[plr]) > 1191181824)
			{
				set_hudmessage(g_cvarSpecRed, g_cvarSpecGreen, g_cvarSpecBlue, g_cvarSpecX, g_cvarSpecYDead, xs__ITaskId, xs__ITaskId, 1045220557, 1045220557, 1045220557, 4);
				new var12;
				if (g_setSpecList[plr])
				{
					var12 = 419920;
				}
				else
				{
					var12 = 425208;
				}
				new var13;
				if (g_setShowKeys[plr])
				{
					var13 = 424320;
				}
				else
				{
					var13 = 425204;
				}
				show_hudmessage(plr, "%s\n%s%s", szTimer, var13, var12);
			}
			else
			{
				new var14;
				if (g_setShowKeys[plr] || g_setSpecList[plr])
				{
					set_hudmessage(g_cvarSpecRed, g_cvarSpecGreen, g_cvarSpecBlue, g_cvarSpecX, g_cvarSpecYDead, xs__ITaskId, xs__ITaskId, 1045220557, 1045220557, 1045220557, 4);
					new var15;
					if (g_setSpecList[plr])
					{
						var15 = 419920;
					}
					else
					{
						var15 = 425236;
					}
					new var16;
					if (g_setShowKeys[plr])
					{
						var16 = 424320;
					}
					else
					{
						var16 = 425232;
					}
					show_hudmessage(plr, "%s%s", var16, var15);
				}
			}
			new j;
			while (ArraySize(g_aSpecs[plr]) > j)
			{
				spec_id = ArrayGetCell(g_aSpecs[plr], j);
				if (0.0 != g_flTimerStarted[plr])
				{
					set_hudmessage(g_cvarSpecRed, g_cvarSpecGreen, g_cvarSpecBlue, g_cvarSpecX, g_cvarSpecYDead, xs__ITaskId, xs__ITaskId, 1045220557, 1045220557, 1045220557, 4);
					new var17;
					if (g_setSpecList[spec_id])
					{
						var17 = 419920;
					}
					else
					{
						var17 = 425276;
					}
					new var18;
					if (g_setSpecKeys[spec_id])
					{
						var18 = 424320;
					}
					else
					{
						var18 = 425272;
					}
					show_hudmessage(spec_id, "%s\n%s%s", szTimer, var18, var17);
				}
				else
				{
					new var19;
					if (g_setSpecKeys[spec_id] || g_setSpecList[spec_id])
					{
						set_hudmessage(g_cvarSpecRed, g_cvarSpecGreen, g_cvarSpecBlue, g_cvarSpecX, g_cvarSpecYDead, xs__ITaskId, xs__ITaskId, 1045220557, 1045220557, 1045220557, 4);
						new var20;
						if (g_setSpecList[spec_id])
						{
							var20 = 419920;
						}
						else
						{
							var20 = 425304;
						}
						new var21;
						if (g_setSpecKeys[spec_id])
						{
							var21 = 424320;
						}
						else
						{
							var21 = 425300;
						}
						show_hudmessage(spec_id, "%s%s", var21, var20);
					}
				}
				j++;
			}
		}
		else
		{
			new var9;
			if (0.0 != g_flTimerStarted[plr] && floatsub(get_gametime(), g_flTimerStarted[plr]) > 1191181824)
			{
				set_hudmessage(g_cvarSpecRed, g_cvarSpecGreen, g_cvarSpecBlue, g_cvarSpecX, g_cvarSpecYAlive, xs__ITaskId, xs__ITaskId, 1045220557, 1045220557, 1045220557, 4);
				new var10;
				if (g_setShowKeys[plr])
				{
					var10 = 424320;
				}
				else
				{
					var10 = 425004;
				}
				show_hudmessage(plr, "%s\n%s", szTimer, var10);
			}
			else
			{
				if (g_setShowKeys[plr])
				{
					set_hudmessage(g_cvarSpecRed, g_cvarSpecGreen, g_cvarSpecBlue, g_cvarSpecX, g_cvarSpecYAlive, xs__ITaskId, xs__ITaskId, 1045220557, 1045220557, 1045220557, 4);
					show_hudmessage(plr, "%s", szKeyMessage);
				}
			}
		}
		i++;
	}
	return 0;
}

public cmdSpecList(id)
{
	if (g_setSpecList[id])
	{
		g_setSpecList[id] = 0;
		client_print_f(id, ColorType:5, "\x04[%s]\x01 Speclist:\x03 disabled", g_szPrefix);
	}
	else
	{
		g_setSpecList[id] = 1;
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Speclist:\x03 enabled", g_szPrefix);
	}
	if (is_user_localhost(id))
	{
		set_pcvar_num(g_hcvarSpecList, g_setSpecList[id]);
	}
	return 1;
}

public cmdSpecHide(id)
{
	if (!get_user_flags(id, xs__ITaskId) & 8)
	{
		return 1;
	}
	if (g_setHidden[id])
	{
		g_setHidden[id] = 0;
		client_print_f(id, ColorType:5, "\x04[%s]\x01 Hidden Mode:\x03 disabled", g_szPrefix);
	}
	else
	{
		g_setHidden[id] = 1;
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Hidden Mode:\x03 enabled", g_szPrefix);
	}
	if (is_user_localhost(id))
	{
		set_pcvar_num(g_hcvarHidden, g_setHidden[id]);
	}
	return 1;
}

public cmdSpecKeys(id)
{
	if (g_setSpecKeys[id])
	{
		g_setSpecKeys[id] = 0;
		client_print_f(id, ColorType:5, "\x04[%s]\x01 Speckeys:\x03 disabled", g_szPrefix);
	}
	else
	{
		g_setSpecKeys[id] = 1;
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Speckeys:\x03 enabled", g_szPrefix);
	}
	if (is_user_localhost(id))
	{
		set_pcvar_num(g_hcvarSpecKeys, g_setSpecKeys[id]);
	}
	return 1;
}

public cmdShowKeys(id)
{
	if (g_setShowKeys[id])
	{
		g_setShowKeys[id] = 0;
		client_print_f(id, ColorType:5, "\x04[%s]\x01 Showkeys:\x03 disabled", g_szPrefix);
	}
	else
	{
		g_setShowKeys[id] = 1;
		client_print_f(id, ColorType:6, "\x04[%s]\x01 Showkeys:\x03 enabled", g_szPrefix);
	}
	if (is_user_localhost(id))
	{
		set_pcvar_num(g_hcvarShowKeys, g_setShowKeys[id]);
	}
	return 1;
}

public cmdKeys(id)
{
	if (is_user_alive(id))
	{
		cmdShowKeys(id);
	}
	else
	{
		cmdSpecKeys(id);
	}
	return 1;
}

public clientCvarResult(id, cvar[], value[])
{
	if (is_user_alive(id))
	{
		new datas[8];
		TrieGetString(g_tPlayerCvars, cvar, datas, 8);
		new pos = datas[1];
		switch (datas[0])
		{
			case 0:
			{
				g_szPlayerSettings[id][0] = 0;
				if (value[0] == 66)
				{
					g_bAllowStuffCmd[id] = 2;
				}
				else
				{
					g_bAllowStuffCmd[id] = checkFixedValue(value, "0.0");
				}
			}
			case 1, 3, 4:
			{
				if (!checkFixedValue(value, datas[2]))
				{
					if (g_szPlayerSettings[id][0])
					{
						add(g_szPlayerSettings[id], 191, "\x01, \x03", xs__ITaskId);
					}
					add(g_szPlayerSettings[id], 191, cvar, xs__ITaskId);
				}
			}
			case 5:
			{
				if (g_bAllowStuffCmd[id] == 2)
				{
					if (!checkFixedValue(value, "101.0"))
					{
						if (g_szPlayerSettings[id][0])
						{
							add(g_szPlayerSettings[id], 191, "\x01, \x03", xs__ITaskId);
						}
						add(g_szPlayerSettings[id], 191, cvar, xs__ITaskId);
					}
				}
				else
				{
					new var1;
					if (!checkFixedValue(value, datas[2]) && !checkFixedValue(value, "99.5"))
					{
						if (g_szPlayerSettings[id][0])
						{
							add(g_szPlayerSettings[id], 191, "\x01, \x03", xs__ITaskId);
						}
						add(g_szPlayerSettings[id], 191, cvar, xs__ITaskId);
					}
				}
			}
			default:
			{
			}
		}
		pos++;
		if (pos < 7)
		{
			query_client_cvar(id, g_szPlayerCvars[pos], "clientCvarResult", xs__ITaskId, 389908);
		}
	}
	return 0;
}

checkFlood(id)
{
	static Float:g_flLastCmd[33];
	new Float:flGametime = get_gametime();
	if (g_flLastCmd[id] < flGametime)
	{
		g_flLastCmd[id] = floatadd(1048576000, flGametime);
		return 0;
	}
	return 1;
}

sendRoundTime(id, rtime)
{
	static msgRoundTime;
	if (!msgRoundTime)
	{
		msgRoundTime = get_user_msgid("RoundTime");
	}
	if (0 > rtime)
	{
		rtime = 0;
	}
	message_begin(8, msgRoundTime, 456, id);
	write_short(rtime + 1);
	message_end();
	return 0;
}

startButton(id)
{
	new var1;
	if (is_user_localhost(id) && g_bDemoRecording && g_cvarMode == 2)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 YOU ARE RECORDING IN LJ MODE", g_szPrefix);
		return 0;
	}
	new var3;
	if (!is_user_localhost(id) || !g_bDemoRecording || (0.0 == g_flTimerStarted[id] && g_bDemoRecording))
	{
		if (is_user_localhost(id))
		{
			if (g_bDemoRecording)
			{
				new szFailSettings[192];
				if (bIllegalPlayerSettings(id, szFailSettings, 191))
				{
					client_print_f(id, ColorType:5, "\x03[%s]\x01 Illegal player settings:\x03 %s", g_szPrefix, szFailSettings);
				}
				if (g_cvarAttempts)
				{
					g_iDemoAttempts += 1;
				}
				if (g_cvarMode == 1)
				{
					if (g_bGodmode)
					{
						client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer started [\x04godmode\x01]", g_szPrefix);
					}
					client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer started", g_szPrefix);
				}
				setRunWeapon(id);
				ac_start_button();
			}
			else
			{
				if (!g_bHealsOnMap)
				{
					set_pev(id, 41, 1120403456);
				}
				client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer started [\x04no recording\x01]", g_szPrefix);
			}
			new iReturn;
			ExecuteForward(g_hTimerStartedForward, iReturn, id);
		}
		else
		{
			client_print_f(id, ColorType:6, "\x04[%s]\x01 Timer started", g_szPrefix);
		}
		g_flTimerStarted[id] = get_gametime();
		g_iCheckPointCounter[id] = 0;
		g_iGoCheckCounter[id] = 0;
		vector_copy(VEC_NULL, g_flCheckPointOrigin[id]);
		vector_copy(VEC_NULL, g_flCheckPointAngle[id]);
		g_flGravity[id] = 1065353216;
		vector_copy(VEC_NULL, g_flPrevCheckPointOrigin[id]);
		vector_copy(VEC_NULL, g_flPrevCheckPointAngle[id]);
		g_flPrevGravity[id] = 1065353216;
		g_bNoclipUsed[id] = 0;
		g_bHookUsed[id] = 0;
		g_bPauseUsed[id] = 0;
	}
	else
	{
		if (!checkFlood(id))
		{
			client_print_f(id, ColorType:5, "\x03[%s]\x01 You have already started the timer", g_szPrefix);
		}
	}
	new var4;
	if (is_user_localhost(id) && is_zero_vec(g_flDefStartOrigin))
	{
		cmdSetStartPoint(id);
	}
	return 0;
}

setRunWeapon(id)
{
	new dummy;
	new szFullWeapName[32];
	new iRunWeapon = get_user_weapon(id, dummy, dummy);
	new var1;
	if (iRunWeapon == 29 || iRunWeapon == 16)
	{
		if (!user_has_weapon(id, 29, -1))
		{
			ham_give_weapon_by_name(id, "weapon_knife");
		}
		new i;
		while (i < 29)
		{
			new var2;
			if (!equali(g_szWeaponsNames[i], "usp", xs__ITaskId) && !equali(g_szWeaponsNames[i], "knife", xs__ITaskId))
			{
				formatex(szFullWeapName, 19, "weapon_%s", g_szWeaponsNames[i]);
				ham_strip_weapon_by_name(id, szFullWeapName);
			}
			i++;
		}
	}
	return 0;
}

finishButton(id)
{
	if (0.0 == g_flTimerStarted[id])
	{
		return 0;
	}
	new var1;
	if (g_bDemoRecording && is_user_localhost(id) && g_cvarMode == 2)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 YOU ARE RECORDING IN LJ MODE", g_szPrefix);
		return 0;
	}
	new var2;
	if (is_user_localhost(id) && g_bDemoRecording)
	{
		ac_finish_button();
	}
	new szPrint[128];
	new szTimer[14];
	string_timer(floatadd(g_flTimerStarted[id], g_flMapDelay), szTimer, 13, 2, 1);
	new Float:ftime = floatsub(get_gametime(), floatadd(g_flTimerStarted[id], g_flMapDelay));
	new var3;
	if (is_user_localhost(id) && !is_user_bot(id))
	{
		if (g_bMpbhopActive)
		{
			formatex(szPrint, 127, "\x04[%s]\x01 Time:\x04 %s \x01[\x04mpbhop\x01]", g_szPrefix, szTimer);
		}
		else
		{
			formatex(szPrint, 127, "\x04[%s]\x01 Time:\x04 %s", g_szPrefix, szTimer);
		}
	}
	else
	{
		new name[32];
		get_user_name(id, name, 31);
		replace_all(name, 31, 427912, 427920);
		replace_all(name, 31, 427924, 427932);
		formatex(szPrint, 127, "\x04[%s] %s\x01 finished in \x04%s", g_szPrefix, name, szTimer);
	}
	if (0 < g_iGoCheckCounter[id])
	{
		format(szPrint, 127, "%s\x01 [\x04%d\x01 cp\x04 %d\x01 gc]", szPrint, g_iCheckPointCounter[id], g_iGoCheckCounter[id]);
	}
	new var4;
	if (is_user_localhost(id) && g_bDemoRecording && g_cvarAttempts)
	{
		format(szPrint, 127, "%s\x01 Attempt: \x04#%d", szPrint, g_iDemoAttempts);
	}
	new var6;
	if (g_cvarTop && !is_user_bot(id) && !g_bHookUsed[id] && !g_bNoclipUsed[id] && (is_user_localhost(id) || !g_cvarTopalone))
	{
		if (0 < g_iGoCheckCounter[id])
		{
			setNubTop(id, szTimer, ftime);
		}
		setProTop(id, szTimer, ftime);
	}
	new wr_commid = -1;
	new national_commid = -1;
	new i;
	while (i < 25)
	{
		new var7;
		if (equali(g_szDemoFiles[i][5], "wr", xs__ITaskId) || equali(g_szDemoFiles[i][6], "wr", xs__ITaskId))
		{
			wr_commid = i;
			if (0 < g_iCommRecordsNum[i])
			{
				new i;
				while (i < 25)
				{
					new var8;
					if (!equali(g_szDemoFiles[i][5], "wr", xs__ITaskId) && g_szDemoFiles[i][5][0] > 0 && !equali(g_szDemoFiles[i][6], "wr", xs__ITaskId) && equali(g_szDemoFiles[i][4], "nocp", xs__ITaskId))
					{
						national_commid = i;
						if (0 < g_iCommRecordsNum[i])
						{
							new wr_sztld[10];
							new national_sztld[10];
							if (0 <= wr_commid)
							{
								copy(wr_sztld, 9, g_szDemoFiles[wr_commid][5]);
								strtoupper(wr_sztld);
								if (equali(wr_sztld, "COSY", xs__ITaskId))
								{
									formatex(wr_sztld, 9, "Cosy");
								}
							}
							if (0 <= national_commid)
							{
								copy(national_sztld, 9, g_szDemoFiles[national_commid][5]);
								strtoupper(national_sztld);
								if (equali(national_sztld, "RUSH", xs__ITaskId))
								{
									formatex(national_sztld, 9, "Rush");
								}
							}
							new var9;
							if (g_cvarCurrentRecordmsg && g_cvarRecordmsgMode)
							{
								new szRecordPrint[128];
								formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
								new var10;
								if (wr_commid >= 0 && national_commid >= 0)
								{
									new var11;
									if (g_iCommRecordsNum[wr_commid] <= 1 && g_iCommRecordsNum[national_commid] <= 1)
									{
										if (g_cvarRecordmsgMode == 1)
										{
											addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
											client_print_f(0, ColorType:5, "%s", szRecordPrint);
										}
										else
										{
											if (g_cvarRecordmsgMode == 2)
											{
												addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
												client_print_f(0, ColorType:5, "%s", szRecordPrint);
											}
											if (g_cvarRecordmsgMode == 3)
											{
												addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
												format(szRecordPrint, 127, "%s\x01,", szRecordPrint);
												addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
												client_print_f(0, ColorType:5, "%s", szRecordPrint);
											}
										}
									}
									else
									{
										new var12;
										if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
										{
											addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
											client_print_f(0, ColorType:5, "%s", szRecordPrint);
										}
										new var13;
										if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
										{
											formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
											addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
											client_print_f(0, ColorType:5, "%s", szRecordPrint);
										}
									}
								}
								else
								{
									if (0 <= wr_commid)
									{
										new var14;
										if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
										{
											addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
											client_print_f(0, ColorType:5, "%s", szRecordPrint);
										}
									}
									if (0 <= national_commid)
									{
										new var15;
										if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
										{
											addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
											client_print_f(0, ColorType:5, "%s", szRecordPrint);
										}
									}
								}
							}
							new var16;
							if (g_cvarRecordDiff && g_cvarRecordmsgMode)
							{
								new var17;
								if ((g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3) && wr_commid >= 0)
								{
									addDiffString(szPrint, 127, wr_commid, wr_sztld, ftime);
								}
								new var19;
								if ((g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3) && national_commid >= 0)
								{
									addDiffString(szPrint, 127, national_commid, national_sztld, ftime);
								}
							}
							if (!is_user_bot(id))
							{
								if (0 <= wr_commid)
								{
									if (g_iCommRecordsNum[wr_commid] == 1)
									{
										if (ftime < g_flCommRecordTime[wr_commid][0])
										{
											if (g_cvarFinishmsgMode == 1)
											{
												showFinishMessage(id);
											}
											if (g_cvarFinishsoundMode == 1)
											{
												playFinishSound();
											}
										}
									}
								}
								if (0 <= national_commid)
								{
									if (g_iCommRecordsNum[national_commid] == 1)
									{
										if (ftime < g_flCommRecordTime[national_commid][0])
										{
											if (g_cvarFinishmsgMode == 2)
											{
												showFinishMessage(id);
											}
											if (g_cvarFinishsoundMode == 2)
											{
												playFinishSound();
											}
										}
									}
								}
							}
							client_print_f(0, ColorType:5, "%s", szPrint);
							g_flTimerStarted[id] = 0;
							g_flTimerPaused[id] = 0;
							g_bRunFinished[id] = 1;
							g_iCheckPointCounter[id] = 0;
							g_iGoCheckCounter[id] = 0;
							new szFailSettings[192];
							if (bIllegalServerSettings(szFailSettings, 191))
							{
								client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal server settings:\x03 %s", g_szPrefix, szFailSettings);
							}
							if (bIllegalPlayerSettings(id, szFailSettings, 191))
							{
								client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal player settings:\x03 %s", g_szPrefix, szFailSettings);
							}
							new szWhatUsed[60];
							if (g_bHookUsed[id])
							{
								formatex(szWhatUsed, 59, "Hook");
							}
							if (g_bNoclipUsed[id])
							{
								new var21;
								if (szWhatUsed[0])
								{
									var21 = 428864;
								}
								else
								{
									var21 = 428880;
								}
								format(szWhatUsed, 59, "%s%sNoclip", szWhatUsed, var21);
							}
							if (g_bPauseUsed[id])
							{
								new var22;
								if (szWhatUsed[0])
								{
									var22 = 428924;
								}
								else
								{
									var22 = 428940;
								}
								format(szWhatUsed, 59, "%s%sPause", szWhatUsed, var22);
							}
							if (szWhatUsed[0])
							{
								client_print_f(0, ColorType:5, "\x03[%s]\x01 %s used", g_szPrefix, szWhatUsed);
							}
							new var23;
							if (g_bDemoRecording && is_user_localhost(id))
							{
								cmdFinishMenu(id);
								copy(g_szPlayerRecordTime, 13, szTimer);
							}
							return 0;
						}
					}
					i++;
				}
				new wr_sztld[10];
				new national_sztld[10];
				if (0 <= wr_commid)
				{
					copy(wr_sztld, 9, g_szDemoFiles[wr_commid][5]);
					strtoupper(wr_sztld);
					if (equali(wr_sztld, "COSY", xs__ITaskId))
					{
						formatex(wr_sztld, 9, "Cosy");
					}
				}
				if (0 <= national_commid)
				{
					copy(national_sztld, 9, g_szDemoFiles[national_commid][5]);
					strtoupper(national_sztld);
					if (equali(national_sztld, "RUSH", xs__ITaskId))
					{
						formatex(national_sztld, 9, "Rush");
					}
				}
				new var9;
				if (g_cvarCurrentRecordmsg && g_cvarRecordmsgMode)
				{
					new szRecordPrint[128];
					formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
					new var10;
					if (wr_commid >= 0 && national_commid >= 0)
					{
						new var11;
						if (g_iCommRecordsNum[wr_commid] <= 1 && g_iCommRecordsNum[national_commid] <= 1)
						{
							if (g_cvarRecordmsgMode == 1)
							{
								addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
							else
							{
								if (g_cvarRecordmsgMode == 2)
								{
									addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
									client_print_f(0, ColorType:5, "%s", szRecordPrint);
								}
								if (g_cvarRecordmsgMode == 3)
								{
									addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
									format(szRecordPrint, 127, "%s\x01,", szRecordPrint);
									addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
									client_print_f(0, ColorType:5, "%s", szRecordPrint);
								}
							}
						}
						else
						{
							new var12;
							if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
							{
								addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
							new var13;
							if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
							{
								formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
								addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
						}
					}
					else
					{
						if (0 <= wr_commid)
						{
							new var14;
							if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
							{
								addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
						}
						if (0 <= national_commid)
						{
							new var15;
							if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
							{
								addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
						}
					}
				}
				new var16;
				if (g_cvarRecordDiff && g_cvarRecordmsgMode)
				{
					new var17;
					if ((g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3) && wr_commid >= 0)
					{
						addDiffString(szPrint, 127, wr_commid, wr_sztld, ftime);
					}
					new var19;
					if ((g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3) && national_commid >= 0)
					{
						addDiffString(szPrint, 127, national_commid, national_sztld, ftime);
					}
				}
				if (!is_user_bot(id))
				{
					if (0 <= wr_commid)
					{
						if (g_iCommRecordsNum[wr_commid] == 1)
						{
							if (ftime < g_flCommRecordTime[wr_commid][0])
							{
								if (g_cvarFinishmsgMode == 1)
								{
									showFinishMessage(id);
								}
								if (g_cvarFinishsoundMode == 1)
								{
									playFinishSound();
								}
							}
						}
					}
					if (0 <= national_commid)
					{
						if (g_iCommRecordsNum[national_commid] == 1)
						{
							if (ftime < g_flCommRecordTime[national_commid][0])
							{
								if (g_cvarFinishmsgMode == 2)
								{
									showFinishMessage(id);
								}
								if (g_cvarFinishsoundMode == 2)
								{
									playFinishSound();
								}
							}
						}
					}
				}
				client_print_f(0, ColorType:5, "%s", szPrint);
				g_flTimerStarted[id] = 0;
				g_flTimerPaused[id] = 0;
				g_bRunFinished[id] = 1;
				g_iCheckPointCounter[id] = 0;
				g_iGoCheckCounter[id] = 0;
				new szFailSettings[192];
				if (bIllegalServerSettings(szFailSettings, 191))
				{
					client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal server settings:\x03 %s", g_szPrefix, szFailSettings);
				}
				if (bIllegalPlayerSettings(id, szFailSettings, 191))
				{
					client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal player settings:\x03 %s", g_szPrefix, szFailSettings);
				}
				new szWhatUsed[60];
				if (g_bHookUsed[id])
				{
					formatex(szWhatUsed, 59, "Hook");
				}
				if (g_bNoclipUsed[id])
				{
					new var21;
					if (szWhatUsed[0])
					{
						var21 = 428864;
					}
					else
					{
						var21 = 428880;
					}
					format(szWhatUsed, 59, "%s%sNoclip", szWhatUsed, var21);
				}
				if (g_bPauseUsed[id])
				{
					new var22;
					if (szWhatUsed[0])
					{
						var22 = 428924;
					}
					else
					{
						var22 = 428940;
					}
					format(szWhatUsed, 59, "%s%sPause", szWhatUsed, var22);
				}
				if (szWhatUsed[0])
				{
					client_print_f(0, ColorType:5, "\x03[%s]\x01 %s used", g_szPrefix, szWhatUsed);
				}
				new var23;
				if (g_bDemoRecording && is_user_localhost(id))
				{
					cmdFinishMenu(id);
					copy(g_szPlayerRecordTime, 13, szTimer);
				}
				return 0;
			}
		}
		i++;
	}
	new i;
	while (i < 25)
	{
		new var8;
		if (!equali(g_szDemoFiles[i][5], "wr", xs__ITaskId) && g_szDemoFiles[i][5][0] > 0 && !equali(g_szDemoFiles[i][6], "wr", xs__ITaskId) && equali(g_szDemoFiles[i][4], "nocp", xs__ITaskId))
		{
			national_commid = i;
			if (0 < g_iCommRecordsNum[i])
			{
				new wr_sztld[10];
				new national_sztld[10];
				if (0 <= wr_commid)
				{
					copy(wr_sztld, 9, g_szDemoFiles[wr_commid][5]);
					strtoupper(wr_sztld);
					if (equali(wr_sztld, "COSY", xs__ITaskId))
					{
						formatex(wr_sztld, 9, "Cosy");
					}
				}
				if (0 <= national_commid)
				{
					copy(national_sztld, 9, g_szDemoFiles[national_commid][5]);
					strtoupper(national_sztld);
					if (equali(national_sztld, "RUSH", xs__ITaskId))
					{
						formatex(national_sztld, 9, "Rush");
					}
				}
				new var9;
				if (g_cvarCurrentRecordmsg && g_cvarRecordmsgMode)
				{
					new szRecordPrint[128];
					formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
					new var10;
					if (wr_commid >= 0 && national_commid >= 0)
					{
						new var11;
						if (g_iCommRecordsNum[wr_commid] <= 1 && g_iCommRecordsNum[national_commid] <= 1)
						{
							if (g_cvarRecordmsgMode == 1)
							{
								addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
							else
							{
								if (g_cvarRecordmsgMode == 2)
								{
									addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
									client_print_f(0, ColorType:5, "%s", szRecordPrint);
								}
								if (g_cvarRecordmsgMode == 3)
								{
									addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
									format(szRecordPrint, 127, "%s\x01,", szRecordPrint);
									addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
									client_print_f(0, ColorType:5, "%s", szRecordPrint);
								}
							}
						}
						else
						{
							new var12;
							if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
							{
								addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
							new var13;
							if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
							{
								formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
								addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
						}
					}
					else
					{
						if (0 <= wr_commid)
						{
							new var14;
							if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
							{
								addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
						}
						if (0 <= national_commid)
						{
							new var15;
							if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
							{
								addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
								client_print_f(0, ColorType:5, "%s", szRecordPrint);
							}
						}
					}
				}
				new var16;
				if (g_cvarRecordDiff && g_cvarRecordmsgMode)
				{
					new var17;
					if ((g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3) && wr_commid >= 0)
					{
						addDiffString(szPrint, 127, wr_commid, wr_sztld, ftime);
					}
					new var19;
					if ((g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3) && national_commid >= 0)
					{
						addDiffString(szPrint, 127, national_commid, national_sztld, ftime);
					}
				}
				if (!is_user_bot(id))
				{
					if (0 <= wr_commid)
					{
						if (g_iCommRecordsNum[wr_commid] == 1)
						{
							if (ftime < g_flCommRecordTime[wr_commid][0])
							{
								if (g_cvarFinishmsgMode == 1)
								{
									showFinishMessage(id);
								}
								if (g_cvarFinishsoundMode == 1)
								{
									playFinishSound();
								}
							}
						}
					}
					if (0 <= national_commid)
					{
						if (g_iCommRecordsNum[national_commid] == 1)
						{
							if (ftime < g_flCommRecordTime[national_commid][0])
							{
								if (g_cvarFinishmsgMode == 2)
								{
									showFinishMessage(id);
								}
								if (g_cvarFinishsoundMode == 2)
								{
									playFinishSound();
								}
							}
						}
					}
				}
				client_print_f(0, ColorType:5, "%s", szPrint);
				g_flTimerStarted[id] = 0;
				g_flTimerPaused[id] = 0;
				g_bRunFinished[id] = 1;
				g_iCheckPointCounter[id] = 0;
				g_iGoCheckCounter[id] = 0;
				new szFailSettings[192];
				if (bIllegalServerSettings(szFailSettings, 191))
				{
					client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal server settings:\x03 %s", g_szPrefix, szFailSettings);
				}
				if (bIllegalPlayerSettings(id, szFailSettings, 191))
				{
					client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal player settings:\x03 %s", g_szPrefix, szFailSettings);
				}
				new szWhatUsed[60];
				if (g_bHookUsed[id])
				{
					formatex(szWhatUsed, 59, "Hook");
				}
				if (g_bNoclipUsed[id])
				{
					new var21;
					if (szWhatUsed[0])
					{
						var21 = 428864;
					}
					else
					{
						var21 = 428880;
					}
					format(szWhatUsed, 59, "%s%sNoclip", szWhatUsed, var21);
				}
				if (g_bPauseUsed[id])
				{
					new var22;
					if (szWhatUsed[0])
					{
						var22 = 428924;
					}
					else
					{
						var22 = 428940;
					}
					format(szWhatUsed, 59, "%s%sPause", szWhatUsed, var22);
				}
				if (szWhatUsed[0])
				{
					client_print_f(0, ColorType:5, "\x03[%s]\x01 %s used", g_szPrefix, szWhatUsed);
				}
				new var23;
				if (g_bDemoRecording && is_user_localhost(id))
				{
					cmdFinishMenu(id);
					copy(g_szPlayerRecordTime, 13, szTimer);
				}
				return 0;
			}
		}
		i++;
	}
	new wr_sztld[10];
	new national_sztld[10];
	if (0 <= wr_commid)
	{
		copy(wr_sztld, 9, g_szDemoFiles[wr_commid][5]);
		strtoupper(wr_sztld);
		if (equali(wr_sztld, "COSY", xs__ITaskId))
		{
			formatex(wr_sztld, 9, "Cosy");
		}
	}
	if (0 <= national_commid)
	{
		copy(national_sztld, 9, g_szDemoFiles[national_commid][5]);
		strtoupper(national_sztld);
		if (equali(national_sztld, "RUSH", xs__ITaskId))
		{
			formatex(national_sztld, 9, "Rush");
		}
	}
	new var9;
	if (g_cvarCurrentRecordmsg && g_cvarRecordmsgMode)
	{
		new szRecordPrint[128];
		formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
		new var10;
		if (wr_commid >= 0 && national_commid >= 0)
		{
			new var11;
			if (g_iCommRecordsNum[wr_commid] <= 1 && g_iCommRecordsNum[national_commid] <= 1)
			{
				if (g_cvarRecordmsgMode == 1)
				{
					addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
					client_print_f(0, ColorType:5, "%s", szRecordPrint);
				}
				else
				{
					if (g_cvarRecordmsgMode == 2)
					{
						addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
						client_print_f(0, ColorType:5, "%s", szRecordPrint);
					}
					if (g_cvarRecordmsgMode == 3)
					{
						addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
						format(szRecordPrint, 127, "%s\x01,", szRecordPrint);
						addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
						client_print_f(0, ColorType:5, "%s", szRecordPrint);
					}
				}
			}
			else
			{
				new var12;
				if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
				{
					addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
					client_print_f(0, ColorType:5, "%s", szRecordPrint);
				}
				new var13;
				if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
				{
					formatex(szRecordPrint, 127, "\x04[%s]", g_szPrefix);
					addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
					client_print_f(0, ColorType:5, "%s", szRecordPrint);
				}
			}
		}
		else
		{
			if (0 <= wr_commid)
			{
				new var14;
				if (g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3)
				{
					addRecordString(szRecordPrint, 127, wr_commid, wr_sztld, ftime);
					client_print_f(0, ColorType:5, "%s", szRecordPrint);
				}
			}
			if (0 <= national_commid)
			{
				new var15;
				if (g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3)
				{
					addRecordString(szRecordPrint, 127, national_commid, national_sztld, ftime);
					client_print_f(0, ColorType:5, "%s", szRecordPrint);
				}
			}
		}
	}
	new var16;
	if (g_cvarRecordDiff && g_cvarRecordmsgMode)
	{
		new var17;
		if ((g_cvarRecordmsgMode == 1 || g_cvarRecordmsgMode == 3) && wr_commid >= 0)
		{
			addDiffString(szPrint, 127, wr_commid, wr_sztld, ftime);
		}
		new var19;
		if ((g_cvarRecordmsgMode == 2 || g_cvarRecordmsgMode == 3) && national_commid >= 0)
		{
			addDiffString(szPrint, 127, national_commid, national_sztld, ftime);
		}
	}
	if (!is_user_bot(id))
	{
		if (0 <= wr_commid)
		{
			if (g_iCommRecordsNum[wr_commid] == 1)
			{
				if (ftime < g_flCommRecordTime[wr_commid][0])
				{
					if (g_cvarFinishmsgMode == 1)
					{
						showFinishMessage(id);
					}
					if (g_cvarFinishsoundMode == 1)
					{
						playFinishSound();
					}
				}
			}
		}
		if (0 <= national_commid)
		{
			if (g_iCommRecordsNum[national_commid] == 1)
			{
				if (ftime < g_flCommRecordTime[national_commid][0])
				{
					if (g_cvarFinishmsgMode == 2)
					{
						showFinishMessage(id);
					}
					if (g_cvarFinishsoundMode == 2)
					{
						playFinishSound();
					}
				}
			}
		}
	}
	client_print_f(0, ColorType:5, "%s", szPrint);
	g_flTimerStarted[id] = 0;
	g_flTimerPaused[id] = 0;
	g_bRunFinished[id] = 1;
	g_iCheckPointCounter[id] = 0;
	g_iGoCheckCounter[id] = 0;
	new szFailSettings[192];
	if (bIllegalServerSettings(szFailSettings, 191))
	{
		client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal server settings:\x03 %s", g_szPrefix, szFailSettings);
	}
	if (bIllegalPlayerSettings(id, szFailSettings, 191))
	{
		client_print_f(0, ColorType:5, "\x03[%s]\x01 Illegal player settings:\x03 %s", g_szPrefix, szFailSettings);
	}
	new szWhatUsed[60];
	if (g_bHookUsed[id])
	{
		formatex(szWhatUsed, 59, "Hook");
	}
	if (g_bNoclipUsed[id])
	{
		new var21;
		if (szWhatUsed[0])
		{
			var21 = 428864;
		}
		else
		{
			var21 = 428880;
		}
		format(szWhatUsed, 59, "%s%sNoclip", szWhatUsed, var21);
	}
	if (g_bPauseUsed[id])
	{
		new var22;
		if (szWhatUsed[0])
		{
			var22 = 428924;
		}
		else
		{
			var22 = 428940;
		}
		format(szWhatUsed, 59, "%s%sPause", szWhatUsed, var22);
	}
	if (szWhatUsed[0])
	{
		client_print_f(0, ColorType:5, "\x03[%s]\x01 %s used", g_szPrefix, szWhatUsed);
	}
	new var23;
	if (g_bDemoRecording && is_user_localhost(id))
	{
		cmdFinishMenu(id);
		copy(g_szPlayerRecordTime, 13, szTimer);
	}
	return 0;
}

public addRecordString(szPrint[], print_size, commid, sztld[], Float:ftime)
{
	format(szPrint, print_size, "%s\x01 %s:", szPrint, sztld);
	if (g_iCommRecordsNum[commid])
	{
		new szPlayer[32];
		decl rec_num;
		new var1;
		if (g_iCommRecordsNum[commid] > 4)
		{
			var1 = 4;
		}
		else
		{
			var1 = g_iCommRecordsNum[commid];
		}
		rec_num = var1;
		new i;
		while (i < rec_num)
		{
			if (0 < i)
			{
				format(szPrint, print_size, "%s\x01,", szPrint);
			}
			if (g_flCommRecordTime[commid][i] > 0.0)
			{
				if (2 >= g_iCommRecordsNum[commid])
				{
					formatex(szPlayer, 31, "\x01 by %s", g_szCommRecordPlayer[commid][i]);
				}
				else
				{
					szPlayer[0] = 0;
				}
				if (ftime < g_flCommRecordTime[commid][i])
				{
					format(szPrint, print_size, "%s\x01%s\x03 %s%s", szPrint, g_szCommExt[commid][i], g_szCommRecordTime[commid][i], szPlayer);
				}
				else
				{
					format(szPrint, print_size, "%s\x01%s\x04 %s%s", szPrint, g_szCommExt[commid][i], g_szCommRecordTime[commid][i], szPlayer);
				}
			}
			else
			{
				format(szPrint, print_size, "%s\x01%s\x03 No Rec", szPrint, g_szCommExt[commid][i]);
			}
			i++;
		}
	}
	else
	{
		format(szPrint, print_size, "%s\x04 No Map", szPrint);
	}
	return 0;
}

public addDiffString(szPrint[], print_size, commid, sztld[], Float:ftime)
{
	if (g_iCommRecordsNum[commid])
	{
		if (g_iCommRecordsNum[commid] == 1)
		{
			if (!g_flCommRecordTime[commid][0])
			{
				format(szPrint, print_size, "%s\x01 (\x03No %s Rec\x01)", szPrint, sztld);
			}
			else
			{
				new szTimer[14];
				string_timer(floatabs(floatsub(ftime, g_flCommRecordTime[commid][0])), szTimer, 13, 2, 0);
				if (ftime < g_flCommRecordTime[commid][0])
				{
					format(szPrint, print_size, "%s\x01 (\x03-%s \x01%s)", szPrint, szTimer, sztld);
				}
				else
				{
					format(szPrint, print_size, "%s\x01 (\x04+%s \x01%s)", szPrint, szTimer, sztld);
				}
			}
		}
		format(szPrint, print_size, "%s\x01 (\x04%d \x01%s)", szPrint, g_iCommRecordsNum[commid], sztld);
	}
	else
	{
		format(szPrint, print_size, "%s\x01 (\x04No %s Map\x01)", szPrint, sztld);
	}
	return 0;
}

public Orpheu_InstallGameRules()
{
	g_orpheuGameRules = OrpheuGetReturn();
	return 0;
}

restartRound(Float:delay, id)
{
	g_pRoundtime = get_cvar_pointer("mp_roundtime");
	if (get_pcvar_num(g_pRoundtime))
	{
		g_bZeroMpTime = false;
	}
	else
	{
		g_bZeroMpTime = true;
	}
	OrpheuMemorySetAtAddress(g_orpheuGameRules, "m_fTeamCount", 1, floatadd(get_gametime(), delay));
	OrpheuMemorySetAtAddress(g_orpheuGameRules, "m_bRoundTerminating", 1, 1);
	if (!is_zero_vec(g_flPlayerStartAngle[id]))
	{
		new var1;
		if (g_cvarLoadAngles == 1 || g_cvarLoadAngles == 3)
		{
			set_pev(id, 126, VEC_NULL);
			set_pev(id, 124, g_flPlayerStartAngle[id]);
			set_pev(id, 140, VEC_NULL);
			set_pev(id, 65, 1);
		}
	}
	return 0;
}

bIllegalServerSettings(szFailsettings[], ilen)
{
	new pValue;
	new i;
	while (i < 13)
	{
		pValue = get_cvar_pointer(g_szServerCvars[i]);
		if (g_szServerCvars[i][20] != get_pcvar_num(pValue))
		{
			if (szFailsettings[0])
			{
				add(szFailsettings, ilen, "\x01, \x03", xs__ITaskId);
			}
			add(szFailsettings, ilen, g_szServerCvars[i], xs__ITaskId);
		}
		i++;
	}
	new var1;
	if (szFailsettings[0])
	{
		var1 = 1;
	}
	else
	{
		var1 = 0;
	}
	return var1;
}

bIllegalPlayerSettings(id, szfailsettings[], ilen)
{
	copy(szfailsettings, ilen, g_szPlayerSettings[id]);
	new var1;
	if (szfailsettings[0])
	{
		var1 = 1;
	}
	else
	{
		var1 = 0;
	}
	return var1;
}

checkFixedValue(value[], legalValue[])
{
	if (str_to_float(value) == str_to_float(legalValue))
	{
		return 1;
	}
	return 0;
}

loadThisRecords(icomm)
{
	new iMapNameLen = strlen(g_szMapName);
	g_iCommRecordsNum[icomm] = 0;
	new szFile[128];
	format(szFile, 127, "%s/%s", g_szRecDir, g_szDemoFiles[icomm][1]);
	if (file_exists(szFile))
	{
		new hFile = fopen(szFile, 429832);
		new szData[128];
		new szMapName[64];
		new szTime[14];
		new szCP[10];
		new szGC[10];
		new szAuthor[32];
		new szCountry[2];
		new szCode[6];
		while (!feof(hFile))
		{
			fgets(hFile, szData, 127);
			trim(szData);
			new var1;
			if (!(!szData[0] || szData[0] == 10 || !equali(szData, g_szMapName, iMapNameLen)))
			{
				if (equali(g_szDemoFiles[icomm][4], "nocp", xs__ITaskId))
				{
					parse(szData, szMapName, 63, szTime, 13, szAuthor, 31, szCountry, 1, szCode, 5);
					szCP[0] = 0;
					szGC[0] = 0;
				}
				else
				{
					parse(szData, szMapName, 63, szTime, 13, szCP, 9, szGC, 9, szAuthor, 31, szCountry, 1, szCode, 5);
				}
				new var2;
				if (!(szMapName[iMapNameLen] != 91 && strlen(szMapName) != iMapNameLen))
				{
					if (4 <= g_iCommRecordsNum[icomm])
					{
						g_iCommRecordsNum[icomm]++;
					}
					if (szMapName[iMapNameLen] == 91)
					{
						formatex(g_szCommExt[icomm][g_iCommRecordsNum[icomm]], 19, " %s", szMapName[iMapNameLen]);
					}
					new var4;
					if (szTime[0] != 42 && (equal(szAuthor, "n/a", xs__ITaskId) && 0 == str_to_float(szTime)))
					{
						if (0 > containi(szTime, 429892))
						{
							string_timer(str_to_float(szTime), szTime, 13, 2, 0);
						}
						g_flCommRecordTime[icomm][g_iCommRecordsNum[icomm]] = float_timer(szTime);
						copy(g_szCommRecordTime[icomm][g_iCommRecordsNum[icomm]], 13, szTime);
						copy(g_szCommCP[icomm][g_iCommRecordsNum[icomm]], 9, szCP);
						copy(g_szCommGC[icomm][g_iCommRecordsNum[icomm]], 9, szGC);
						copy(g_szCommRecordPlayer[icomm][g_iCommRecordsNum[icomm]], 31, szAuthor);
					}
					g_iCommRecordsNum[icomm]++;
				}
			}
		}
		fclose(hFile);
	}
	return 1;
}

loadCommunityRecord(map[], szCommRecord[], icommsize, icomm)
{
	new iMapNameLen = strlen(map);
	new iRecords;
	new szFile[128];
	format(szFile, 127, "%s/%s", g_szRecDir, g_szDemoFiles[icomm][1]);
	if (file_exists(szFile))
	{
		new hFile = fopen(szFile, 429924);
		new szData[128];
		new szMapName[64];
		new szTime[14];
		new szCP[10];
		new szGC[10];
		new szAuthor[32];
		new szCountry[2];
		new szExt[25];
		new szCode[6];
		while (!feof(hFile))
		{
			fgets(hFile, szData, 127);
			trim(szData);
			new var1;
			if (!(!szData[0] || szData[0] == 10 || !equali(szData, map, iMapNameLen)))
			{
				if (equali(g_szDemoFiles[icomm][4], "nocp", xs__ITaskId))
				{
					parse(szData, szMapName, 63, szTime, 13, szAuthor, 31, szCountry, 1, szCode, 5);
					szCP[0] = 0;
					szGC[0] = 0;
				}
				else
				{
					parse(szData, szMapName, 63, szTime, 13, szCP, 9, szGC, 9, szAuthor, 31, szCountry, 1, szCode, 5);
				}
				new var2;
				if (!(szMapName[iMapNameLen] != 91 && strlen(szMapName) != iMapNameLen))
				{
					if (szMapName[iMapNameLen] == 91)
					{
						formatex(szExt, 24, "%s ", szMapName[iMapNameLen]);
					}
					if (szCommRecord[0])
					{
						add(szCommRecord, icommsize, 429968, xs__ITaskId);
					}
					new var4;
					if (szTime[0] == 42 || (equal(szAuthor, "n/a", xs__ITaskId) && 0 == str_to_float(szTime)))
					{
						add(szCommRecord, icommsize, szExt, xs__ITaskId);
						add(szCommRecord, icommsize, "No Record", xs__ITaskId);
					}
					else
					{
						if (0 > containi(szTime, 430032))
						{
							string_timer(str_to_float(szTime), szTime, 13, 2, 0);
						}
						if (equali(g_szDemoFiles[icomm][4], "nocp", xs__ITaskId))
						{
							format(szCommRecord, icommsize, "%s%s%s by %s", szCommRecord, szExt, szTime, szAuthor);
						}
						format(szCommRecord, icommsize, "%s%s%s by %s [%s cp %s gc]", szCommRecord, szExt, szTime, szAuthor, szCP, szGC);
					}
					iRecords++;
				}
			}
		}
		fclose(hFile);
	}
	if (iRecords)
	{
		return 1;
	}
	return 0;
}

readRecords()
{
	new szFile[128];
	format(szFile, 127, "%s/%s", g_szRecDir, g_szCommRecordsFile);
	if (!file_exists(szFile))
	{
		new hFile = fopen(szFile, "wt");
		fputs(hFile, ";Format:\n;\n");
		fputs(hFile, "; demos URL\n; demos file\n; last date file\n; community name\n; nocp or cp\n; chat command (and alias)\n\n");
		fclose(hFile);
		return 0;
	}
	new hFile = fopen(szFile, 430708);
	new szData[512];
	new icomm;
	new icount;
	while (!feof(hFile))
	{
		fgets(hFile, szData, 511);
		trim(szData);
		new var1;
		if (!(!szData[0] || szData[0] == 10 || szData[0] == 59))
		{
			new var2;
			if (icount == 5 && contain(szData, 430716))
			{
				new szData1[20];
				new szData2[20];
				parse(szData, szData1, 19, szData2, 19);
				copy(g_szDemoFiles[icomm][icount], 199, szData1);
				copy(g_szDemoFiles[icomm][icount + 1], 199, szData2);
			}
			else
			{
				copy(g_szDemoFiles[icomm][icount], 199, szData);
			}
			if (icount == 5)
			{
				icomm++;
				icount = 0;
			}
			else
			{
				icount++;
			}
		}
	}
	fclose(hFile);
	new i;
	while (i < 25)
	{
		if (g_szDemoFiles[i][0][0])
		{
			TrieSetCell(g_tCommunities, g_szDemoFiles[i][5], i);
			if (g_szDemoFiles[i][6][0])
			{
				TrieSetCell(g_tCommunities, g_szDemoFiles[i][6], i);
			}
		}
		i++;
	}
	return 1;
}

checkRecords()
{
	new szHost[96];
	new szUrl[96];
	new szSocket[256];
	new iSocketError;
	new iSocket;
	new iPos;
	new szFile[128];
	new szFile2[128];
	new szWebDate[64];
	new szFileDate[64];
	new i;
	while (i < 25)
	{
		if (g_szDemoFiles[i][0][0])
		{
			new start = 7;
			if (g_szDemoFiles[i][0][4] == 115)
			{
				start = 8;
			}
			copy(szHost, 95, g_szDemoFiles[i][0][start]);
			iPos = contain(szHost, 430724);
			if (0 <= iPos)
			{
				copy(szUrl, 95, szHost[iPos + 1]);
				szHost[iPos] = 0;
			}
			g_szDemosBuffer[0] = 0;
			iSocket = socket_open(szHost, 80, 1, iSocketError);
			if (0 < iSocketError)
			{
				switch (iSocketError)
				{
					case 1:
					{
						log_amx("Socket Error (%d): error while creating socket", iSocketError);
					}
					case 2:
					{
						log_amx("Socket Error (%d): couldn't resolve %s", iSocketError, szHost);
					}
					case 3:
					{
						log_amx("Socket Error (%d): couldn't connect to given %s:80", iSocketError, szHost);
					}
					default:
					{
					}
				}
			}
			formatex(szSocket, "", "HEAD /%s HTTP/1.1\r\nHost: %s\r\nUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\r\nConnection: close\r\n\r\n", szUrl, szHost);
			socket_send(iSocket, szSocket, "");
			socket_recv(iSocket, g_szDemosBuffer, 24999);
			socket_close(iSocket);
			if (g_szDemosBuffer[0])
			{
				iPos = contain(g_szDemosBuffer, "Last-Modified: ");
				if (!(0 > iPos))
				{
					format(szFile, 127, "%s/%s", g_szRecDir, g_szDemoFiles[i][1]);
					format(szFile2, 127, "%s/%s", g_szRecDir, g_szDemoFiles[i][2]);
					copyc(szWebDate, 63, g_szDemosBuffer[iPos], 10);
					if (file_exists(szFile2))
					{
						new hFile = fopen(szFile2, 431932);
						fgets(hFile, szFileDate, 63);
						fclose(hFile);
					}
					if (!equal(szFileDate, szWebDate, xs__ITaskId))
					{
						new hFile = fopen(szFile2, "wt");
						fputs(hFile, szWebDate);
						fclose(hFile);
						g_szDemosBuffer[0] = 0;
						iSocket = socket_open(szHost, 80, 1, iSocketError);
						if (0 < iSocketError)
						{
							switch (iSocketError)
							{
								case 1:
								{
									log_amx("Socket Error (%d): error while creating socket", iSocketError);
								}
								case 2:
								{
									log_amx("Socket Error (%d): couldn't resolve %s", iSocketError, szHost);
								}
								case 3:
								{
									log_amx("Socket Error (%d): couldn't connect to given %s:80", iSocketError, szHost);
								}
								default:
								{
								}
							}
						}
						formatex(szSocket, "", "GET /%s HTTP/1.1\r\nHost: %s\r\nUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\r\nConnection: close\r\n\r\n", szUrl, szHost);
						socket_send(iSocket, szSocket, "");
						hFile = fopen(szFile, "wt");
						new bool:bChunk;
						new szContentLength[30];
						new iContentLength = 1000000;
						new iContentCount;
						while (socket_recv(iSocket, g_szDemosBuffer, 24999))
						{
							if (g_szDemosBuffer[0])
							{
								new var1;
								if (g_szDemosBuffer[0] == 72 && g_szDemosBuffer[1] == 84)
								{
									iPos = contain(g_szDemosBuffer, "Content-Length: ");
									if (0 <= iPos)
									{
										copy(g_szDemosBuffer, 24999, g_szDemosBuffer[iPos + 16]);
										iPos = contain(g_szDemosBuffer, "\r\n");
										copy(szContentLength, 29, g_szDemosBuffer);
										szContentLength[iPos] = 0;
										iContentLength = str_to_num(szContentLength);
										if (0 >= iContentLength)
										{
											fclose(hFile);
											socket_close(iSocket);
										}
									}
									else
									{
										bChunk = true;
										iContentLength = -1;
									}
									iPos = contain(g_szDemosBuffer, "\r\n\r\n") + 4;
									copy(g_szDemosBuffer, 24999, g_szDemosBuffer[iPos]);
								}
								if (bChunk)
								{
									if (szContentLength[0])
									{
										iPos = contain(g_szDemosBuffer, 433148);
										new var2;
										if (iPos >= 0 && iPos < 11)
										{
											new szSecondPart[15];
											copy(szSecondPart, 14, g_szDemosBuffer);
											szSecondPart[iPos] = 0;
											copy(g_szDemosBuffer, 24999, g_szDemosBuffer[iPos + 1]);
											iPos = contain(szSecondPart, 433156);
											if (0 <= iPos)
											{
												szSecondPart[iPos] = 0;
											}
											format(szContentLength, 29, "%s%s", szContentLength, szSecondPart);
											iContentLength = hexToDec(szContentLength);
											szContentLength[0] = 0;
											iContentCount = iContentLength + iContentCount;
											if (iContentCount > 1000000)
											{
												fclose(hFile);
												socket_close(iSocket);
											}
										}
									}
									if (0 <= iContentLength)
									{
										iPos = contain(g_szDemosBuffer, "\r\n");
										if (0 > iPos)
										{
											if (iContentLength > strlen(g_szDemosBuffer))
											{
												iContentLength -= strlen(g_szDemosBuffer);
												fputs(hFile, g_szDemosBuffer);
											}
											log_amx("Content Error: iContentLength %d less than buffer length %d", iContentLength, strlen(g_szDemosBuffer));
											fclose(hFile);
											socket_close(iSocket);
										}
										if (iPos == iContentLength)
										{
											g_szDemosBuffer[iPos] = 0;
											fputs(hFile, g_szDemosBuffer);
											copy(g_szDemosBuffer, 24999, g_szDemosBuffer[iPos + 2]);
											iContentLength = -1;
										}
										log_amx("Content Error: iContentLength %d not equal the chunk size %d", iContentLength, iPos);
										fclose(hFile);
										socket_close(iSocket);
									}
									iPos = contain(g_szDemosBuffer, "\r\n");
									while (iPos >= 0 && iPos < 11)
									{
										copy(szContentLength, 29, g_szDemosBuffer);
										szContentLength[iPos] = 0;
										if (szContentLength[0] == 10)
										{
											copy(szContentLength, 29, szContentLength[1]);
										}
										iContentLength = hexToDec(szContentLength);
										szContentLength[0] = 0;
										iContentCount = iContentLength + iContentCount;
										if (!(iContentCount > 1000000))
										{
											copy(g_szDemosBuffer, 24999, g_szDemosBuffer[iPos + 2]);
											iPos = contain(g_szDemosBuffer, "\r\n");
											if (0 > iPos)
											{
												if (iContentLength >= strlen(g_szDemosBuffer))
												{
													iContentLength -= strlen(g_szDemosBuffer);
													fputs(hFile, g_szDemosBuffer);
												}
												else
												{
													if (iContentLength == strlen(g_szDemosBuffer) - 1)
													{
														if (g_szDemosBuffer[strlen(g_szDemosBuffer) - 1] == 13)
														{
															iContentLength = -1;
															fputs(hFile, g_szDemosBuffer);
														}
													}
												}
												new var4;
												if (iPos < 0 && strlen(g_szDemosBuffer) > 0 && strlen(g_szDemosBuffer) < 12)
												{
													copy(szContentLength, 29, g_szDemosBuffer);
												}
											}
											if (iPos == iContentLength)
											{
												g_szDemosBuffer[iPos] = 0;
												fputs(hFile, g_szDemosBuffer);
												copy(g_szDemosBuffer, 24999, g_szDemosBuffer[iPos + 2]);
												iContentLength = -1;
												iPos = contain(g_szDemosBuffer, "\r\n");
											}
											log_amx("Content Error: iContentLength %d not equal the chunk size %d", iContentLength, iPos);
											new var4;
											if (iPos < 0 && strlen(g_szDemosBuffer) > 0 && strlen(g_szDemosBuffer) < 12)
											{
												copy(szContentLength, 29, g_szDemosBuffer);
											}
										}
										new var4;
										if (iPos < 0 && strlen(g_szDemosBuffer) > 0 && strlen(g_szDemosBuffer) < 12)
										{
											copy(szContentLength, 29, g_szDemosBuffer);
										}
									}
									new var4;
									if (iPos < 0 && strlen(g_szDemosBuffer) > 0 && strlen(g_szDemosBuffer) < 12)
									{
										copy(szContentLength, 29, g_szDemosBuffer);
									}
								}
								if (strlen(g_szDemosBuffer) > iContentLength)
								{
									g_szDemosBuffer[iContentLength] = 0;
								}
								iContentLength -= strlen(g_szDemosBuffer);
								fputs(hFile, g_szDemosBuffer);
								if (0 >= iContentLength)
								{
									fclose(hFile);
									socket_close(iSocket);
								}
							}
						}
						fclose(hFile);
						socket_close(iSocket);
					}
				}
			}
		}
		i++;
	}
	return 0;
}

public hexToDec(hex[])
{
	new i;
	new result;
	new value;
	i++;
	while ((value = isxdigit(hex[i])) != -1)
	{
		result = value + result * 16;
	}
	return result;
}

isxdigit(ch)
{
	if (!ch)
	{
		return -1;
	}
	if (48 <= ch <= 57)
	{
		return ch + -48;
	}
	ch &= -33;
	if (65 <= ch <= 70)
	{
		return ch + -55;
	}
	return -1;
}

public messageMOTD(msgid, dest, id)
{
	if (!g_bSawMotd[id])
	{
		if (get_msg_arg_int(1) == 1)
		{
			g_bSawMotd[id] = 1;
		}
		return 1;
	}
	return 0;
}

public cmdRecordsMOTD(id)
{
	new buffer[500];
	formatex(buffer, "", "<html><head><meta http-equiv=\"Refresh\" content=\"0;url=https://kz-rush.ru/server/motd/v1/map/%s/site-noncp/\"></head><body><p>LOADING...</p></body></html>", g_szMapName);
	show_motd(id, buffer, "KZ-Rush");
	return 1;
}

public cmdShortcutsMOTD(id)
{
	new buffer[500];
	formatex(buffer, "", "<html><head><meta http-equiv=\"Refresh\" content=\"0;url=https://kz-rush.ru/server/motd/v1/map/%s/shortcuts/\"></head><body><p>LOADING...</p></body></html>", g_szMapName);
	show_motd(id, buffer, "KZ-Rush");
	return 1;
}

public showFinishMessage(id)
{
	new szFinishMessage[300];
	get_pcvar_string(g_hcvarFinishmsgText, szFinishMessage, 299);
	new var1;
	if (!equali(szFinishMessage, 435244, xs__ITaskId) && !equali(szFinishMessage, 435248, xs__ITaskId))
	{
		set_dhudmessage(g_cvarFinishred, g_cvarFinishgreen, g_cvarFinishblue, -1.0, 0.2, 0, 0.0, 5.0, 0.2, 0.2, false);
		show_dhudmessage(id, "%s", szFinishMessage);
	}
	return 0;
}

public playFinishSound()
{
	new szFinishSound[150];
	get_pcvar_string(g_hcvarFinishsoundSource, szFinishSound, 149);
	new var1;
	if (!equali(szFinishSound, 435268, xs__ITaskId) && !equali(szFinishSound, 435272, xs__ITaskId))
	{
		new players[32];
		new pnum;
		get_players(players, pnum, "ch", 836);
		new i;
		while (i < pnum)
		{
			client_cmd(players[i], "speak %s", szFinishSound);
			i++;
		}
	}
	return 0;
}

public cmdTopMenu(id)
{
	new szMenu[150];
	formatex(szMenu, 149, "\rTop \yMenu\n\n\r1. \wPro Top\n\r2. \wNub Top\n\n\n\n\n\n\n\r9. \wBack\n\r0. \wExit");
	show_my_menu(id, 771, szMenu, -1, "TopMenu");
	return 1;
}

public handleTopMenu(id, item)
{
	switch (item)
	{
		case 0:
		{
			cmdShowProTop(id);
		}
		case 1:
		{
			cmdShowNubTop(id);
		}
		case 8:
		{
			cmdMainMenu(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	cmdTopMenu(id);
	return 0;
}

public cmdShowNubTop(id)
{
	if (!g_cvarTop)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Pro10 and Nub10 are disabled. You can enable them in settings menu", g_szPrefix);
		return 1;
	}
	static szPlayerName[32];
	static szWeapName[30];
	static buffer[1400];
	new len = formatex(buffer, 1399, "<body bgcolor=#FFFFFF><table width=100%% cellpadding=2 cellspacing=0 border=0>");
	len = formatex(buffer[len], 1399 - len, "<tr  align=center bgcolor=#F48000><th width=5%%> # <th width=25%%> Name <th width=15%%> Time <th  width=15%%> Weapon <th width=10%%> CP <th width=10%%> GC <th width=20%%> Date ") + len;
	new i;
	while (i < 10 && str_to_float(g_szNubTopSec[i]) > 0)
	{
		get_weaponname(str_to_num(g_szNubTopWeapon[i]), szWeapName, 29);
		if (g_NubTopLocalhost[i])
		{
			formatex(szPlayerName, 31, "<b>%s</b>", g_szNubTopPlayer[i]);
		}
		else
		{
			formatex(szPlayerName, 31, "%s", g_szNubTopPlayer[i]);
		}
		new var2;
		if (i % 2)
		{
			var2 = 443180;
		}
		else
		{
			var2 = 443176;
		}
		len = formatex(buffer[len], 1399 - len, "<tr align=center%s><td> %d <td> %s <td> %s <td> %s <td> %s <td> %s <td> %s", var2, i + 1, szPlayerName, g_szNubTopTimer[i], 441552 + 28, g_szNubTopCP[i], g_szNubTopGC[i], g_szNubTopDate[i]) + len;
		i++;
	}
	new szTopName[32];
	formatex(szTopName, 31, "Nub Top for %s", g_szMapName);
	show_motd(id, buffer, szTopName);
	return 1;
}

public cmdShowProTop(id)
{
	if (!g_cvarTop)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Pro15 and Nub15 are disabled. You can enable them in settings menu", g_szPrefix);
		return 1;
	}
	static szPlayerName[32];
	static szWeapName[15];
	static buffer[1400];
	new len = formatex(buffer, 1399, "<body bgcolor=#FFFFFF><table width=100%% cellpadding=2 cellspacing=0 border=0>");
	len = formatex(buffer[len], 1399 - len, "<tr  align=center bgcolor=#F48000><th width=5%%> # <th width=30%%> Name <th width=20%%> Time <th  width=25%%> Weapon <th width=20%%> Date ") + len;
	new i;
	while (i < 10 && str_to_float(g_szProTopSec[i]) > 0)
	{
		get_weaponname(str_to_num(g_szProTopWeapon[i]), szWeapName, 14);
		if (g_ProTopLocalhost[i])
		{
			formatex(szPlayerName, 31, "<b>%s</b>", g_szProTopPlayer[i]);
		}
		else
		{
			formatex(szPlayerName, 31, "%s", g_szProTopPlayer[i]);
		}
		new var2;
		if (i % 2)
		{
			var2 = 450556;
		}
		else
		{
			var2 = 450552;
		}
		len = formatex(buffer[len], 1399 - len, "<tr align=center%s><td> %d <td> %s <td> %s <td> %s <td> %s", var2, i + 1, szPlayerName, g_szProTopTimer[i], 449204 + 28, g_szProTopDate[i]) + len;
		i++;
	}
	new szTopName[32];
	formatex(szTopName, 31, "Pro Top for %s", g_szMapName);
	show_motd(id, buffer, szTopName);
	return 1;
}

readProTop()
{
	if (file_exists(g_szProFile))
	{
		new szData[512];
		new handle = fopen(g_szProFile, "rt");
		new szLocalhost[5];
		new i;
		while (i < 10)
		{
			fgets(handle, szData, 511);
			trim(szData);
			parse(szData, szLocalhost, 4, g_szProTopPlayer[i], 31, g_szProTopTimer[i], 21, g_szProTopSec[i], 21, g_szProTopWeapon[i], 21, g_szProTopDate[i], 21);
			g_ProTopLocalhost[i] = str_to_num(szLocalhost);
			i++;
		}
		fclose(handle);
	}
	return 0;
}

readNubTop()
{
	if (file_exists(g_szNubFile))
	{
		new szData[512];
		new handle = fopen(g_szNubFile, "rt");
		new szLocalhost[5];
		new i;
		while (i < 10 && !feof(handle))
		{
			fgets(handle, szData, 511);
			trim(szData);
			parse(szData, szLocalhost, 4, g_szNubTopPlayer[i], 31, g_szNubTopTimer[i], 21, g_szNubTopSec[i], 21, g_szNubTopWeapon[i], 21, g_szNubTopCP[i], 9, g_szNubTopGC[i], 9, g_szNubTopDate[i], 21);
			g_NubTopLocalhost[i] = str_to_num(szLocalhost);
			i++;
		}
		fclose(handle);
	}
	return 0;
}

setProTop(id, szTimer[], Float:Secs)
{
	new iPlaceInTop;
	new Float:ProSecs = 0.0;
	new i;
	while (i < 10)
	{
		ProSecs = str_to_float(g_szProTopSec[i]);
		new var1;
		if (!(ProSecs == 0.0 || Secs < ProSecs))
		{
			iPlaceInTop++;
			i++;
		}
		if (iPlaceInTop == 10)
		{
			if (g_cvarShowplace)
			{
				set_dhudmessage(255, 150, 150, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
				show_dhudmessage(id, "Too slow\n for Top");
			}
		}
		else
		{
			if (g_cvarShowplace)
			{
				set_dhudmessage(150, 150, 255, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
				show_dhudmessage(id, "Pro Top: %d", iPlaceInTop + 1);
			}
			if (!iPlaceInTop)
			{
				if (g_cvarFinishmsgMode == 3)
				{
					showFinishMessage(id);
				}
				if (g_cvarFinishsoundMode == 3)
				{
					playFinishSound();
				}
			}
			new szData[512];
			new handle = fopen(g_szProFile, "wt");
			new j = 9;
			while (j > iPlaceInTop)
			{
				g_ProTopLocalhost[j] = g_ProTopLocalhost[j + -1];
				format(g_szProTopPlayer[j], 31, "%s", g_szProTopPlayer[j + -1]);
				format(g_szProTopTimer[j], 21, "%s", g_szProTopTimer[j + -1]);
				format(g_szProTopSec[j], 21, "%s", g_szProTopSec[j + -1]);
				format(g_szProTopWeapon[j], 21, "%s", g_szProTopWeapon[j + -1]);
				format(g_szProTopDate[j], 21, "%s", g_szProTopDate[j + -1]);
				j--;
			}
			new dummy;
			new weapid = get_user_weapon(id, dummy, dummy);
			new curr_time[22];
			get_time("%d/%m/%Y", curr_time, 21);
			new name[32];
			get_user_name(id, name, 31);
			replace_all(name, 31, 450936, 450944);
			replace_all(name, 31, 450948, 450956);
			replace_all(name, 31, 450960, 450968);
			replace_all(name, 31, 450972, 450980);
			replace_all(name, 31, 450988, 450996);
			g_ProTopLocalhost[iPlaceInTop] = is_user_localhost(id);
			formatex(g_szProTopPlayer[iPlaceInTop], 31, "%s", name);
			formatex(g_szProTopTimer[iPlaceInTop], 21, "%s", szTimer);
			formatex(g_szProTopSec[iPlaceInTop], 21, "%f", Secs);
			formatex(g_szProTopWeapon[iPlaceInTop], 21, "%d", weapid);
			formatex(g_szProTopDate[iPlaceInTop], 21, "%s", curr_time);
			new i;
			while (i < 10 && str_to_float(g_szProTopSec[i]) > 0)
			{
				formatex(szData, 511, "%d %s %s %s %s %s\n", g_ProTopLocalhost[i], g_szProTopPlayer[i], g_szProTopTimer[i], g_szProTopSec[i], g_szProTopWeapon[i], g_szProTopDate[i]);
				fputs(handle, szData);
				i++;
			}
			fclose(handle);
		}
		return 0;
	}
	if (iPlaceInTop == 10)
	{
		if (g_cvarShowplace)
		{
			set_dhudmessage(255, 150, 150, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
			show_dhudmessage(id, "Too slow\n for Top");
		}
	}
	else
	{
		if (g_cvarShowplace)
		{
			set_dhudmessage(150, 150, 255, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
			show_dhudmessage(id, "Pro Top: %d", iPlaceInTop + 1);
		}
		if (!iPlaceInTop)
		{
			if (g_cvarFinishmsgMode == 3)
			{
				showFinishMessage(id);
			}
			if (g_cvarFinishsoundMode == 3)
			{
				playFinishSound();
			}
		}
		new szData[512];
		new handle = fopen(g_szProFile, "wt");
		new j = 9;
		while (j > iPlaceInTop)
		{
			g_ProTopLocalhost[j] = g_ProTopLocalhost[j + -1];
			format(g_szProTopPlayer[j], 31, "%s", g_szProTopPlayer[j + -1]);
			format(g_szProTopTimer[j], 21, "%s", g_szProTopTimer[j + -1]);
			format(g_szProTopSec[j], 21, "%s", g_szProTopSec[j + -1]);
			format(g_szProTopWeapon[j], 21, "%s", g_szProTopWeapon[j + -1]);
			format(g_szProTopDate[j], 21, "%s", g_szProTopDate[j + -1]);
			j--;
		}
		new dummy;
		new weapid = get_user_weapon(id, dummy, dummy);
		new curr_time[22];
		get_time("%d/%m/%Y", curr_time, 21);
		new name[32];
		get_user_name(id, name, 31);
		replace_all(name, 31, 450936, 450944);
		replace_all(name, 31, 450948, 450956);
		replace_all(name, 31, 450960, 450968);
		replace_all(name, 31, 450972, 450980);
		replace_all(name, 31, 450988, 450996);
		g_ProTopLocalhost[iPlaceInTop] = is_user_localhost(id);
		formatex(g_szProTopPlayer[iPlaceInTop], 31, "%s", name);
		formatex(g_szProTopTimer[iPlaceInTop], 21, "%s", szTimer);
		formatex(g_szProTopSec[iPlaceInTop], 21, "%f", Secs);
		formatex(g_szProTopWeapon[iPlaceInTop], 21, "%d", weapid);
		formatex(g_szProTopDate[iPlaceInTop], 21, "%s", curr_time);
		new i;
		while (i < 10 && str_to_float(g_szProTopSec[i]) > 0)
		{
			formatex(szData, 511, "%d %s %s %s %s %s\n", g_ProTopLocalhost[i], g_szProTopPlayer[i], g_szProTopTimer[i], g_szProTopSec[i], g_szProTopWeapon[i], g_szProTopDate[i]);
			fputs(handle, szData);
			i++;
		}
		fclose(handle);
	}
	return 0;
}

setNubTop(id, szTimer[], Float:Secs)
{
	new iPlaceInTop;
	new Float:NubSecs = 0.0;
	new i;
	while (i < 10)
	{
		NubSecs = str_to_float(g_szNubTopSec[i]);
		new var1;
		if (!(NubSecs == 0.0 || Secs < NubSecs))
		{
			iPlaceInTop++;
			i++;
		}
		if (iPlaceInTop == 10)
		{
			if (g_cvarShowplace)
			{
				set_dhudmessage(255, 150, 150, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
				show_dhudmessage(id, "Too slow\n for Top");
			}
		}
		else
		{
			if (g_cvarShowplace)
			{
				set_dhudmessage(150, 150, 255, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
				show_dhudmessage(id, "Nub Top: %d\n[%d cp %d gc]", iPlaceInTop + 1, g_iCheckPointCounter[id], g_iGoCheckCounter[id]);
			}
			if (!iPlaceInTop)
			{
				if (g_cvarFinishmsgMode == 3)
				{
					showFinishMessage(id);
				}
				if (g_cvarFinishsoundMode == 3)
				{
					playFinishSound();
				}
			}
			new szData[512];
			new handle = fopen(g_szNubFile, "wt");
			new j = 9;
			while (j > iPlaceInTop)
			{
				g_NubTopLocalhost[j] = g_NubTopLocalhost[j + -1];
				format(g_szNubTopPlayer[j], 31, "%s", g_szNubTopPlayer[j + -1]);
				format(g_szNubTopTimer[j], 21, "%s", g_szNubTopTimer[j + -1]);
				format(g_szNubTopSec[j], 21, "%s", g_szNubTopSec[j + -1]);
				format(g_szNubTopWeapon[j], 21, "%s", g_szNubTopWeapon[j + -1]);
				format(g_szNubTopCP[j], 21, "%s", g_szNubTopCP[j + -1]);
				format(g_szNubTopGC[j], 21, "%s", g_szNubTopGC[j + -1]);
				format(g_szNubTopDate[j], 21, "%s", g_szNubTopDate[j + -1]);
				j--;
			}
			new dummy;
			new weapid = get_user_weapon(id, dummy, dummy);
			new curr_time[22];
			get_time("%d/%m/%Y", curr_time, 21);
			new name[32];
			get_user_name(id, name, 31);
			replace_all(name, 31, 451444, 451452);
			replace_all(name, 31, 451456, 451464);
			replace_all(name, 31, 451468, 451476);
			replace_all(name, 31, 451480, 451488);
			replace_all(name, 31, 451496, 451504);
			g_NubTopLocalhost[iPlaceInTop] = is_user_localhost(id);
			formatex(g_szNubTopPlayer[iPlaceInTop], 31, "%s", name);
			formatex(g_szNubTopTimer[iPlaceInTop], 21, "%s", szTimer);
			formatex(g_szNubTopSec[iPlaceInTop], 21, "%f", Secs);
			formatex(g_szNubTopWeapon[iPlaceInTop], 21, "%d", weapid);
			formatex(g_szNubTopCP[iPlaceInTop], 21, "%d", g_iCheckPointCounter[id]);
			formatex(g_szNubTopGC[iPlaceInTop], 21, "%d", g_iGoCheckCounter[id]);
			formatex(g_szNubTopDate[iPlaceInTop], 21, "%s", curr_time);
			new i;
			while (i < 10 && str_to_float(g_szNubTopSec[i]) > 0)
			{
				formatex(szData, 511, "%d %s %s %s %s %s %s %s\n", g_NubTopLocalhost[i], g_szNubTopPlayer[i], g_szNubTopTimer[i], g_szNubTopSec[i], g_szNubTopWeapon[i], g_szNubTopCP[i], g_szNubTopGC[i], g_szNubTopDate[i]);
				fputs(handle, szData);
				i++;
			}
			fclose(handle);
		}
		return 0;
	}
	if (iPlaceInTop == 10)
	{
		if (g_cvarShowplace)
		{
			set_dhudmessage(255, 150, 150, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
			show_dhudmessage(id, "Too slow\n for Top");
		}
	}
	else
	{
		if (g_cvarShowplace)
		{
			set_dhudmessage(150, 150, 255, 0.8, 0.8, 0, 0.0, 6.0, 0.2, 0.2, false);
			show_dhudmessage(id, "Nub Top: %d\n[%d cp %d gc]", iPlaceInTop + 1, g_iCheckPointCounter[id], g_iGoCheckCounter[id]);
		}
		if (!iPlaceInTop)
		{
			if (g_cvarFinishmsgMode == 3)
			{
				showFinishMessage(id);
			}
			if (g_cvarFinishsoundMode == 3)
			{
				playFinishSound();
			}
		}
		new szData[512];
		new handle = fopen(g_szNubFile, "wt");
		new j = 9;
		while (j > iPlaceInTop)
		{
			g_NubTopLocalhost[j] = g_NubTopLocalhost[j + -1];
			format(g_szNubTopPlayer[j], 31, "%s", g_szNubTopPlayer[j + -1]);
			format(g_szNubTopTimer[j], 21, "%s", g_szNubTopTimer[j + -1]);
			format(g_szNubTopSec[j], 21, "%s", g_szNubTopSec[j + -1]);
			format(g_szNubTopWeapon[j], 21, "%s", g_szNubTopWeapon[j + -1]);
			format(g_szNubTopCP[j], 21, "%s", g_szNubTopCP[j + -1]);
			format(g_szNubTopGC[j], 21, "%s", g_szNubTopGC[j + -1]);
			format(g_szNubTopDate[j], 21, "%s", g_szNubTopDate[j + -1]);
			j--;
		}
		new dummy;
		new weapid = get_user_weapon(id, dummy, dummy);
		new curr_time[22];
		get_time("%d/%m/%Y", curr_time, 21);
		new name[32];
		get_user_name(id, name, 31);
		replace_all(name, 31, 451444, 451452);
		replace_all(name, 31, 451456, 451464);
		replace_all(name, 31, 451468, 451476);
		replace_all(name, 31, 451480, 451488);
		replace_all(name, 31, 451496, 451504);
		g_NubTopLocalhost[iPlaceInTop] = is_user_localhost(id);
		formatex(g_szNubTopPlayer[iPlaceInTop], 31, "%s", name);
		formatex(g_szNubTopTimer[iPlaceInTop], 21, "%s", szTimer);
		formatex(g_szNubTopSec[iPlaceInTop], 21, "%f", Secs);
		formatex(g_szNubTopWeapon[iPlaceInTop], 21, "%d", weapid);
		formatex(g_szNubTopCP[iPlaceInTop], 21, "%d", g_iCheckPointCounter[id]);
		formatex(g_szNubTopGC[iPlaceInTop], 21, "%d", g_iGoCheckCounter[id]);
		formatex(g_szNubTopDate[iPlaceInTop], 21, "%s", curr_time);
		new i;
		while (i < 10 && str_to_float(g_szNubTopSec[i]) > 0)
		{
			formatex(szData, 511, "%d %s %s %s %s %s %s %s\n", g_NubTopLocalhost[i], g_szNubTopPlayer[i], g_szNubTopTimer[i], g_szNubTopSec[i], g_szNubTopWeapon[i], g_szNubTopCP[i], g_szNubTopGC[i], g_szNubTopDate[i]);
			fputs(handle, szData);
			i++;
		}
		fclose(handle);
	}
	return 0;
}

public semiclip_plugin_init()
{
	g_bWaterOnMap = false;
	g_iWaterGroup = 0;
	checkAndMarkWater();
	g_iLastPlayerIndex = 0;
	g_iLastSpecPlayerIndex = 0;
	register_forward(123, "fmUpdateClientData_P", 1);
	register_forward(124, "fmAddToFullPack_P", 1);
	return 0;
}

public checkAndMarkWater()
{
	new iEnt = -1;
	while ((iEnt = find_ent_by_class(iEnt, "func_water")))
	{
		new var1 = g_bWaterEnts[iEnt >>> 5];
		var1 = 1 << iEnt & 31 | var1;
		g_bWaterOnMap = true;
	}
	iEnt = -1;
	while ((iEnt = find_ent_by_class(iEnt, "func_illusionary")))
	{
		if (entity_get_int(iEnt, 16) == -3)
		{
			new var2 = g_bWaterEnts[iEnt >>> 5];
			var2 = 1 << iEnt & 31 | var2;
			g_bWaterOnMap = true;
		}
	}
	iEnt = -1;
	while ((iEnt = find_ent_by_class(iEnt, "func_conveyor")))
	{
		if (entity_get_int(iEnt, 26) & 2)
		{
			new var3 = g_bWaterEnts[iEnt >>> 5];
			var3 = 1 << iEnt & 31 | var3;
			g_bWaterOnMap = true;
		}
	}
	iEnt = -1;
	while ((iEnt = find_ent_by_model(iEnt, "env_sprite", "sprites/xsmoke1.spr")))
	{
		new var4 = g_bWaterEnts[iEnt >>> 5];
		var4 = 1 << iEnt & 31 | var4;
		g_bWaterOnMap = true;
	}
	return 0;
}

public server_frame()
{
	g_iLastPlayerIndex = 0;
	g_iLastSpecPlayerIndex = 0;
	g_bReadPackets = false;
	g_bClientMessages = false;
	if (g_iWaterGroup)
	{
		setWaterGroup(0);
	}
	get_players(g_iPlayers, g_iNum, 452140, 836);
	g_iNum -= 1;
	while (0 <= g_iNum)
	{
		new var1;
		if (g_cvarSemiclip)
		{
			var1 = 1 << g_iPlayers[g_iNum] & 31;
		}
		else
		{
			var1 = 0;
		}
		entity_set_int(g_iPlayers[g_iNum], 2, var1);
		g_iNum -= 1;
	}
	return 0;
}

public fmUpdateClientData_P(id, sendweapons, cd)
{
	if (!g_cvarSemiclip)
	{
		return 0;
	}
	if (is_user_bot(id))
	{
		return 0;
	}
	static player;
	if (!g_bClientMessages)
	{
		if (g_iWaterGroup != 12)
		{
			setWaterGroup(12);
		}
		g_bClientMessages = true;
		get_players(g_iPlayers, g_iNum, 452152, 836);
		g_iNum -= 1;
		while (0 <= g_iNum)
		{
			player = g_iPlayers[g_iNum];
			entity_set_int(player, 2, 1);
			g_iNum -= 1;
		}
	}
	if (g_iLastPlayerIndex)
	{
		entity_set_int(g_iLastPlayerIndex, 2, 1);
		g_iLastPlayerIndex = 0;
	}
	if (is_user_alive(id))
	{
		g_iLastPlayerIndex = id;
	}
	static group;
	new var1;
	if (g_setInvis[id] && g_setInvis[id] == 2)
	{
		if (is_user_alive(id))
		{
			g_bitIsPlayerInSphere = 0;
			g_iNum = find_sphere_class(id, "player", 1132068864, g_iPlayers, 32, 452192);
			g_iNum -= 1;
			while (0 <= g_iNum)
			{
				player = g_iPlayers[g_iNum];
				if (id != player)
				{
					g_bitIsPlayerInSphere = 1 << player & 31 | g_bitIsPlayerInSphere;
				}
				g_iNum -= 1;
			}
			group = 1;
			if (g_setInvis[id])
			{
				if (get_cd(cd, 5) == 3)
				{
					set_cd(cd, 5, 2);
				}
			}
			else
			{
				group = group | 4;
			}
			entity_set_int(id, 2, group);
		}
		else
		{
			g_bitIsPlayerInSphere = 0;
			g_iNum = find_sphere_class(id, "player", 1132068864, g_iPlayers, 32, 452192);
			g_iLastSpecPlayerIndex = pev(id, 101);
			g_iNum -= 1;
			while (0 <= g_iNum)
			{
				player = g_iPlayers[g_iNum];
				new var2;
				if (id != player && g_iLastSpecPlayerIndex != player)
				{
					g_bitIsPlayerInSphere = 1 << player & 31 | g_bitIsPlayerInSphere;
				}
				g_iNum -= 1;
			}
		}
	}
	else
	{
		if (is_user_alive(id))
		{
			group = 2;
			if (g_setInvis[id] == 1)
			{
				group = group | 8;
			}
			else
			{
				if (get_cd(cd, 5) == 3)
				{
					set_cd(cd, 5, 2);
				}
			}
			entity_set_int(id, 2, group);
		}
		g_bitIsPlayerInSphere = 0;
		get_players(g_iPlayers, g_iNum, 452232, 836);
		g_iLastSpecPlayerIndex = pev(id, 101);
		g_iNum -= 1;
		while (0 <= g_iNum)
		{
			player = g_iPlayers[g_iNum];
			new var3;
			if (id != player && g_iLastSpecPlayerIndex != player)
			{
				g_bitIsPlayerInSphere = 1 << player & 31 | g_bitIsPlayerInSphere;
			}
			g_iNum -= 1;
		}
	}
	return 0;
}

public fmAddToFullPack_P(es, e, ent, id, hostflags, player, pSet)
{
	if (!g_cvarSemiclip)
	{
		return 0;
	}
	static Float:flRange;
	if (player)
	{
		new var1;
		if (is_user_alive(ent) && 1 << ent & 31 & g_bitIsPlayerInSphere)
		{
			set_es(es, 15, 4);
			set_es(es, 11, 0);
			new var2;
			if (g_setInvis[id] == 1 || g_setInvis[id] == 3)
			{
				set_es(es, 16, 0);
			}
			if (0 < g_cvarTranspRadius)
			{
				flRange = entity_range(id, ent);
				if (flRange < 40.0)
				{
					set_es(es, 16, 0);
				}
				else
				{
					set_es(es, 16, floatround(floatmul(1132396544, flRange) / g_cvarTranspRadius, 1));
				}
			}
			set_es(es, 16, 255);
		}
	}
	return 0;
}

public setWaterGroup(iGroup)
{
	new iEnt = -1;
	while ((iEnt = find_ent_by_class(iEnt, "func_water")))
	{
		entity_set_int(iEnt, 2, iGroup);
	}
	iEnt = -1;
	while ((iEnt = find_ent_by_class(iEnt, "func_illusionary")))
	{
		if (1 << iEnt & 31 & g_bWaterEnts[iEnt >>> 5])
		{
			entity_set_int(iEnt, 2, iGroup);
		}
	}
	iEnt = -1;
	while ((iEnt = find_ent_by_class(iEnt, "func_conveyor")))
	{
		if (1 << iEnt & 31 & g_bWaterEnts[iEnt >>> 5])
		{
			entity_set_int(iEnt, 2, iGroup);
		}
	}
	iEnt = -1;
	while ((iEnt = find_ent_by_model(iEnt, "env_sprite", "sprites/xsmoke1.spr")))
	{
		entity_set_int(iEnt, 2, iGroup);
	}
	g_iWaterGroup = iGroup;
	return 0;
}

public cmdInvisMenu(id)
{
	new szMenu[250];
	new keys;
	formatex(szMenu, 249, "\rInvis \yMenu\n\n");
	new szInvis[30];
	new var1;
	if (g_setInvis[id] && g_setInvis[id] == 2)
	{
		formatex(szInvis, 29, "\yVisible");
	}
	else
	{
		new var2;
		if (g_setInvis[id] == 1 || g_setInvis[id] == 3)
		{
			formatex(szInvis, 29, "\rInvisible");
		}
	}
	format(szMenu, 249, "%s\r1. \wPlayers - %s\n", szMenu, szInvis);
	if (g_bWaterOnMap)
	{
		new var3;
		if (g_setInvis[id] && g_setInvis[id] == 1)
		{
			formatex(szInvis, 29, "\yVisible");
		}
		else
		{
			new var4;
			if (g_setInvis[id] == 2 || g_setInvis[id] == 3)
			{
				formatex(szInvis, 29, "\rInvisible");
			}
		}
		format(szMenu, 249, "%s\r2. \wWater - %s\n\n\n\n\n", szMenu, szInvis);
		keys = 771;
	}
	else
	{
		format(szMenu, 249, "%s\r2. \dNo Water\n\n\n\n\n", szMenu);
		keys = 769;
	}
	format(szMenu, 249, "%s\n\n\r9. \wBack\n\r0. \wExit", szMenu);
	show_my_menu(id, keys, szMenu, -1, "InvisMenu");
	return 1;
}

public handleInvisMenu(id, item)
{
	switch (item)
	{
		case 0:
		{
			cmdInvisPlayers(id);
		}
		case 1:
		{
			if (g_bWaterOnMap)
			{
				cmdInvisWater(id);
			}
		}
		case 8:
		{
			cmdMainMenu(id);
			return 1;
		}
		case 9:
		{
			return 1;
		}
		default:
		{
		}
	}
	cmdInvisMenu(id);
	return 1;
}

public cmdInvisPlayers(id)
{
	if (g_setInvis[id])
	{
		if (g_setInvis[id] == 1)
		{
			g_setInvis[id] = 0;
			client_print_f(id, ColorType:6, "\x03[%s]\x01 Players are\x03 visible", g_szPrefix);
		}
		if (g_setInvis[id] == 2)
		{
			g_setInvis[id] = 3;
			client_print_f(id, ColorType:5, "\x03[%s]\x01 Players are\x03 invisible", g_szPrefix);
		}
		if (g_setInvis[id] == 3)
		{
			g_setInvis[id] = 2;
			client_print_f(id, ColorType:6, "\x03[%s]\x01 Players are\x03 visible", g_szPrefix);
		}
	}
	else
	{
		g_setInvis[id] = 1;
		client_print_f(id, ColorType:5, "\x03[%s]\x01 Players are\x03 invisible", g_szPrefix);
	}
	return 1;
}

public cmdInvisWater(id)
{
	if (g_bWaterOnMap)
	{
		if (g_setInvis[id])
		{
			if (g_setInvis[id] == 1)
			{
				g_setInvis[id] = 3;
				client_print_f(id, ColorType:5, "\x03[%s]\x01 Water is\x03 invisible", g_szPrefix);
			}
			if (g_setInvis[id] == 2)
			{
				g_setInvis[id] = 0;
				client_print_f(id, ColorType:6, "\x03[%s]\x01 Water is\x03 visible", g_szPrefix);
			}
			if (g_setInvis[id] == 3)
			{
				g_setInvis[id] = 1;
				client_print_f(id, ColorType:6, "\x03[%s]\x01 Water is\x03 visible", g_szPrefix);
			}
		}
		else
		{
			g_setInvis[id] = 2;
			client_print_f(id, ColorType:5, "\x03[%s]\x01 Water is\x03 invisible", g_szPrefix);
		}
	}
	else
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 There is no water on this map", g_szPrefix);
	}
	return 1;
}

public mpbhop_plugin_init()
{
	new szPossibleBlockClass[4][] = {
		{
			102, ...
		},
		{
			102, ...
		},
		{
			102, ...
		},
		{
			116, ...
		}
	};
	g_tBlocksClass = TrieCreate();
	new i;
	while (i < 4)
	{
		TrieSetCell(g_tBlocksClass, szPossibleBlockClass[i], i);
		i++;
	}
	g_bMapHasRotating = false;
	new var1;
	if (equali(g_szMapName, "kz_kzsca_heaven2", xs__ITaskId) || equali(g_szMapName, "nobkz_warehousehop", xs__ITaskId) || equali(g_szMapName, "nobkz_warehousehop_ez", xs__ITaskId))
	{
		g_bMapHasRotating = true;
	}
	if (g_bMapHasRotating)
	{
		TrieSetCell(g_tBlocksClass, "func_door_rotating", 4);
	}
	register_clcmd("kz_mpbhopmenu", "cmdBhopMenu", -1, 362640, -1);
	register_menucmd(register_menuid("MpbhopMenu", xs__ITaskId), 515, "handleMpbhopMenu");
	g_iMaxEnts = global_get(6);
	new iCount = setButtons() + setWallToggle() + setDoors();
	iCount = setBlocksByFile() + iCount;
	server_print("[MPBHOP] %d bhop blocks detected", iCount);
	setTriggerMultiple();
	return 0;
}

public cmdBhopMenu(id)
{
	if (!is_user_localhost(id))
	{
		return 1;
	}
	if (!g_bMpbhopActive)
	{
		client_print_f(id, ColorType:5, "\x03[%s]\x01 You should enable mpbhop firstly (\x03kz_mpbhop 1\x01)", g_szPrefix);
		return 1;
	}
	new iEnt;
	new dummy;
	new iClassType;
	get_user_aiming(id, iEnt, dummy, 9999);
	new var1;
	if (iEnt && pev_valid(iEnt))
	{
		new szClassName[32];
		pev(iEnt, 1, szClassName, 31);
		if (TrieGetCell(g_tBlocksClass, szClassName, iClassType))
		{
			g_bitPresentClass = 1 << iClassType | g_bitPresentClass;
			g_iAdminDoor[id] = iEnt;
			showMpbhopMenu(id, g_bBlocks[iEnt]);
		}
	}
	return 1;
}

public showMpbhopMenu(id, bIsBlocked)
{
	new szMenuBody[150];
	new var1;
	if (bIsBlocked)
	{
		var1 = 455928;
	}
	else
	{
		var1 = 455940;
	}
	formatex(szMenuBody, 149, "\rMpBhop\y Menu\n\dThis block is actually\y %smovable \d:\n\n\r1. \wMark this block as movable\n\r2. \wMark this block as unmovable\n\n\r0. \wExit", var1);
	show_my_menu(id, 515, szMenuBody, -1, "MpbhopMenu");
	return 0;
}

public handleMpbhopMenu(id, iKey)
{
	new iEnt = g_iAdminDoor[id];
	if (iEnt >= 2048)
	{
		return 1;
	}
	switch (iKey)
	{
		case 0:
		{
			if (g_bBlocks[iEnt])
			{
				g_bBlocks[iEnt] = 0;
				client_print_f(id, ColorType:6, "\x04[%s]\x01 Block has been set\x03 movable", g_szPrefix);
				saveBlocksInFile();
			}
			else
			{
				client_print_f(id, ColorType:5, "\x03[%s]\x01 Block is already movable", g_szPrefix);
			}
		}
		case 1:
		{
			if (g_bBlocks[iEnt])
			{
				client_print_f(id, ColorType:5, "\x03[%s]\x01 Block is already unmovable", g_szPrefix);
			}
			else
			{
				g_bBlocks[iEnt] = 1;
				client_print_f(id, ColorType:5, "\x04[%s]\x01 Block has been set\x03 unmovable", g_szPrefix);
				if (g_bMpbhopActive)
				{
					setTouch(true);
				}
				saveBlocksInFile();
			}
		}
		default:
		{
		}
	}
	return 1;
}

public isPlayerOnFreezedBlock(id)
{
	updateFreezeInfo(id);
	return g_bOnFreezedBlock[id];
}

public updateFreezeInfo(id)
{
	if (is_user_alive(id))
	{
		if (g_bTeleported[id])
		{
			g_bTeleported[id] = 0;
			set_pev(id, "say .%s", VEC_NULL);
			return 0;
		}
		new bool:bOnLadder = pev(id, 69) == 5;
		new var1;
		if (pev(id, 84) & 512 || bOnLadder)
		{
			static Float:flVelocity[3];
			static iEnt;
			iEnt = pev(id, 19);
			new var2;
			if (!iEnt || !g_bBlocks[iEnt] || bOnLadder)
			{
				g_bOnFreezedBlock[id] = 0;
				if (iEnt)
				{
					pev(iEnt, "say .%s", flVelocity);
					new var3;
					if (flVelocity[0] || flVelocity[1] || flVelocity[2])
					{
						g_bOnGround[id] = 0;
						return 0;
					}
				}
				pev(id, 118, g_flJumpOrigin[id]);
				g_bOnGround[id] = 1;
			}
			else
			{
				g_bOnFreezedBlock[id] = 1;
				g_bOnGround[id] = 0;
			}
		}
		else
		{
			g_bOnFreezedBlock[id] = 0;
			if (g_bOnGround[id])
			{
				g_bOnGround[id] = 0;
				pev(id, 126, g_flJumpAngles[id]);
				pev(id, 34, g_flJumpGravity[id]);
			}
		}
	}
	return 0;
}

public triggerMultipleTouch(iEnt, id)
{
	if (g_bBlocks[iEnt])
	{
		return 4;
	}
	return 1;
}

public touchBlock(iBlock, id)
{
	if (!g_bBlocks[iBlock])
	{
		return 1;
	}
	if (!is_user_connected(id))
	{
		return 4;
	}
	if (!is_user_alive(id))
	{
		return 4;
	}
	if (iBlock != pev(id, 19))
	{
		return 4;
	}
	if (iBlock != g_iBlock[id])
	{
		g_iBlock[id] = iBlock;
		g_flFirstTouch[id] = get_gametime();
		return 4;
	}
	static Float:flTime;
	flTime = get_gametime();
	if (floatsub(flTime, g_flFirstTouch[id]) > 1048576000)
	{
		if (floatsub(flTime, g_flFirstTouch[id]) > 1063675494)
		{
			g_flFirstTouch[id] = flTime;
			return 4;
		}
		g_bTeleported[id] = 1;
		set_player_origin_ac(id, g_flJumpOrigin[id], g_flJumpAngles[id], g_flJumpGravity[id], 0.0);
	}
	return 4;
}

public mpBhop(id, bool:bOn)
{
	if (bOn)
	{
		if (g_bMpbhopActive)
		{
			return 1;
		}
		setTouch(true);
		g_bMpbhopActive = true;
		if (id)
		{
			client_print(xs__ITaskId, 2, "MpBhop has been Activated, recording is NOT SAFE");
			client_print_f(id, ColorType:6, "\x04[%s]\x01 MpBhop:\x03 enabled", g_szPrefix);
		}
	}
	else
	{
		if (!g_bMpbhopActive)
		{
			return 1;
		}
		setTouch(false);
		g_bMpbhopActive = false;
		if (id)
		{
			client_print(xs__ITaskId, 2, "MpBhop has been De-Activated");
			client_print_f(id, ColorType:5, "\x04[%s]\x01 MpBhop:\x03 disabled", g_szPrefix);
		}
	}
	return 1;
}

public setDoors()
{
	new iDoor = -1;
	new i;
	new Float:flMovedir[3] = 0.0;
	new szNoise[32];
	new Float:flSize[3] = 0.0;
	new Float:flDmg = 0.0;
	new Float:flSpeed = 0.0;
	new szNull[16] = {99,111,109,109,111,110,47,110,117,108,108,46,119,97,118,0};
	while ((iDoor = find_ent_by_class(iDoor, "func_door")))
	{
		pev(iDoor, 50, flDmg);
		if (!flDmg)
		{
			pev(iDoor, 123, flMovedir);
			if (!(flMovedir[2] > 0.0))
			{
				pev(iDoor, 133, flSize);
				new var1;
				if (!((flSize[0] < 24.0 && flSize[1] > 50.0) || (flSize[1] < 24.0 && flSize[0] > 50.0)))
				{
					pev(iDoor, 9, szNoise, 31);
					new var4;
					if (!(szNoise[0] && !equal(szNoise, szNull, xs__ITaskId)))
					{
						pev(iDoor, 10, szNoise, 31);
						new var5;
						if (!(szNoise[0] && !equal(szNoise, szNull, xs__ITaskId)))
						{
							pev(iDoor, 52, flSpeed);
							if (!(flSpeed < 80.0))
							{
								g_bBlocksByPlugin[iDoor] = 1;
								g_bBlocks[iDoor] = 1;
								g_bitPresentClass = g_bitPresentClass | 1;
								i++;
							}
						}
					}
				}
			}
		}
		set_pev(iDoor, 9, szNull);
		set_pev(iDoor, 10, szNull);
		set_pev(iDoor, 11, szNull);
	}
	return i;
}

public setWallToggle()
{
	new iEnt = -1;
	new i;
	while ((iEnt = find_ent_by_class(iEnt, "func_wall_toggle")))
	{
		g_bitPresentClass = g_bitPresentClass | 2;
		g_bBlocksByPlugin[iEnt] = 1;
		g_bBlocks[iEnt] = 1;
		i++;
	}
	return i;
}

public setButtons()
{
	new Trie:tButtons = TrieCreate();
	new i;
	while (i < 10)
	{
		TrieSetCell(tButtons, szStartTargets[i], 1);
		i++;
	}
	new i;
	while (i < 9)
	{
		TrieSetCell(tButtons, szFinishTargets[i], 1);
		i++;
	}
	new iEnt = -1;
	new i;
	new szTarget[32];
	new spawnflags;
	while ((iEnt = find_ent_by_class(iEnt, "func_button")))
	{
		spawnflags = pev(iEnt, 83);
		if (spawnflags & 289 == 256)
		{
			pev(iEnt, 4, szTarget, 31);
			new var1;
			if (!szTarget[0] || !TrieKeyExists(tButtons, szTarget))
			{
				pev(iEnt, 5, szTarget, 31);
				new var2;
				if (!szTarget[0] || !TrieKeyExists(tButtons, szTarget))
				{
					g_bitPresentClass = g_bitPresentClass | 4;
					g_bBlocksByPlugin[iEnt] = 1;
					g_bBlocks[iEnt] = 1;
					i++;
				}
			}
		}
		if (spawnflags & 64)
		{
			set_pev(iEnt, 83, spawnflags & -65);
		}
	}
	TrieDestroy(tButtons);
	return i;
}

public setTouch(bool:bActive)
{
	static HamHook:iHhBlockTouch[4];
	static HamHook:iHhBlockTouchExtra;
	if (bActive)
	{
		static szClassesAndHandlers[4][2][0] =
		{
			{
				{
					102, ...
				},
				{
					116, ...
				}
			},
			{
				{
					102, ...
				},
				{
					116, ...
				}
			},
			{
				{
					102, ...
				},
				{
					116, ...
				}
			},
			{
				{
					116, ...
				},
				{
					116, ...
				}
			}
		};
		new i;
		while (i < 4)
		{
			if (1 << i & g_bitPresentClass)
			{
				if (iHhBlockTouch[i])
				{
					EnableHamForward(iHhBlockTouch[i]);
				}
				iHhBlockTouch[i] = RegisterHam(42, szClassesAndHandlers[i][0], szClassesAndHandlers[i][1], xs__ITaskId);
			}
			i++;
		}
		if (g_bMapHasRotating)
		{
			if (iHhBlockTouchExtra)
			{
				EnableHamForward(iHhBlockTouchExtra);
			}
			iHhBlockTouchExtra = RegisterHam(42, "func_door_rotating", "touchBlock", xs__ITaskId);
		}
	}
	else
	{
		new i;
		while (i < 4)
		{
			new var1;
			if (1 << i & g_bitPresentClass && iHhBlockTouch[i])
			{
				DisableHamForward(iHhBlockTouch[i]);
			}
			i++;
		}
		if (g_bMapHasRotating)
		{
			if (iHhBlockTouchExtra)
			{
				DisableHamForward(iHhBlockTouchExtra);
			}
		}
	}
	return 0;
}

public setBlocksByFile()
{
	get_localinfo("amxx_datadir", g_szMpbhopConfig, 63);
	format(g_szMpbhopConfig, 63, "%s/mpbhop", g_szMpbhopConfig);
	if (!dir_exists(g_szMpbhopConfig))
	{
		mkdir(g_szMpbhopConfig);
	}
	new szMapName[32];
	get_mapname(szMapName, 31);
	format(g_szMpbhopConfig, 63, "%s/%s.dat", g_szMpbhopConfig, szMapName);
	new iFile = fopen(g_szMpbhopConfig, "rt");
	new i;
	if (iFile)
	{
		new szDatas[48];
		new szBrushOrigin[3][13] = {
			{
				119, 116, 0, 37, 102, 32, 37, 102, 32, 37, 102, 32, 37
			},
			{
				100, 10, 0, 116, 114, 105, 103, 103, 101, 114, 95, 109, 117
			},
			{
				108, 116, 105, 112, 108, 101, 0, 37, 100, 0, 37, 109, 0
			}
		};
		new szType[2];
		new Float:flBrushOrigin[3] = 0.0;
		new iEnt;
		new szClassName[32];
		new iClassType;
		while (!feof(iFile))
		{
			fgets(iFile, szDatas, 47);
			trim(szDatas);
			new var2;
			if (!(!szDatas[0] || szDatas[0] == 59 || szDatas[0] == 35 || (szDatas[0] == 47 && szDatas[1] == 47)))
			{
				parse(szDatas, szBrushOrigin[0][szBrushOrigin], 12, szBrushOrigin[1], 12, szBrushOrigin[2], 12, szType, 1);
				new j;
				while (j < 3)
				{
					flBrushOrigin[j] = str_to_float(szBrushOrigin[j]);
					j++;
				}
				iEnt = findEntByBrushOrigin(flBrushOrigin);
				if (iEnt)
				{
					if (szType[0] == 49)
					{
						pev(iEnt, 1, szClassName, 31);
						if (TrieGetCell(g_tBlocksClass, szClassName, iClassType))
						{
							g_bitPresentClass = 1 << iClassType | g_bitPresentClass;
						}
						if (!g_bBlocks[iEnt])
						{
							i++;
							g_bBlocks[iEnt] = 1;
						}
					}
					if (g_bBlocks[iEnt])
					{
						i--;
						g_bBlocks[iEnt] = 0;
					}
				}
			}
		}
		fclose(iFile);
	}
	return i;
}

public saveBlocksInFile()
{
	new iFile = fopen(g_szMpbhopConfig, 458072);
	new Float:flBrushOrigin[3] = 0.0;
	new iEnt;
	while (iEnt <= g_iMaxEnts)
	{
		if (pev_valid(iEnt))
		{
			if (g_bBlocksByPlugin[iEnt] != g_bBlocks[iEnt])
			{
				fm_get_brush_entity_origin(iEnt, flBrushOrigin);
				fprintf(iFile, "%f %f %f %d\n", flBrushOrigin, flBrushOrigin[1], flBrushOrigin[2], g_bBlocks[iEnt]);
			}
		}
		iEnt++;
	}
	fclose(iFile);
	return 0;
}

findEntByBrushOrigin(Float:flOrigin[3])
{
	new Float:flBrushOrigin[3] = 0.0;
	new iEnt;
	while (iEnt <= g_iMaxEnts)
	{
		if (pev_valid(iEnt))
		{
			fm_get_brush_entity_origin(iEnt, flBrushOrigin);
			if (are_vectors_almost_equal(flBrushOrigin, flOrigin, 5.0E-6))
			{
				return iEnt;
			}
		}
		iEnt++;
	}
	return 0;
}

public setTriggerMultiple()
{
	new iEnt = -1;
	new szTarget[32];
	new iBlock;
	while ((iEnt = find_ent_by_class(iEnt, "trigger_multiple")))
	{
		pev(iEnt, 4, szTarget, 31);
		iBlock = find_ent_by_tname(-1, szTarget);
		new var1;
		if (iBlock && g_bBlocks[iBlock])
		{
			g_bitPresentClass = g_bitPresentClass | 8;
			g_bBlocksByPlugin[iEnt] = 1;
			g_bBlocks[iEnt] = 1;
		}
	}
	return 0;
}

public ac_record_demo()
{
	new day[30];
	new month[30];
	new year[30];
	get_time("%d", day, 29);
	get_time("%m", month, 29);
	get_time("%Y", year, 29);
	new hours[30];
	new minutes[30];
	new seconds[30];
	get_time("%H-", hours, 29);
	get_time("%M", minutes, 29);
	get_time("%S", seconds, 29);
	if (task_exists(8000, xs__ITaskId))
	{
		remove_task(8000, xs__ITaskId);
	}
	set_task(1092616192, "taskCheckTime", 8000, 383308, xs__ITaskId, 458336, xs__ITaskId);
	CvarFlagString[0] = 0;
	return 0;
}

public ac_stop_demo(szDemoNewPath[])
{
	return 0;
}

public taskCheckTime(id)
{
	new day[30];
	new month[30];
	new year[30];
	get_time("%d", day, 29);
	get_time("%m", month, 29);
	get_time("%Y", year, 29);
	new hours[30];
	new minutes[30];
	new seconds[30];
	get_time("%H-", hours, 29);
	get_time("%M", minutes, 29);
	get_time("%S", seconds, 29);
	return 0;
}

public ac_start_button()
{
	new day[30];
	new month[30];
	new year[30];
	get_time("%d", day, 29);
	get_time("%m", month, 29);
	get_time("%Y", year, 29);
	new hours[30];
	new minutes[30];
	new seconds[30];
	get_time("%H-", hours, 29);
	get_time("%M", minutes, 29);
	get_time("%S", seconds, 29);
	return 0;
}

public ac_finish_button()
{
	new day[30];
	new month[30];
	new year[30];
	get_time("%d", day, 29);
	get_time("%m", month, 29);
	get_time("%Y", year, 29);
	new hours[30];
	new minutes[30];
	new seconds[30];
	get_time("%H-", hours, 29);
	get_time("%M", minutes, 29);
	get_time("%S", seconds, 29);
	if (task_exists(8000, xs__ITaskId))
	{
		remove_task(8000, xs__ITaskId);
	}
	return 0;
}

 